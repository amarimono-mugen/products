; サンプルキャラクター『カンフーマン』のコンスタンツとステートのファイルです。
;===========================================================================
; コンスタンツ（定数）
;===========================================================================
;---------------------------------------------------------------------------
; ここがキャラの心臓部とも言うべき場所。
; １キャラ単位のライフや大きさなど、標準のステータスを予め決めておく部分。
; このコーナー自体省略出来ません。
;---------------------------------------------------------------------------
; 基本データ
;---------------------------------------------------------------------------
[Data]
life              = 1000   ;ライフ（体力ゲージ）最大値
power             = 10000   ;パワーゲージ最大値（オプション・デフォルトは3000=Lv.3）
attack            = 100    ;攻撃力（デフォルトは１００％）
defence           = 100    ;防御力（デフォルトは１００％）
fall.defence_up   = 50     ;横に倒れている時に一時的に加える防御力（％）
liedown.time      = 60     ;横に倒れている時間（フレーム）
airjuggle         = 15     ;ジャグルポイント限界値（「小ネタ.txt」参照）
sparkno           = 2      ;デフォルトのヒットスパーク（fightfxから）
guard.sparkno     = 40     ;デフォルトのガードスパーク（fightfxから）
KO.echo           = 0      ;ＫＯ時の音声（11,0）にエコーを掛けるか否か（0=掛けない,1=掛ける）
volume            = 0      ;キャラの標準の音量（最小-255・最大255）
IntPersistIndex   = 60     ;次のラウンドへ持ち越せる「Var」のアドレスの範囲を決める（※１）
FloatPersistIndex = 40     ;次のラウンドへ持ち越せる「FVar」のアドレスの範囲を決める（※１）

;---------------------------------------------------------------------------
; ※１：変数のラウンド持ち越し方法
;
; 　変数を次のラウンドへ持ち越したい場合は、↑の
; 　「IntPersistIndex」と「FloatPersistIndex」を使う。
; 　そのやり方はM.U.G.E.Nの説明書にすら載ってないので、ここで例を元に解説。
;
; 　①IntPersistIndex = 23　（Var(23)～Var(59)までを全て次のラウンドへ持ち越せる）
; 　②FloatPersistIndex = 18（FVar(18)～FVar(39)までを全て次のラウンドへ持ち越せる）
;
; 　つまり「Var(**)（Fvar(**)）以降全ての変数を持ち越す」という命令になる。
; 　それ以前のアドレスの変数は全て持ち越さなくなる。
;
; 　全ての変数を持ち越さない場合は、
; 　IntPersistIndexは60以上、FloatPersistIndexは40以上にしておこう。
;
; 　×これはダメ×
; 　　①IntPersistIndex = 10,15,20,25　（15,20,25の部分は意味無し）
; 　　②FloatPersistIndex = 4,16 　　　（16の部分は意味無し）
; 　　これらは最初の数字以外全て無効。
; 
;---------------------------------------------------------------------------
; 改訂前の和訳ＫＦＭではPersistIndexの解釈が無茶苦茶間違ってました。
; 大変失礼致しました。(人・ω・｀)ごめんなさい
; 今回はちゃんと調べて正確な情報を載せてるんで安心してください（苦笑
;---------------------------------------------------------------------------
; サイズ
;---------------------------------------------------------------------------
[Size]
xscale = .833			;水平方向の縮尺（通常１）
yscale = 1.05			;垂直方向の縮尺（通常１）
ground.back      = 15      ;地上にいる時の「後方の物理的な幅」
ground.front     = 16      ;地上にいる時の「前方の物理的な幅」
air.back         = 12      ;空中にいる時の「後方の物理的な幅」
air.front        = 12      ;空中にいる時の「前方の物理的な幅」
height           = 60      ;キャラの物理的な高さ（高いほど相手は飛び越しにくくなる）
attack.dist      = 160     ;相手がガード態勢に入る最低の距離
proj.attack.dist = 90      ;自分の「Projectile」に対して相手がガード態勢に入る最低の距離
proj.doscale     = 0       ;xscaleとyscaleを「Projectile」にも影響させるか否か（0=させない・1=させる）
head.pos         = -5,-90  ;キャラの標準の頭の座標（Bind系で適用される）
mid.pos          = -5,-60  ;キャラの標準の体中心の座標（Bind系で適用される）
shadowoffset     = 0       ;影のＹ軸方向の位置座標
draw.offset      = 0,0     ;キャラの表示座標（Ｘ軸,Ｙ軸）

;---------------------------------------------------------------------------
; 移動速度
;---------------------------------------------------------------------------
[Velocity]
walk.fwd     = 2.4         ;前進速度（Ｘ軸・[Statedef 20]に適用される）
walk.back    = -2.2        ;後退速度（Ｘ軸・[Statedef 20]に適用される）
run.fwd      = 4.6,0       ;前方に走る速度（Ｘ軸,Ｙ軸・[Statedef 100]に適用される）
run.back     = -4.5,-3.8   ;後方に走る速度（Ｘ軸,Ｙ軸・[Statedef 105]に適用される）
jump.neu = 0,-10     ;垂直ジャンプの速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
jump.back = -2.67      ;後方ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
jump.fwd = 2.97        ;前方ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
runjump.back = -4.5,-11	;後ダッシュしながらのジャンプ速度(オプション)
runjump.fwd = 4.5,-11	;前ダッシュしながらのジャンプ速度(オプション)
airjump.neu  = 0,-8.1      ;空中垂直ジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 45]に適用される）
airjump.back = -2.55       ;空中後方ジャンプ速度（Ｘ軸・[Statedef 45]に適用される）
airjump.fwd  = 2.5         ;空中前方ジャンプ速度（Ｘ軸・[Statedef 45]に適用される）

;---------------------------------------------------------------------------
; 運動関係
;---------------------------------------------------------------------------
[Movement]
 airjump.num = 0       ;空中ジャンプが出来る回数
airjump.height  = 35       ;空中ジャンプが出来る最低の高度（Ｙ軸）
yaccel = .6		      ;Ｙ軸加速度（重力）
stand.friction  = .85      ;立っている時の摩擦係数（ステートのPhysicsが「S」の時）
crouch.friction = .82      ;しゃがんでいる時の摩擦係数（ステートのPhysicsが「C」の時）

;===========================================================================
; ステート
;===========================================================================
;---------------------------------------------------------------------------
; ここからはキャラのそれぞれの行動（ステート）を設定する。
; 番号（ステートナンバー）に気を付ければ良いだけで、
; 行動の決め方もステートの数も作りたいキャラによって自由。
;
; 本来ステートは別のファイルとして扱っているものだけど、
; このようにコンスタンツファイルと一緒にまとめる事も可能。
;
; ステートの基本的な設定はおまけフォルダの「テンプレート.txt」を参照。
;===========================================================================
; 基本行動
;===========================================================================
;---------------------------------------------------------------------------
;タイムオーバー（負けた時）
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 無敵]
type = NotHitBy
trigger1 = 1 ;トリガーを何も書かず「1」にする事により、『無条件で常に実行させる命令』になる。
value = SCA
time = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;勝利ポーズ分岐（common1.cnsには無いけど、これもコモンステート）
[Statedef 180]
type = S

[State 180, ステート変更]
type = ChangeState
triggerall = Time = 0
trigger1 = matchover
value = 184

[State 180, ステート変更]
type = ChangeState
trigger1 = Time = 0
value = 181

;---------------------------------------------------------------------------
;勝利ポーズ
[Statedef 181]
type = S
ctrl = 0
anim = 1400
velset = 0,0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 100, 14
channel = 0

[State 191, 2] 
type = AssertSpecial
trigger1 = Time = [0,330]
flag = roundnotover

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
;---------------------------------------------------------------------------
;勝利ポーズ２
[Statedef 182]
type = S
ctrl = 0
anim = 36400
velset = 0,0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 100, 17

[State -2]
type = Helper
trigger1 = time = 0
helpertype = normal
name = "ge"
stateno = 183
id = 183
pos = 0, 0
postype = p1
ownpal = 1
facing = 1

[State 191, 2] 
type = AssertSpecial
trigger1 = Time = [0,230]
flag = roundnotover

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
;---------------------------------------------------------------------------
; 
[Statedef 183]
type    = S
movetype= I
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0
anim = 183
sprpriority = 4
facep2 = 1

[State 3002　押し判定]
type = PlayerPush
trigger1 = 1
value = 0

[State 1010, 移動速度]
type = VelSet
trigger1 = time > 14
x = -2
;---------------------------------------------------------------------------
;勝利ポーズ3
[Statedef 184]
type = S
ctrl = 0
anim = 182
velset = 0,0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 100, 17
channel = 0

[State 1000, 7]
type = Helper
trigger1 = Time = 6
trigger1 = numhelper(184) = 0
helpertype = normal
name = "bom"
stateno = 185
id = 184
pos = 0, 0
postype = p1
ownpal = 1
facing = 1
size.xscale = 1.5
size.yscale = 1.5

[State 5900, 3] 
type = ChangeState
trigger1 = NumEnemy > 1
trigger1 = time = 0
value = 182

[State 5900, 3] 
type = ChangeState
trigger1 = NumPartner > 0
trigger1 = time = 0
value = 182

[State 191, 2] 
type = AssertSpecial
trigger1 = Time = [0,220]
flag = roundnotover
;---------------------------------------------------------------------------
; 爆発
[Statedef 185]
type    = S
movetype= I
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0
anim = 912
sprpriority = 4
facep2 = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 100, 2

[state 181, 1]
type = posset
trigger1 = time = 0 && facing = 1
x = enemynear,pos x -1

[state 181, 1]
type = posset
trigger1 = time = 0 && facing = -1
x = enemynear,pos x +1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 0
value = 300,1

[State 230, 3]
type = destroyself
trigger1 = AnimTime = 0
;---------------------------------------------------------------------------
; 爆発死
[Statedef 186]
type    = A
movetype = H
physics = S

[State 1060, 2]
type = changeanim2
trigger1 = time = 0
value = 30000

[State 1061, 2]
type = Velset
trigger1 = time = 2
y = -4
x = -4.5

[State 1061, 2]
type = Velset
trigger1 = time = 4
y = -3.675
x = -4.5

[State 1061, 2]
type = Velset
trigger1 = time = 6
y = -3.35
x = -4.5

[State 1061, 2]
type = Velset
trigger1 = time = 8
y = -3
x = -4.5

[State 1061, 2]
type = Velset
trigger1 = time = 10
y = -1.5
x = -4.5

[State 1061, 2]
type = Velset
trigger1 = time = 12
y = -0.75
x = -4.5

[State 1061, 2]
type = Velset
trigger1 = time = 14
y = -0.375
x = -4.5

[State 1061, 2]
type = Velset
trigger1 = time = 16
y = 0
x = -4.25

[State 1061, 2]
type = Velset
trigger1 = time = 18
y = 0.25
x = -4

[State 1061, 2]
type = Velset
trigger1 = time = 20
y = 0.5
x = -3.75

[State 1061, 2]
type = Velset
trigger1 = time = 22
y = 1
x = -3.5

[State 1061, 2]
type = Velset
trigger1 = time = 23
y = 2
x = -3.25

[State 1061, 2]
type = Velset
trigger1 = time = 24
y = 4
x = -3

[State 1061, 2]
type = Velset
trigger1 = time = 25
y = 6
x = -2.75

[State 1061, 2]
type = Velset
trigger1 = time = 25
y = 8
x = -2.5

[State 1061, 2]
type = Velset
trigger1 = time = 26
y = 10
x = -2.25

[State 1061, 2]
type = Velset
trigger1 = time > 27
y = 12
x = -2


[State 1061, 2]
type = Velset
trigger1 = time > 5
trigger1 = Pos Y >= 0
y = 0
x = 0

[state 3000]
type = nothitby
trigger1 = 1
value = CA ,AP, AT, NA, SA

[State 5900, 3] ;Intro
type = ChangeState
trigger1 = time > 5
trigger1 = Pos Y >= 0
value = 5110
;---------------------------------------------------------------------------
;（相手）
[Statedef 187]
ctrl = 0
velset = 0,0

[State 181, 1]
type = AssertSpecial
trigger1 = enemynear,StateNo = 184 && enemynear,name = "killa yoshikage" && enemynear,time > 6
flag = invisible
;---------------------------------------------------------------------------
; 爆発死
[Statedef 189]
type    = L
movetype = H
physics = N

[State 181, 1]
type = changestate
trigger1 = time = 0
value = 5150
;---------------------------------------------------------------------------
;イントロ（試合開始前の登場演出アクション）
[Statedef 191]
type = S
ctrl = 0
anim = 9997
velset = 0,0

[State 10820, スタンド]
type = Explod
trigger1 = time = 30
facing = 1                 ;キャラと同じ向きに表示（デフォ
postype = p1
pos = -2,-60
anim = 187
sprpriority = -2
ownpal = 1

[State 3000, ゲージ増加]
type = PowerAdd
trigger1 = time = 0
triggerall = power <= 999
value = 1000

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 3
value = 100, 9
channel = 0

[State 191, アニメ変更];バトル画面に切り替わった瞬間のフェードインの時、アニメを固定している
type = ChangeAnim
trigger1 = RoundState = 0
value = 9997

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状態

[State 191, ステート変更];アニメーションが終われば「通常立ち」のステートに変更する
type = ChangeState
trigger1 = Time = 0
trigger1 = Random <= 500
value = 192

[State 191, ステート変更];アニメーションが終われば「通常立ち」のステートに変更する
type = ChangeState
trigger1 = Time = 320
value = 0
;---------------------------------------------------------------------------
;イントロ（試合開始前の登場演出アクション）
[Statedef 192]
type = S
ctrl = 0
anim = 185
velset = 0,0

[State 10820, スタンド]
type = Explod
trigger1 = time = 100
facing = 1                 ;キャラと同じ向きに表示（デフォ
postype = p1
pos = 0,-60
anim = 188
sprpriority = -2
ownpal = 1

[State 10820, けむり]
type = Explod
trigger1 = time = 1
facing = 1                 ;キャラと同じ向きに表示（デフォ
postype = p1
pos = 20,-100
anim = 186
sprpriority = 4
ownpal = 1

[State 3000, ゲージ増加]
type = PowerAdd
trigger1 = time = 0
triggerall = power <= 999
value = 1000

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 100, 21

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 6
value = 100, 23
channel = 0

[State 191, アニメ変更];バトル画面に切り替わった瞬間のフェードインの時、アニメを固定している
type = ChangeAnim
trigger1 = RoundState = 0
value = 185

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状態

[State 191, ステート変更];アニメーションが終われば「通常立ち」のステートに変更する
type = ChangeState
trigger1 = animTime = 0
value = 0
;---------------------------------------------------------------------------
; ※２：AssertSpecial
;
; 　他のコントローラでは設定出来ない『特殊な効果』を指定する命令。
; 　設定したトリガーが有効になってる間だけ一時的に適用される。
;
; 　適用出来るパラメータはこのコントローラを一つ設置する場合、最大３つまで。
; 　書式としては「flag」「flag2」「flag3」を順に加えていく形。
; 　flag2とflag3はオプション。ではその特殊効果を全て紹介。
;
; 　Intro          = イントロ（試合開始前の登場演出アクション）の状態になる。イントロステート専用。
; 　Invisible      = 自分の姿を消す。しかし残像（AfterImage）は消せない。
; 　RoundNotOver   = 現在のラウンドを過ぎない。勝利ポーズ専用。
; 　NoBarDisplay   = ライフバーを非表示にする。
; 　NoBG           = ステージの奥の画像を非表示にし、「真っ黒の背景」にする。
; 　NoFG           = ステージの手前の画像を非表示にする。
; 　NoStandGuard   = 立ちガードが出来なくなる。
; 　NoCrouchGuard  = しゃがみガードが出来なくなる。
; 　NoAirGuard     = 空中ガードが出来なくなる。
; 　NoAutoTurn     = 自動で振り向かない。
; 　NoJuggleCheck  = ジャグルをチェックしない。（ジャグルポイントが減らなくなる）
; 　NoKOSnd        = ＫＯ時の音声（11,0）を鳴らさないようにする。画面中に存在する全員に有効なので注意。
; 　NoKOSlow       = ＫＯ時のスローモーションを無効にする。（ＫＯ直前に有効にしないといけない）
; 　NoShadow       = 自分の影を消す。
; 　GlobalNoShadow = 画面中に存在する全てのプレイヤー（ヘルパーとProjectileも含む）の影を消す。
; 　NoMusic        = 演奏しているＢＧＭを止める。（プラグインによってはＢＧＭがバグるので要注意）
; 　NoWalk         = 歩かない。（前か後ろのキーを入力中コントロールが可能の時に勝手に[Statedef 20]にならない）
; 　TimerFreeze    = タイムカウント（制限時間）を停止する。
; 　UnGuardable    = 自分の全ての攻撃が『ガード不可』になる。
;
;---------------------------------------------------------------------------
;挑発
[Statedef 195]
type = S
movetype = I
physics = S
ctrl = 0
anim = 181
velset = 0,0
sprpriority = 2

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = 100, 12
channel = 0

[State 195, コントロール]
type = CtrlSet
trigger1 = Time = 116 ;このステートが４０フレームになったら
value = 1            ;キーコントロールが可能になる。

[State 195, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===========================================================================
; 通常攻撃技
;===========================================================================
;---------------------------------------------------------------------------
; 通常技はそんなに難しいテクニックは使ってないから、
; テンプレートを見ながら確認すれば覚えやすいと思う。
; 基本忘るべからず。
;
; ステートナンバーは、立ち技が２００～２９９、しゃがみ技が４００～４９９、
; ジャンプ技が６００～６９９の間で決めて作るのが一般的。
; しかし強制じゃないので自由に作っちゃってＯＫ。
;---------------------------------------------------------------------------
;立ち弱パンチ
[Statedef 200]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 200
poweradd = 20
sprpriority = 2
facep2 = 1

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA ;立ち通常打撃（Standing, Normal Attack）
damage = 23, 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 8, 8
sparkno = s810
sparkxy = -10, -76
hitsound = s1, 0
guardsound = s1, 5
ground.type = High
ground.slidetime = 5
ground.hittime  = 10
ground.velocity = -4
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1.4,-3
air.hittime = 12

[State 200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 下の「立ち強パンチ」のステートを見てみましょ。
;
;「Width」のコントローラは相手や画面端を押すための『物理的な幅』を
; 一時的に伸ばしたり縮ませたりする命令。
; キャラの幅はバトル中に「Ctrl+C」を押して「判定ボックス」を表示させてる時に
; 一緒に確認出来る。「軸位置から伸びる黄緑色の線」がその幅。
;
; 後は「ChangeAnim」を使って５枚目で攻撃を当てたらすぐに６枚目に
; コマを進ませる命令をしてたり、
;『画像表示優先度』で「振りかぶる時は奥」「振り切った直後から手前」に
; モーション表示の操作をしてるくらいで、難しくない処理。
;
; これは余談だけど、Widthの読み方は「ウィッズ」。
; この解説文書いた時に初めて読み方知ったよ！　｡ﾟ(ﾟつД`ﾟ)ﾟ｡
;---------------------------------------------------------------------------
;立ち強パンチ
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
anim = 210
sprpriority = -1

[State 210, アニメ変更]
type = ChangeAnim
trigger1 = AnimElemTime(5) > 0 && AnimElemTime(6) <= 0
trigger1 = movecontact
value = 210
elem = 6
ignorehitpause = 1
persistent = 0

[State 210, 画像表示優先度]
type = SprPriority
trigger1 = AnimElem = 5
value = 2

[State 210, 物理的なキャラの幅]
type = Width
trigger1 = (AnimElemTime (2) >= 0) && (AnimElemTime (7) < 0)
value = 15,0  ;この場合キャラの幅を一時的に前に１５ピクセル伸ばす事になる。
              ;値の意味は「前方のピクセル増減量,後方のピクセル増減量」

[State 210, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 5
value = 0, 1

[State 1027, 位置]
type = velset
trigger1 = time = 5
x = 5

[State 210, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = Medium
damage    = 57
guardflag = MA
pausetime = 0,8
sparkno = s820
sparkxy = -10,-20
hitsound = s1, 1
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 13
ground.velocity = -5.5
air.velocity = -2.5,-4

[State 210, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;立ち弱キック
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 22
ctrl = 0
velset = 0,0
anim = 230
sprpriority = 2

[State 230, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 230, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Medium
damage    = 26
guardflag = MA
pausetime = 12,12
sparkno = 0
sparkxy = -10,-37
hitsound   = 5,1
guardsound = 6,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 11
ground.velocity = -5
air.velocity = -2.5,-3.5

[State 230, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;立ち強
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 65
ctrl = 0
velset = 0,0
anim = 240
sprpriority = 2

[State 210, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, NA
sprpriority = 3
animtype  = Medium
damage    = 64
guardflag = MA
pausetime = 13,13
sparkno = s830
sparkxy = -10,-60
hitsound = s100, 16
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 13
ground.velocity = -5.5
air.velocity = -2.5,-4

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 100, 22
channel = 0

[state 0, helper]
type = helper
trigger1 = animelem = 1
helpertype = normal
name = "stand"
stateno = 241
id = 241
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 1
size.yscale = 1

[State 240, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;本体立ち強スタンド
[Statedef 241]
type = S
movetype = A
physics = N
ctrl = 0
anim = 241
sprpriority = 1

[State 240, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 5
value = 0, 2

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 10,-10

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA
[State 0, ts]
type = TargetState
trigger1 = movehit
trigger1 = !Target,NumPartner
trigger1 = Target,life = 0
trigger1 = roundno > 1
value = 186

[State 0, end]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,stateno != 240 
;---------------------------------------------------------------------------
;前立ち強
[Statedef 250]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 65
ctrl = 0
velset = 0,0
anim = 450
sprpriority = 2

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 100, 22
channel = 0

[state 0, helper]
type = helper
trigger1 = animelem = 1
helpertype = normal
name = "stand"
stateno = 251
id = 241
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = .9
size.yscale = 1.07

[State 240, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;本体前立ち強スタンド
[Statedef 251]
type = S
movetype = A
physics = N
ctrl = 0
anim = 451
sprpriority = 3

[State 240, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 5
value = 0, 2

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 12,-10

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 210, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, NA
sprpriority = 3
animtype  = Medium
damage    = 42
guardflag = MA
pausetime = 0,10
sparkno = s830
sparkxy = -10,-60
hitsound = s100, 16
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 13
ground.velocity = -3.5
air.velocity = -2.5,3
fall.recover = 0

[State 0, ts]
type = TargetState
trigger1 = movehit
trigger1 = !Target,NumPartner
trigger1 = Target,life = 0
trigger1 = roundno > 1
value = 186

[State 0, end]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,stateno != 250 
;===========================================================================
;---------------------------------------------------------------------------
; ２Ｄ格ゲーでのしゃがみ通常攻撃は空中ガードが不可な作品が結構多い。
; カンフーマンも例外ではなかったみたい。
; ↓のしゃがみ弱パンチのguardflagが「L」のみになってるのに注目。
; 意味は「Low」。相手はこのしゃがみ弱パンチをガードする場合、
; 「しゃがみガードだけしか出来ない」という事になる。
;
; それ以外は簡単。
;---------------------------------------------------------------------------
;しゃがみ弱パンチ
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 15
ctrl = 0
anim = 400
sprpriority = 2
facep2 = 1

[State 400, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 200, 1]
type = Hitdef
trigger1 = AnimElem = 2
attr = C, NA
hitflag = MAF
guardflag = L
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = 20
pausetime = 11,10
guard.pausetime = 11,0
sparkno = s810
guard.sparkno = S840
sparkxy = -10,-13
hitsound = S1,0
guardsound = S1,5
ground.type = Low
air.type = Low
ground.slidetime = ifelse((11-floor(var(28)*.125))<3,3,(11-floor(var(28)*.125)))
ground.hittime = ifelse((11-floor(var(28)*.125))<3,3,(11-floor(var(28)*.125)))
air.hittime = ifelse((11-floor(var(28)*.125))<3,3,(11-floor(var(28)*.125)))
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = -6
ground.cornerpush.veloff = -5
air.cornerpush.veloff = 0
getpower = 40*(var(8)!=3),0
givepower = 20*(var(8)!=3),0
persistent = 0
air.fall = 0
fall.recover = 1
yaccel = .44

[State 400, ヒット定義]
type = HitDef
trigger1 = AnimElem = 99
attr = C, NA ;しゃがみ通常打撃（Crouching, Normal Attack）
damage    = 23
priority  = 3
animtype  = Light
hitflag = MAF
guardflag = L
pausetime = 9,11
sparkno = s810
sparkxy = -10,-22
hitsound = S1,0
hitsound = S1,3
ground.type = Low
ground.slidetime = 4
ground.hittime  = 10
ground.velocity = -6
guard.velocity = -5.5
air.velocity = -1.5,-3
air.fall = 0
fall.recover = 1

[State 400, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11 ;しゃがむステートへ（コモンステート）
Ctrl = 1

;---------------------------------------------------------------------------
; 効果の違う攻撃を連続でヒットさせる場合は、複数のHitDefが必要。
; ↓のしゃがみ強パンチのguardflagの効果がそれぞれ別々（MとMA）なように、
; パラメータが数値じゃなければ特に。こればかりはどうしようもない。
;---------------------------------------------------------------------------
;しゃがみ強パンチ
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 6
poweradd= 50
ctrl = 0
anim = 410
sprpriority = 3

[state 0, helper]
type = helper
trigger1 = animelem = 1
helpertype = normal
name = "stand"
stateno = 411
id = 241
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 1
size.yscale = 1

[State 410, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------
;本体屈中スタンド
[Statedef 411]
type = S
movetype = A
physics = N
ctrl = 0
anim = 411
sprpriority = 2

[State 240, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 7
value = 0, 1

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 20,0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 210, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, NA
sprpriority = 2
animtype  = Medium
damage    = 41
guardflag = L
pausetime = 5,10
sparkno = s820
sparkxy = -10,-30
hitsound = s1, 1
guardsound = s1,5
ground.type = High
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -8.5
guard.velocity = -8
air.velocity = -4.5,-4
air.fall = 1
fall.recover = 1

[State 0, ts]
type = TargetState
trigger1 = movehit
trigger1 = !Target,NumPartner
trigger1 = Target,life = 0
trigger1 = roundno > 1
value = 186

[State 0, end]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,stateno != 410
;---------------------------------------------------------------------------
;しゃがみ弱キック
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 22
ctrl = 0
anim = 430
sprpriority = 2

[State 430, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 430, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 28
animtype  = Light
hitflag = MAFD
guardflag = L
pausetime = 12,12
sparkno = 0
sparkxy = -10,-8
hitsound   = 5,1
guardsound = 6,0
ground.type = Low
ground.slidetime = 6
ground.hittime  = 10
ground.velocity = -5
air.velocity = -2,-3
down.velocity = -5,0
down.hittime = 20

[State 430, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; 誰もが攻撃手段としてお世話になる「足払い」はダウン属性の攻撃。
; 実際に足払いの効果にするにはground.typeを「Trip」に、
; fallを「1」にする必要がある。もちろん当たればジャグルポイントも消費。
;
; ここで一つ補足。ground.typeが「Trip」になっている場合、
; 攻撃力や防御力に関係無く転ばした後に続く攻撃（「コンボ」など）が
;『全て無条件でダメージに補正が掛かる』。
; 必ず通常の半分のダメージ量に下がるので注意。
;---------------------------------------------------------------------------
;しゃがみ強キック（足払い攻撃）
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 7
poweradd= 70
ctrl = 0
anim = 440
sprpriority = 2

[State 810, Throw Sound]
type = playsnd
trigger1 = time = 0
value = 100,0

[state 0, helper]
type = helper
trigger1 = animelem = 1
helpertype = normal
name = "stand"
stateno = 441
id = 241
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 1
size.yscale = 1

[State 410, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------
;本体屈強スタンド
[Statedef 441]
type = S
movetype = A
physics = N
ctrl = 0
anim = 441
sprpriority = 2

[State 240, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 7
value = 0, 2

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 15,-1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 210, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, NA
sprpriority = 2
animtype  = Medium
damage    = 55
guardflag = MA
pausetime = 5,13
sparkno = s830
sparkxy = -10,-30
hitsound = s1, 2
guardsound = s1,5
ground.type = High
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -8.5
guard.velocity = -8
air.velocity = -4.5,-4
air.fall = 1
fall.recover = 1

[State 0, ts]
type = TargetState
trigger1 = movehit
trigger1 = !Target,NumPartner
trigger1 = Target,life = 0
trigger1 = roundno > 1
value = 186

[State 0, end]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,stateno != 440
;---------------------------------------------------------------------------
;しゃがみ強2
[Statedef 442]
type    = C
movetype= A
physics = C
juggle  = 7
poweradd= 70
ctrl = 0
anim = 442
sprpriority = 2

[state 0, helper]
type = helper
trigger1 = animelem = 1
helpertype = normal
name = "stand"
stateno = 443
id = 241
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 1
size.yscale = 1

[State 230, 3]
type = changestate
triggerall = command = "holdup"
trigger1 =Time >= 18
value = 40

[State 410, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------
;本体屈強スタンド
[Statedef 443]
type = S
movetype = A
physics = N
ctrl = 0
anim = 443
sprpriority = 2

[State 240, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 13
value = 0, 2

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 15,-10

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 210, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, NA
sprpriority = 2
animtype  = up
damage    = 58
guardflag = L
pausetime = 5,13
sparkno = s830
sparkxy = -10,-40
hitsound = s1, 2
guardsound = s1,5
ground.type = High
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -1,-8
guard.velocity = -6
air.velocity = -1,-8
airguard.velocity = -6
fall = 1
fall.recover = 1

[State 0, ts]
type = TargetState
trigger1 = movehit
trigger1 = !Target,NumPartner
trigger1 = Target,life = 0
trigger1 = roundno > 1
value = 186

[State 0, end]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,stateno != 442
;---------------------------------------------------------------------------
;しば
[Statedef 450]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 80
ctrl = 0
velset = 0,0
anim = 450
sprpriority = 2

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 100, 22
channel = 0

[state 0, helper]
type = helper
trigger1 = animelem = 1
helpertype = normal
name = "stand"
stateno = 451
id = 241
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 0.9
size.yscale = 1.07

[State 240, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;しばスタンド
[Statedef 451]
type = S
movetype = A
physics = N
ctrl = 0
anim = 451
sprpriority = 3

[State 240, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 5
value = 0, 2

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 20,-15

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 210, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, NA
sprpriority = 3
animtype  = Medium
damage    = 70
guardflag = MA
pausetime = 0,13
sparkno = s830
sparkxy = -10,-60
hitsound = s100, 16
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 13
ground.velocity = -5.5,-1
air.velocity = -2.5,4
fall = 1
fall.recover = 0
hitonce = 1
numhits = 1

[State 0, ts]
type = TargetState
trigger1 = movehit
trigger1 = !Target,NumPartner
trigger1 = Target,life = 0
trigger1 = roundno > 1
value = 186

[State 0, end]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,stateno != 450 
;---------------------------------------------------------------------------
;しば2
[Statedef 452]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 80
ctrl = 0
velset = 0,0
anim = 452
sprpriority = 2

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 100, 22
channel = 0

[state 0, helper]
type = helper
trigger1 = animelem = 1
helpertype = normal
name = "stand"
stateno = 453
id = 241
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 0.9
size.yscale = 1.07

[State 240, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;しばスタンド
[Statedef 453]
type = S
movetype = A
physics = N
ctrl = 0
anim = 453
sprpriority = 3

[State 240, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 5
value = 0, 2

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 20,-15

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 210, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, NA
sprpriority = 3
animtype  = Medium
damage    = 73
guardflag = MA
pausetime = 0,13
sparkno = s830
sparkxy = -10,-60
hitsound = s100, 16
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 13
ground.velocity = -6.5,-1
air.velocity = -2.5,4
fall = 1
fall.recover = 0
hitonce = 1
numhits = 1

[State 0, ts]
type = TargetState
trigger1 = movehit
trigger1 = !Target,NumPartner
trigger1 = Target,life = 0
trigger1 = roundno > 1
value = 186

[State 0, end]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,stateno != 452 
;---------------------------------------------------------------------------
;しば３
[Statedef 454]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 80
ctrl = 0
velset = 0,0
anim = 454
sprpriority = 2

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 100, 22
channel = 0

[state 0, helper]
type = helper
trigger1 = animelem = 1
helpertype = normal
name = "stand"
stateno = 455
id = 241
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 0.9
size.yscale = 1.07

[State 240, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;本体立ち強スタンド
[Statedef 455]
type = S
movetype = A
physics = N
ctrl = 0
anim = 455
sprpriority = 3

[State 240, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 5
value = 0, 2

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 20,-15

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 210, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, NA
sprpriority = 3
animtype  = Medium
damage    = 78
guardflag = MA
pausetime = 0,13
sparkno = s830
sparkxy = -10,-60
hitsound = s100, 16
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 13
ground.velocity = -7,-3
air.velocity = -2.5,4
fall = 1
fall.recover = 0
hitonce = 1
numhits = 1

[State 0, ts]
type = TargetState
trigger1 = movehit
trigger1 = !Target,NumPartner
trigger1 = Target,life = 0
trigger1 = roundno > 1
value = 186

[State 0, end]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,stateno != 454 
;===========================================================================
;---------------------------------------------------------------------------
; ジャンプ通常攻撃にChangeStateのコントローラが無いのは、
; Physicsを「A」にしているから。
; おまけフォルダの「小ネタ.txt」を参照。（Physicsの仕組み）
;
; しゃがみ通常技とは逆に、ジャンプ通常技は基本的に「中段属性」の攻撃。
; しゃがみガードが出来ないのが普通なので、guardflagを「HA」にしておくのが定石。
;「立ちガードの需要性」と「空対地のガードの揺さぶりによる駆け引き」を
; プレイヤーに楽しんでもらうための先人達の知恵だね。
;---------------------------------------------------------------------------
;ジャンプ弱パンチ
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 11
ctrl = 0
anim = 600
sprpriority = 2

[State 1000, 2]
type = VarAdd
trigger1 = Time = 0
v = 33
value = 1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 600, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 4
value = 0, 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 3
movetype = I

[State 600, ヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA ;空中通常打撃（Air, Normal Attack）
hitflag = MAF
guardflag = HA
animtype = Light
damage    = 20
priority = 3
pausetime = 11,11
sparkno = S810
guard.sparkno = S840
sparkxy = -10,-54
hitsound = S1,0
guardsound = S1,5
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = -1.3,-3
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.fall = 0
fall.recover = 1
getpower = 40
givepower = 20

[State 4030, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52
;---------------------------------------------------------------------------
;ジャンプ中パンチ
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 11
ctrl = 0
anim = 610
sprpriority = 2

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 600, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 5
value = 0, 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 3
movetype = I

[State 600, ヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA ;空中通常打撃（Air, Normal Attack）
hitflag = MAF
guardflag = HA
animtype = Light
damage    = 32
priority = 3
pausetime = 13,13
sparkno = S820
guard.sparkno = S840
sparkxy = -10,-54
hitsound = S1,1
guardsound = S1,5
ground.type = High
air.type = High
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -6
guard.velocity = -5.5
air.velocity = -1.3,-3
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.fall = 0
fall.recover = 1
getpower = 40
givepower = 20

[State 4030, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52
;---------------------------------------------------------------------------
;ジャンプ弱キック
[Statedef 630]
type    = A
movetype= A
physics = A
juggle  = 3
poweradd= 20
ctrl = 0
anim = 630
sprpriority = 2

[State 630, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 630, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 26
guardflag = HA
priority = 3
pausetime = 8,8
sparkno = 1
sparkxy = -5,-35
hitsound   = 5,0
guardsound = 6,0
ground.type = High
ground.slidetime = 6
ground.hittime  = 6
ground.velocity = -4
air.velocity = -2,-3

[State 4030, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52
;---------------------------------------------------------------------------
;ジャンプ強
[Statedef 640]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 65
ctrl = 0
anim = 640
sprpriority = 2

[State 210, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, NA
sprpriority = 3
animtype  = Medium
damage    = 64
guardflag = HA
pausetime = 14,10
sparkno = s830
sparkxy = -10,-40
hitsound = s100, 16
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 18
ground.velocity = -9
air.velocity = -3.5,-4
air.fall = 1
fall.recovertime= 30
numhits = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 100, 22
channel = 0

[state 0, helper]
type = helper
trigger1 = animelem = 1
helpertype = normal
name = "stand"
stateno = 641
id = 241
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 1
size.yscale = 1
;---------------------------------------------------------------------------
;本体空中強スタンド
[Statedef 641]
type = S
movetype = A
physics = N
ctrl = 0
anim = 641
sprpriority = 3

[State 240, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 9
value = 0, 2

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 10,-20

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, ts]
type = TargetState
trigger1 = movehit
trigger1 = !Target,NumPartner
trigger1 = Target,life = 0
trigger1 = roundno > 1
value = 186

[State 0, end]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,stateno != 640 
;---------------------------------------------------------------------------
;回り込み
[Statedef 799]
type = S
physics = N
movetype = I
anim = 799
ctrl = 0
velset = 0,0
sprpriority = -1

[State 810, Throw Sound]
type = playsnd
trigger1 = animelem = 1
value = 100,0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 810, 1]
type = helper
trigger1 = animelem = 3
ID = 805
stateno = 805
pos = 0,0

[State 810, Velocity]
type = VelSet
trigger1 = animelem = 3
x = 8

[State 810, Velocity]
type = VelMul
trigger1 = AnimElemTime(3) > 0
x = .95

[State 810, Velocity]
type = VelSet
trigger1 = animelem = 11
x = 0

[State 810, HitBy]
type = HitBy
trigger1 = time = 0
value = SCA, NT,ST,HT
time = 40

[State 810, Push]
type = PlayerPush
trigger1 = 1
value = 0

[State 901,1]
type = SprPriority
trigger1 = AnimTime = 0
value = 0

[State 8500, 1]
type = varset
trigger1 = AnimTime = 0
var(40) = 8

[State 810, StateChange]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;回り込み（残像）
[Statedef 805]
type = S
physics = N
movetype = I
anim = 799
ctrl = 0
velset = 0,0
sprpriority = -2

[State 820, Anim]
type = ChangeAnim
trigger1 = Time = 0
value = 799
elem = 3

[State 810, Velocity]
type = VelSet
trigger1 = animelem = 4
x = 8

[State 810, Velocity]
type = VelMul
trigger1 = AnimElemTime(4) > 0
x = .95

[State 810, Velocity]
type = VelSet
trigger1 = animelem = 11
x = 0

[State 810, HitBy]
type = HitBy
trigger1 = 1
value = SCA

[State 810, Push]
type = PlayerPush
trigger1 = 1
value = 0

[State 100, 2]
type = AssertSpecial
trigger1 = time%2=0
flag = invisible

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 810, StateChange]
type = DestroySelf
trigger1 = root,stateno != 799
;===========================================================================
;擬似プッツンキャンセル
[Statedef 700]
type = S
physics = N
movetype = I
anim = 700+var(49)
ctrl = 0
velset = 0,0
sprpriority = 1

[State 0, explod]
type = explod
trigger1 = time = 0
anim = 710
id = 7100
pos = ceil(-30*const(size.xscale)),ceil(-92*const(size.yscale))
postype = p1
scale = .3,.5
sprpriority = 2
pausemovetime = 999999
supermovetime = 999999

;プッツーン
[State 0, helper]
type = helper
trigger1 = !time
stateno = 720
id = 720
facing = ifelse(facing=1,1,-1)
postype = p1
pos = -5,-70
sprpriority = 3
ownpal = 1
size.xscale = .5
size.yscale = .5
pausemovetime = 999999
supermovetime = 999999

[State 0, 1]
type = Offset
triggerall = var(49) = 10000  
trigger1 = 1
y = 10

[State 0, super]
type = superpause
trigger1 = time = 1
time = 29
movetime = 29
anim = -1
sound = -1
darken = 0
p2defmul = 1
poweradd = -1000
ignorehitpause = 1
persistent = 0

[State 3000,03]
type = BGPalfx
trigger1 = time = 1
mul = 128,128,128
time = 29
ignorehitpause = 1
persistent = 0

[State 0, snd]
type = playsnd
trigger1 = time = 1
value = 6,9
ignorehitpause = 1
persistent = 0

[State 0, end]
type = changestate
trigger1 = time = 30
value = 0
ctrl = 1
ignorehitpause = 1
persistent = 0
;---------------------------------------------------------------------------
;プッツーン
[Statedef 720]
type    = S
physics = N
anim = 720
ctrl = 0
sprpriority = 3
velset = 0,0

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 0, scale]
type = angledraw
trigger1 = time < 10
scale = .2+time*.08,.2+time*.08

[State 0, scale]
type = angledraw
trigger1 = time >= 10
scale = .85+time*.01,.85+time*.01

[State 820, 消去]
type = destroyself
trigger1 = time >= 30
trigger2 = root,stateno != 700
;===========================================================================
; 投げ技
;===========================================================================
;---------------------------------------------------------------------------
; エレクバイトが「作るのが退屈と感じる時もあるよ」って言ってるけど、
; 作り出したら意外とハマって楽しくなる投げ技。
; 投げる相手の正確な座標取りは面倒臭いけどね（コラ
; 投げ用のHitDefはテンプレートと見比べて確認すればわかるはず。
;---------------------------------------------------------------------------
;掴み
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2

[State 900, 1]
type = HitDef
triggerall = P2movetype != H
triggerall = P2bodydist X = [-const(size.ground.front),22]
trigger1 = AnimElem = 1
attr = S, NT
hitflag = M-
priority = 3, Miss    
sparkno = -1
p1facing = 1
p1stateno = 810
p2facing = 1
p2stateno = 820
guard.dist = 0
getpower = 0,0
givepower = 0,0
air.fall = 1
fall = 1
fall.recover = 0
hitonce = 1
numhits = 0

[State 800, ステート変更]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;成功（放り投げる）
[Statedef 810]
type    = S
movetype= A
physics = N
anim = 801
poweradd = 60
sprpriority = 2

[State 0, end]
type = changestate
trigger1 = time = [1,4]
trigger1 = target,command = "holdfwd" || target,command = "holdback"
trigger1 = target,command = "y" || target,command = "z" || target,command = "b" || target,command = "c"
value = 930

[State 10820, ]
type = Explod
trigger1 = Time = 30
facing = 1                 ;キャラと同じ向きに表示（デフォ
postype = p2
pos = 0,-80
anim = 911
sprpriority = 5
ownpal = 1

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 30
value = 300,1

[State 3001, Width]
type = Width
trigger1 = time = 0
edge = 100,0

[State 901,1]
type = targetBind
trigger1 = !var(49) && time = 0
pos = 80, 0
postype = P1
time = 1

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = time = 30
value = -55

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 0
value = 1,9

[State 1000, Spark]
type = helper
trigger1 = time = 0
stateno = 811
id = 1001
pos = 20, 0
sprpriority = 4
facing = ifelse(facing=1,1,-1)
postype = P1
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 0

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 810, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 810, ステート変更]
type = ChangeState
triggerall = power >= 1000
trigger1 = time >= 15
trigger1 = time <= 20
trigger1 = command = "z"
value = 812
ctrl = 0
;---------------------------------------------------------------------------
;成功（helper）
[Statedef 811]
type    = S
movetype= A
physics = N
anim = 802
poweradd = 0

[State 1065, 3]
type = bindtoparent
trigger1 = 1
pos = 20,0
time = 1
ignorehitpause = 1

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = facing != parent,facing

[State 230, 2]
type = changestate
trigger1 = animtime = 0
trigger2 = root,stateno = 930
value = 1002
;---------------------------------------------------------------------------
;投げぬけ 自分（y.y氏製作）
[Statedef 930]
type = A
movetype = I
physics = A
anim = 5210
velset = -3,-5

[State 0, target]
type = Sprpriority
trigger1 = var(49)=10000
value = 1

[State 0, target]
type = targetbind
trigger1 = !time
pos = 50,0

[State 0, target]
type = targetstate
trigger1 = !time
value = 940

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA
;---------------------------------------------------------------------------
;投げ抜け　相手
[Statedef 940]
type = A
movetype = I
physics = N
velset = -3,-6

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, anim]
type = changeanim
trigger1 = !time
value = 5210

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = veladd
trigger1 = 1
y = .45

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 52
ctrl = 1
;---------------------------------------------------------------------------
;投げスパコン
[Statedef 812]
type    = S
movetype= A
physics = N
anim = 804
poweradd = 0
sprpriority = 2

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 100, 18
channel = 0

[State 0, ]
type = PlaySnd
trigger1 = animelem = 1
value = 4, 0

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = time = 1
value = -1000

[state 3000]
type = pause
trigger1 = animelem = 1
time = 40
movetime = 40

[state 3003]
type = helper
trigger1 = animelem = 1
name = "cutin"
helpertype = normal
stateno = 23100
id = 3100
pos = 0,0
postype = back
ownpal = 1
keyctrl = 0
sprpriority = -3
supermovetime = 9999999
pausemovetime = 9999999

[state 3003]
type = helper
trigger1 = animelem = 1
name = "haikei"
helpertype = normal
stateno = 23101
id = 3101
pos = 0,0
postype = left
ownpal = 1
keyctrl = 0
sprpriority = -5
supermovetime = 9999999
pausemovetime = 9999999

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = time = 42
value = -185

[State 10820, ]
type = Explod
trigger1 = Time = 42
facing = 1                 ;キャラと同じ向きに表示（デフォ
postype = p2
pos = 0,-80
anim = 911
sprpriority = 5
ownpal = 1
scale = 1.5, 1.5

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 42
value = 300,1

[State 810, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; こっちは制御を奪った相手の食らいステート。
; 相手の制御を解く場合、「ChangeState」のコントローラにしてしまうと
;「相手が制御を奪われた状態のままになるバグ」が発生してしまう。
; なので必ず『SelfState』で相手のステートに戻し、制御を解除しないといけない。
; そこさえ注意しておけば、自由に相手の食らいモーションを設定出来る。
;
; デバッグ表示中に相手の情報の一部の文字が黄色になったら、それが
; P2StateNoやTargetStateで制御を奪われた状態の証。
; 投げが成功したらCtrl+Dで相手側の情報を確認だ！m9っ｀Д´)
;---------------------------------------------------------------------------
;相手側
[Statedef 820]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 0

[State 2500, ScreenBound]
type = screenbound
trigger1 = 1
value = 1
movecamera = 30,10

[State 1060, 2]
type = changeanim2
trigger1 = time = 0
value = 803

[State 1061, 2]
type = PalFX
trigger1 = Time = 32
time = 40
add = 128,24,0
mul = 90,64,64
sinadd = 90,90,90,4
color = 150

[State 1061, 2]
type = Velset
trigger1 = time = 32
y = -4
x = -4.5

[State 1061, 2]
type = Velset
trigger1 = time = 34
y = -3.675
x = -4.5

[State 1061, 2]
type = Velset
trigger1 = time = 36
y = -3.35
x = -4.5

[State 1061, 2]
type = Velset
trigger1 = time = 38
y = -3
x = -4.5

[State 1061, 2]
type = Velset
trigger1 = time = 40
y = -1.5
x = -4.5

[State 1061, 2]
type = Velset
trigger1 = time = 42
y = -0.75
x = -4.5

[State 1061, 2]
type = Velset
trigger1 = time = 44
y = -0.375
x = -4.5

[State 1061, 2]
type = Velset
trigger1 = time = 46
y = 0
x = -4.25

[State 1061, 2]
type = Velset
trigger1 = time = 48
y = 0.25
x = -4

[State 1061, 2]
type = Velset
trigger1 = time = 50
y = 0.5
x = -3.75

[State 1061, 2]
type = Velset
trigger1 = time = 52
y = 1
x = -3.5

[State 1061, 2]
type = Velset
trigger1 = time = 53
y = 2
x = -3.25

[State 1061, 2]
type = Velset
trigger1 = time = 54
y = 4
x = -3

[State 1061, 2]
type = Velset
trigger1 = time = 55
y = 6
x = -2.75

[State 1061, 2]
type = Velset
trigger1 = time = 55
y = 8
x = -2.5

[State 1061, 2]
type = Velset
trigger1 = time = 56
y = 9
x = -2.25

[State 1061, 2]
type = Velset
trigger1 = time > 57
y = 10
x = -2

[State 1061, 2]
type = Velset
trigger1 = time > 55
trigger1 = Pos Y >= 0
y = 0
x = 0

[state 3000]
type = nothitby
trigger1 = 1
value = SCA

[State 820, 4]
type = SelfState;キャラのコントロールを相手に返します。
trigger1 = time > 35
trigger1 = Pos Y >= 0
value = 5110
;---------------------------------------------------------------------------
; ※３：GetHitVar
;
; 　食らってしまった『相手の攻撃の効果』を
; 　自分側が「特殊な変数」に変換して判断するトリガー。
;　「GetHitVar(**)」の『**』に該当する、予め決められているパラメータを全て紹介。
;
; 　大概「相手のHitDefとProjectileのパラメータ」から引き出すので、かなり多い（苦笑
;
;
; 　XVelAdd             = 自分が負けて吹っ飛んだ時の「Ｘ軸方向の加速度(float)」を計測する
; 　YVelAdd             = 自分が負けて吹っ飛んだ時の「Ｙ軸方向の加速度(float)」を計測する
; 　Type                = 自分の「食らいアニメの種類」。（0=None・1=High・2=Low・3=Trip）
; 　AnimType            = 相手のHitDefに設定されている「animtype」を判断する
;                        （0=Light・1=Medium・2=Hard・3=Back・4=Up・5=DiagUp）
; 　GroundType          = 相手のHitDefに設定されている「ground.type」を判断する
; 　AirType             = 相手のHitDefに設定されている「air.type」を判断する
;
; 　Damage              = 相手から食らってしまった「ダメージ量」を計測する
; 　HitCount            = 相手の「現在のヒット数」を計測する
; 　FallCount           = 自分が「地面に激突した回数」を判断する
; 　HitShakeTime        = 自分の「ヒット硬直時間」を計測する
; 　HitTime             = 自分の「食らい時間」を計測する
; 　SlideTime           = 相手のHitDefに設定されている「slidetime」を判断する
; 　CtrlTime            = 相手のHitDefに設定されている「(air)guard.ctrltime」を判断する
; 　RecoverTime         = 横に倒れている時の「起き上がるまでの時間」を判断する
;
; 　XOff                = 相手のHitDefに設定されている「"snap"のＸ軸」を判断する（非推奨）
; 　YOff                = 相手のHitDefに設定されている「"snap"のＹ軸」を判断する（非推奨）
; 　ZOff                = 相手のHitDefに設定されている「"snap"のＺ軸」を判断する？（存在しないので無意味）
;
; 　XVel                = 相手のHitDefに設定されている「Ｘ軸の食らい状態の移動速度」を判断する
; 　YVel                = 相手のHitDefに設定されている「Ｙ軸の食らい状態の移動速度」を判断する
; 　YAccel              = 相手のHitDefに設定されている「yaccel」を判断する
; 　chainID             = 相手のHitDefに設定されている「chainID」を判断する
; 　Guarded             =「相手のコンボでの最後の攻撃をガードした場合」を判断する
; 　IsBound             =「TargetBindで掴まれてる状態」を判断する
;
; 　Fall                = 相手のHitDefに設定されている「fall」を判断する
; 　Fall.Damage         = 相手のHitDefに設定されている「fall.damage」を判断する
; 　Fall.XVel           = 相手のHitDefに設定されている「fall.xvelocity」を判断する
; 　Fall.YVel           = 相手のHitDefに設定されている「fall.yvelocity」を判断する
; 　Fall.Recover        = 相手のHitDefに設定されている「fall.recover」を判断する
; 　Fall.RecoverTime    = 相手のHitDefに設定されている「fall.recovertime」を判断する
; 　Fall.Kill           = 相手のHitDefに設定されている「fall.kill」を判断する
; 　Fall.EnvShake.Time  = 相手のHitDefに設定されている「fall.envshake.time」を判断する
; 　Fall.EnvShake.Freq  = 相手のHitDefに設定されている「fall.envshake.freq」を判断する
; 　Fall.EnvShake.Ampl  = 相手のHitDefに設定されている「fall.envshake.ampl」を判断する
; 　Fall.EnvShake.Phase = 相手のHitDefに設定されている「fall.envshake.phase」を判断する
;
;---------------------------------------------------------------------------
;カンフースルー：相手側２（放り投げられた）
[Statedef 821]
type    = A
movetype= H
physics = N
velset = 2.8,-7
poweradd = 40

[State 821, 速度加算];重力
type = VelAdd
trigger1 = 1
y = .4 ;現在のＹ軸方向の移動速度を「0.4ポイント」ずつ増やしていく

[State 821, ステート変更]
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive      ;生きている時
triggerall = CanRecover ;空中受け身が可能な時
trigger1 = Command = "recovery"
value = 5200

[State 821, 相手ステートに戻す]
type = SelfState
triggerall = Vel Y > 0
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210

[State 821, 相手ステートに戻す]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;===========================================================================
; 必殺技
;===========================================================================
;---------------------------------------------------------------------------
; カンフーマンを代表する必殺技『カンフー突き手』。
; 最初に公開されたM.U.G.E.N（1999/1/1当時のMS-DOS版）では
; この技と超必殺技の『三烈カンフー突き手』しか持ってなかった。
;
;「P2BodyDist」は「自分から相手までの距離」を測るトリガー。
; Bodyの記述が無い「P2Dist」の場合は、
;「自分の軸位置から相手の軸位置との距離」を測る。
;---------------------------------------------------------------------------
;キラークイーン（弱）
[Statedef 1000]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 110
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 100, 18
channel = 0

[State 1000, 7]
type = Helper
triggerall = var(49) = 0
trigger1 = Time = 0
trigger1 = numhelper(1001) = 0
helpertype = normal
name = "killer queen"
stateno = 1001
id = 1001
pos = 0, 5
postype = p1
ownpal = 1
facing = 1
size.xscale = .9
size.yscale = 1.07

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; キラークイーン(スタンド)
[Statedef 1001]
type    = S
movetype= A
physics = S
juggle  = 0;4
poweradd= 0
ctrl = 0
velset = 7*parent,const(size.xscale)+parent,fvar(0),0
anim = 1001
sprpriority = 0
facep2 = 1

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = time = 0
trigger1 = facing != parent,facing

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 1020
time = 0
ignorehitpause = 1

[State 1010, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 2
x = 20

[State 1010, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 13
x = 10

[State 1010, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 5
x = 5

[State 1010, 移動速度]
type = VelSet
trigger1 = AnimElem = 5
x = 4

[State 200, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA
damage = 5, 0
animtype = Light
guardflag = M
hitflag = MAF
priority = 2, Hit
pausetime = 0, 11
sparkno = s810
guard.sparkno = s840
sparkxy = -10, -76
hitsound = s1, 0
guardsound = s1,5
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -8*const(size.xscale)
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12

[State 1000, 7]
type = Helper
trigger1 = MoveContact
trigger1 = numhelper(1003) = 0
helpertype = normal
name = "bom"
stateno = 1003
id = 1003
pos = 0, -50
postype = p2
ownpal = 1
facing = 1
bindtime = 999999
size.xscale = 1
size.yscale = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 5
value = 0, 1
channel = 0

[State -2,***]
type = sprpriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 1
ignorehitpause = 1

[State 230, 2]
type = screenbound
trigger1 = 1
value = 1

[State 230, 2]
type = nothitby
trigger1 = time >= 100
value = SCA
time = -1

[State 0, ts]
type = TargetState
trigger1 = movehit
trigger1 = !Target,NumPartner
trigger1 = Target,life = 0
trigger1 = roundno > 1
value = 186

[State 230, 2];プッツン時スタンド消去
type = destroyself
trigger1 = root,stateno = 700
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = animtime = 0
value = 1002
;---------------------------------------------------------------------------
; 終了（弱）(スタンド)
[Statedef 1002]
type    = S
movetype= I
physics = S
juggle  = 0;4
poweradd= 0
ctrl = 0
velset = 0,0
anim = 1002
sprpriority = 0

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = invisible

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 1002
id = 1002
pos = 0,0
postype = p1
sprpriority = 0
bindtime = -1
removeongethit = 1
scale = const(size.xscale),const(size.yscale)
pausemovetime = parent,var(14) * 9999999999999

[State 1000, 3]
type = ModifyExplod
trigger1 = time >= 2
ID = 1002
scale = 1-time/11.5 , 1+time/11.5
pausemovetime = parent,var(14) * 9999999999999

[State 191, 3]
type = PlaySnd
trigger1 = animtime = 0
value = 100,1

[State 230, 2]
type = destroyself
trigger1 = animtime = 0
;---------------------------------------------------------------------------
; 爆弾
[Statedef 1003]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0
anim = 36400
sprpriority = 4
facep2 = 1

[State 181, ]
type = AttackDist
trigger1 = 1
value = 0

[State 301,ヘルパー]
type = Helper
trigger1 = root,statetype != A
trigger1 = root,command = "a"
trigger1 = root,ctrl = 1
triggerall = numhelper(1004) = 0
helpertype = normal
name = "bom"
stateno = 1004
id = 1003
pos = 0, -70
postype = p2
ownpal = 1
facing = 1
size.xscale = 1
size.yscale = 1

[State 230, 2]
type = destroyself
trigger1 = root,statetype != A
triggerall = root,ctrl = 1
trigger1 = root,command = "a"

[State 230, 2]
type = destroyself
trigger1 = root,stateno != [120,153]
trigger1 = root,movetype = H
;---------------------------------------------------------------------------
; 爆発
[Statedef 1004]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0
anim = 910
sprpriority = 4
facep2 = 1

[State 600, 2　ヒット定義]
type = HitDef
trigger1 = time = 0
attr = A, NA
damage    = 60
animtype  = hard
hitflag = MAFD
guardflag = MA
priority = 2, Hit
pausetime = 0,9
sparkno = s36400
guard.sparkno = s36400
sparkxy = -10,-77
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 11
ground.hittime  = 11-ifelse(var(14)=0&&fvar(30)>=9&&ifelse(fvar(30)=9,random%5=0,random%10=0),11,0)
ground.velocity = 3,-6
air.velocity = -3,-6
p2facing = 1
getpower = 10 * (var(14) = 0),0
givepower = 10,0
ground.cornerpush.veloff = 0
air.hittime = 15
guard.dist = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
fall = 1
fall.recovertime = 15

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 100, 2
channel = 0

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 0
value = 300,0

[State 0, ts]
type = TargetState
trigger1 = movehit
trigger1 = !Target,NumPartner
trigger1 = Target,life = 0
trigger1 = roundno > 1
value = 186

[State 230, 2]
type = destroyself
trigger1 = animtime = 0
;---------------------------------------------------------------------------
; ポーズ
[Statedef 1005]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 110
velset = 0,0
anim = 1005
ctrl = 0
sprpriority = 2

[State 1010, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;キラークイーン（中）
[Statedef 1006]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 110
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 100, 18
channel = 0

[State 1000, 7]
type = Helper
triggerall = var(49) = 0
trigger1 = Time = 0
trigger1 = numhelper(1001) = 0
helpertype = normal
name = "killer queen"
stateno = 1007
id = 1001
pos = 0, 5
postype = p1
ownpal = 1
facing = 1
size.xscale = .9
size.yscale = 1.07

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; キラークイーン(スタンド)
[Statedef 1007]
type    = S
movetype= A
physics = S
juggle  = 0;4
poweradd= 0
ctrl = 0
velset = 9*parent,const(size.xscale)+parent,fvar(0),0
anim = 1001
sprpriority = 0
facep2 = 1

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = time = 0
trigger1 = facing != parent,facing

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 1020
time = 0
ignorehitpause = 1

[State 1010, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 2
x = 25

[State 1010, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 13
x = 13

[State 1010, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 5
x = 7

[State 1010, 移動速度]
type = VelSet
trigger1 = AnimElem = 5
x = 6

[State 200, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA
damage = 5, 0
animtype = Light
guardflag = M
hitflag = MAF
priority = 2, Hit
pausetime = 0, 11
sparkno = s810
guard.sparkno = s840
sparkxy = -10, -76
hitsound = s1, 0
guardsound = s1,5
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -8*const(size.xscale)
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12

[State 1000, 7]
type = Helper
trigger1 = MoveContact
trigger1 = numhelper(1003) = 0
helpertype = normal
name = "bom"
stateno = 1003
id = 1003
pos = 0, -50
postype = p2
ownpal = 1
facing = 1
bindtime = 999999
size.xscale = 1
size.yscale = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 5
value = 0, 1
channel = 0

[State -2,***]
type = sprpriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 1
ignorehitpause = 1

[State 230, 2]
type = screenbound
trigger1 = 1
value = 1

[State 230, 2]
type = nothitby
trigger1 = time >= 100
value = SCA
time = -1

[State 0, ts]
type = TargetState
trigger1 = movehit
trigger1 = !Target,NumPartner
trigger1 = Target,life = 0
trigger1 = roundno > 1
value = 186

[State 230, 2];プッツン時スタンド消去
type = destroyself
trigger1 = root,stateno = 700
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = animtime = 0
value = 1002
;---------------------------------------------------------------------------
;キラークイーン（強）
[Statedef 1008]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 110
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 100, 18
channel = 0

[State 1000, 7]
type = Helper
triggerall = var(49) = 0
trigger1 = Time = 0
trigger1 = numhelper(1001) = 0
helpertype = normal
name = "killer queen"
stateno = 1009
id = 1001
pos = 0, 5
postype = p1
ownpal = 1
facing = 1
size.xscale = .9
size.yscale = 1.07

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; キラークイーン(スタンド)
[Statedef 1009]
type    = S
movetype= A
physics = S
juggle  = 10
poweradd= 0
ctrl = 0
velset = 7*parent,const(size.xscale)+parent,fvar(0),0
anim = 1001
sprpriority = 0
facep2 = 1

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = time = 0
trigger1 = facing != parent,facing

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 1020
time = 0
ignorehitpause = 1

[State 1010, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 2
x = 25

[State 1010, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 13
x = 13

[State 1010, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 5
x = 7

[State 1010, 移動速度]
type = VelSet
trigger1 = AnimElem = 5
x = 6

[State 200, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA
damage = 5, 0
animtype = Light
guardflag = M
hitflag = MAF
priority = 2, Hit
pausetime = 0, 11
sparkno = s810
guard.sparkno = s840
sparkxy = -10, -76
hitsound = s1, 0
guardsound = s1,5
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -8*const(size.xscale)
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12

[State 1000, 7]
type = Helper
trigger1 = Movehit
trigger1 = numhelper(1003) = 0
helpertype = normal
name = "bom"
stateno = 1010
id = 1003
pos = 0, -50
postype = p2
ownpal = 1
facing = 1
bindtime = 999999
size.xscale = 1
size.yscale = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 5
value = 0, 1
channel = 0

[State -2,***]
type = sprpriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 1
ignorehitpause = 1

[State 230, 2]
type = screenbound
trigger1 = 1
value = 1

[State 230, 2]
type = nothitby
trigger1 = time >= 100
value = SCA
time = -1

[State 0, ts]
type = TargetState
trigger1 = movehit
trigger1 = !Target,NumPartner
trigger1 = Target,life = 0
trigger1 = roundno > 1
value = 186

[State 230, 2];プッツン時スタンド消去
type = destroyself
trigger1 = root,stateno = 700
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = animtime = 0
value = 1002
;---------------------------------------------------------------------------
; 爆弾
[Statedef 1010]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0
anim = 36400
sprpriority = 4
facep2 = 1

[State 301,ヘルパー]
type = Helper
trigger1 = time = 20
triggerall = numhelper(1004) = 0
helpertype = normal
name = "bom"
stateno = 1011
id = 1003
pos = 0, -70
postype = p2
ownpal = 1
facing = 1
size.xscale = 1
size.yscale = 1

[State 230, 2]
type = destroyself
trigger1 = time = 51
;---------------------------------------------------------------------------
; 爆発
[Statedef 1011]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0
anim = 911
sprpriority = 4
facep2 = 1

[State 600, 2　ヒット定義]
type = HitDef
trigger1 = time = 0
attr = A, NA
damage    = 60
animtype  = hard
guardflag = 
priority = 2, Hit
pausetime = 0,0
sparkno = s36400
guard.sparkno = s36400
sparkxy = -10,-77
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 11
ground.hittime  = 11
ground.velocity = 3,-6
air.velocity = -3,-6
getpower = 10 * (var(14) = 0),0
givepower = 10,0
ground.cornerpush.veloff = 0
air.hittime = 15
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
guard.dist = 0
air.fall = 1
fall.recovertime = 15
fall = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 100, 2
channel = 0

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 0
value = 300,1

[State 0, ts]
type = TargetState
trigger1 = movehit
trigger1 = !Target,NumPartner
trigger1 = Target,life = 0
trigger1 = roundno > 1
value = 186

[State 230, 2]
type = destroyself
trigger1 = animtime = 0
;---------------------------------------------------------------------------
; 食らい(スタンド)
[Statedef 1020]
type    = U
movetype= H
physics = N
ctrl = 0
velset = 0,0
anim = 1020
sprpriority = 0

[State 230, 2]
type = statetypeset
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 16500]
type = ParentVarSet
trigger1 = time = 0
v = 11
value = GetHitVar(damage)

[State 210, 音を鳴らす]
type = PlaySnd
trigger1 = time = 20
value = 100, 1

[State 0, scale]
type = angledraw
trigger1 = time > 20
scale = (const(size.xscale)-(.08*(time-20))),(const(size.yscale)+(.06*(time-20)))

[State 16500]
type = DestroySelf
trigger1 = time = 32
;-------------------------------------------------------------------
;ｽﾀﾝﾄﾞ被ダメでｽﾀﾝﾄﾞ消滅のとき、本体もダメージ受ける
[Statedef 16502];立ち
type    = S
movetype= H
physics = S
velset = -2,0
anim = 5000

[State 0]
type = LifeAdd
trigger1 = time = 0
value = -var(11)
absolute = 1 ;指定した値が増減されます。省略時0で、相手の防御力が考慮される

[State 0];リセット
type = VarSet
trigger1 = time = 0
var(11) = 0

[State 0, なにぃっ]
type = PlaySnd
trigger1 = time = 0
value = 5,1
channel = 0

[State -2]
type = ChangeState
trigger1 = time= 20
value = 0
ctrl = 1

[State -2]
type = ChangeState
trigger1 = !alive
value = 5050
ctrl = 0
;-------------------------------
[Statedef 16503];しゃがみ
type    = C
movetype= H
physics = S
velset = -2,0
anim = 5020

[State 0]
type = LifeAdd
trigger1 = time = 0
value = -var(11)
absolute = 1

[State 0];リセット
type = VarSet
trigger1 = time = 0
var(11) = 0

[State 0, なにぃっ]
type = PlaySnd
trigger1 = time = 0
value = 5,1
channel = 0

[State -2]
type = ChangeState
trigger1 = time= 20
value = 11
ctrl = 1

[State -2]
type = ChangeState
trigger1 = !alive
value = 5050
ctrl = 0
;-------------------------------
[Statedef 16504];空中
type    = A
movetype= H
physics = A
velset = -2,0
anim = 5050

[state 3000]
type = nothitby
trigger1 = 1
value = SCA

[State 0]
type = LifeAdd
trigger1 = time = 0
value = -var(11)
absolute = 1

[State 0];リセット
type = VarSet
trigger1 = time = 0
var(11) = 0

[State 0, なにぃっ]
type = PlaySnd
trigger1 = time = 0
value = 5,1
channel = 0

[State -2]
type = ChangeState
trigger1 = Vel Y > 0    ;下方に移動している場合、正の値
trigger1 = Pos Y >= -10 ;地面を0、下方向を正、上方向を負
value = 5100;地面に激突

[State -2]
type = ChangeState
trigger1 = !alive
value = 5050
ctrl = 0
;===========================================================================
;---------------------------------------------------------------------------
; ２ヒットする何の変哲も無い対空必殺技。これといって難しい処理は使ってない。
; カンフーニーとの併用で画面端でのコンボも上手く行けば出来る。
; 対空技に付き物な「無敵時間」が無いので、潰されやすいのが難点。
;---------------------------------------------------------------------------
;父の涙
[Statedef 1100]
type = U;前のステートの状態を引き継ぐ
physics = N
poweradd= 110
velset = 0,0

[State -2]
type = Helper
trigger1 = time = 0
trigger1 = numhelper(1101) = 0
helpertype = normal
name = "fish"
stateno = 1101
id = 1101
pos = 40, -85
postype = p1
ownpal = 1
facing = 1
size.xscale = 1
size.yscale = 1

[State 1100, ステート変更]
type = ChangeState
trigger1 = Time = 1
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;親父
[Statedef 1101]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
anim = 9996
sprpriority = 3

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = time = 12
value = 100, 10

[State 1010, 移動速度]
type = VelSet
trigger1 = time = 12
x = 6
y = -3 

[State 1010, 移動速度]
type = VelSet
trigger1 = time = 28
x = 0
y = 0

[State 1010, 移動速度]
type = VelSet
trigger1 = time > 54
trigger1 = time < 77
x = -6
y = -3 

[State 1010, 移動速度]
type = VelSet
trigger1 = time > 78
trigger1 = time < 100
x = -6
y = -6

[State 210, 2]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = Medium
damage    = 45
priority = 3, Hit
guardflag = M
pausetime = 0,11
sparkno = s810
guard.sparkno = s840
sparkxy = -10,-10
hitsound = s100, 11
guardsound = s1,5
ground.type = low
ground.slidetime = 13
ground.hittime  = 13-ifelse(var(14)=0&&fvar(30)>=9&&ifelse(fvar(30)=9,random%5=0,random%10=0),13,0)
ground.velocity = -4*const(size.xscale)
air.velocity = -3*const(size.xscale) * (var(14) = 0),(-3+var(19)*1.3) * (var(14) = 0)
p2facing = 1
givepower = 10,0
id = 200
ground.cornerpush.veloff = 0

[State 0, ts]
type = TargetState
trigger1 = movehit
trigger1 = !Target,NumPartner
trigger1 = Target,life = 0
trigger1 = roundno > 1
value = 186

[State 0, ts]
type = ChangeState
triggerall = time <= 43
trigger1 = parent,movetype = H
trigger1 = root,stateno != [0,155];立ち～ガード以外。
value = 1130

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 1130
time = 0
ignorehitpause = 1

[State 3010, 2]
type = destroyself
trigger1 = time = 150
;---------------------------------------------------------------------------
;父の涙（強）
[Statedef 1110]
type = U;前のステートの状態を引き継ぐ
physics = N
poweradd= 110
velset = 0,0

[State -2]
type = Helper
trigger1 = time = 0
trigger1 = numhelper(1101) = 0
helpertype = normal
name = "fish"
stateno = 1111
id = 1101
pos = 40, -85
postype = p1
ownpal = 1
facing = 1
size.xscale = 1
size.yscale = 1

[State 1100, ステート変更]
type = ChangeState
trigger1 = Time = 1
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;親父
[Statedef 1111]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
anim = 9996
sprpriority = 3


[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = time = 12
value = 100, 10

[State 1010, 移動速度]
type = VelSet
trigger1 = time = 12
x = 8
y = -2 

[State 1010, 移動速度]
type = VelSet
trigger1 = time = 28
x = 0
y = 0

[State 1010, 移動速度]
type = VelSet
trigger1 = time > 54
trigger1 = time < 77
x = -6
y = -3 

[State 1010, 移動速度]
type = VelSet
trigger1 = time > 78
trigger1 = time < 100
x = -6
y = -6

[State 210, 2]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = Medium
damage    = 45
priority = 3, Hit
guardflag = M
pausetime = 0,11
sparkno = s810
guard.sparkno = s840
sparkxy = -10,-10
hitsound = s100, 11
guardsound = s1,5
ground.type = low
ground.slidetime = 13
ground.hittime  = 13-ifelse(var(14)=0&&fvar(30)>=9&&ifelse(fvar(30)=9,random%5=0,random%10=0),13,0)
ground.velocity = -4*const(size.xscale)
air.velocity = -3*const(size.xscale) * (var(14) = 0),(-3+var(19)*1.3) * (var(14) = 0)
p2facing = 1
givepower = 10,0
id = 200
ground.cornerpush.veloff = 0

[State 0, ts]
type = TargetState
trigger1 = movehit
trigger1 = !Target,NumPartner
trigger1 = Target,life = 0
trigger1 = roundno > 1
value = 186

[State 0, ts]
type = ChangeState
triggerall = time <= 43
trigger1 = parent,movetype = H
trigger1 = root,stateno != [0,155];立ち～ガード以外。
value = 1130

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 1130
time = 0
ignorehitpause = 1

[State 3010, 2]
type = destroyself
trigger1 = time = 150
;---------------------------------------------------------------------------
;速い父の涙
[Statedef 1120]
type = U;前のステートの状態を引き継ぐ
physics = N
poweradd= 110
velset = 0,0

[State -2]
type = Helper
trigger1 = time = 0
trigger1 = numhelper(1101) = 0
helpertype = normal
name = "fish"
stateno = 1121
id = 1101
pos = 40, -85
postype = p1
ownpal = 1
facing = 1
size.xscale = 1
size.yscale = 1

[State 1100, ステート変更]
type = ChangeState
trigger1 = Time = 1
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;親父
[Statedef 1121]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
anim = 9996
sprpriority = 3


[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = time = 12
value = 100, 10

[State 1010, 移動速度]
type = VelSet
trigger1 = time = 12
x = 10
y = -1

[State 1010, 移動速度]
type = VelSet
trigger1 = time = 28
x = 0
y = 0

[State 1010, 移動速度]
type = VelSet
trigger1 = time > 54
trigger1 = time < 77
x = -6
y = -3 

[State 1010, 移動速度]
type = VelSet
trigger1 = time > 78
trigger1 = time < 100
x = -6
y = -6

[State 210, 2]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = Medium
damage    = 45
priority = 3, Hit
guardflag = M
pausetime = 0,11
sparkno = s810
guard.sparkno = s840
sparkxy = -10,-10
hitsound = s100, 11
guardsound = s1,5
ground.type = low
ground.slidetime = 13
ground.hittime  = 13-ifelse(var(14)=0&&fvar(30)>=9&&ifelse(fvar(30)=9,random%5=0,random%10=0),13,0)
ground.velocity = -4*const(size.xscale)
air.velocity = -3*const(size.xscale) * (var(14) = 0),(-3+var(19)*1.3) * (var(14) = 0)
p2facing = 1
givepower = 10,0
id = 200
ground.cornerpush.veloff = 0

[State 0, ts]
type = TargetState
trigger1 = movehit
trigger1 = !Target,NumPartner
trigger1 = Target,life = 0
trigger1 = roundno > 1
value = 186

[State 0, ts]
type = ChangeState
triggerall = time <= 43
trigger1 = parent,movetype = H
trigger1 = root,stateno != [0,155];立ち～ガード以外。
value = 1130

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 1130
time = 0
ignorehitpause = 1

[State 3010, 2]
type = destroyself
trigger1 = time = 150
;---------------------------------------------------------------------------
;親父撤退
[Statedef 1130]
type    = S
movetype= I
physics = S
poweradd= 0
ctrl = 0
anim = 9998
sprpriority = 3

[State 1010, 移動速度]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 1010, 移動速度]
type = VelSet
trigger1 = time > 25
trigger1 = time < 46
x = -6
y = -3 

[State 1010, 移動速度]
type = VelSet
trigger1 = time > 49
trigger1 = time < 71
x = -6
y = -6

[State 3010, 2]
type = destroyself
trigger1 = time = 130
;---------------------------------------------------------------------------
;カウンター
[Statedef 1200]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 20
velset = 0,0
anim = 1210
ctrl = 0
sprpriority = 2

[State 3200]
type = StateTypeSet
trigger1 = enemy,movetype = A
movetype = A

[State 1009, 受け止め定義]
type = ReversalDef
trigger1 = AnimElem = 3
reversal.attr = SAC, AA             ;受け止める相手の攻撃属性を指定
;reversal.attr = SA, NA,SA,HA,NP,SP,HP ;（↑と意味は同じ）
pausetime     = 10,10
numhits       = 0
sparkno       = s810
sparkxy       = 6500,0
P1StateNo     = 1201

[State 1200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;カウンター 成功
[Statedef 1201]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 20
velset = 0,0
anim = 1211
ctrl = 0
sprpriority = 2

[State 200, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA
damage = 0, 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 2, Hit
pausetime = 0, 20
sparkno = s810
guard.sparkno = s840
sparkxy = -10, -76
hitsound   = s100, 5
guardsound = s1,5
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = 0*const(size.xscale)
air.type = High
air.velocity = 0*const(size.xscale),0
air.hittime = 12

[State 3000, 残像]
type = AfterImage
trigger1 = AnimElem = 5, 1
time = 2
length = 10
FrameGap = 3
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = 1,1,1
trans = add1

[State 3000, 残像表示時間]
type = AfterImageTime
trigger1 = AnimElemTime(5) >= 1 && Time < 35
time = 2

[State 3000, 移動速度]
type = VelSet
trigger1 = Time > 8
trigger1 = Time < 15
x = 15

[State 3000, 移動速度]
type = VelSet
trigger1 = Time > 14
trigger1 = Time < 21
x = 7.5

[State 3000, 移動速度]
type = VelSet
trigger1 = Time > 20
trigger1 = Time < 27
x = 3

[State 3000, 移動速度]
type = VelSet
trigger1 = Time > 26
x = 1.5

[State 3000, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 11
x = 0

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = time <= 5
value = SCA

[State 702, すり抜け]
type = PlayerPush
trigger1 = Time > 8
value = 0

[State 1000, 7]
type = Helper
trigger1 = MoveContact
trigger1 = numhelper(1003) = 0
helpertype = normal
name = "bom"
stateno = 1003
id = 1003
pos = 0, -50
postype = p2
ownpal = 1
facing = 1
bindtime = 999999
size.xscale = 1
size.yscale = 1

[State 1200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;カウンター　スパコン
[Statedef 1210]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 20
velset = 0,0
anim = 1210
ctrl = 0
sprpriority = 2

[State 3200]
type = StateTypeSet
trigger1 = enemy,movetype = A
movetype = A

[State 1009, 受け止め定義]
type = ReversalDef
trigger1 = AnimElem = 3
reversal.attr = SAC, AA             ;受け止める相手の攻撃属性を指定
;reversal.attr = SA, NA,SA,HA,NP,SP,HP ;（↑と意味は同じ）
pausetime     = 10,10
numhits       = 0
sparkno       = s810
sparkxy       = 6500,0
P1StateNo     = 1211

[State 1200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;カウンター 成功 スパコン
[Statedef 1211]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 20
velset = 0,0
anim = 1211
ctrl = 0
sprpriority = 2

[State 200, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA
damage = 0, 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 2, Hit
pausetime = 0, 20
sparkno = s810
guard.sparkno = s840
sparkxy = -10, -76
hitsound   = s100, 5
guardsound = s1,5
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = 0*const(size.xscale)
air.type = High
air.velocity = 0*const(size.xscale),0
air.hittime = 12

[State 3000, 残像]
type = AfterImage
trigger1 = AnimElem = 5, 1
time = 2
length = 10
FrameGap = 3
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = 1,1,1
trans = add1

[State 3000, 残像表示時間]
type = AfterImageTime
trigger1 = AnimElemTime(5) >= 1 && Time < 35
time = 2

[State 3000, 移動速度]
type = VelSet
trigger1 = Time > 8
trigger1 = Time < 15
x = 15

[State 3000, 移動速度]
type = VelSet
trigger1 = Time > 14
trigger1 = Time < 21
x = 7.5

[State 3000, 移動速度]
type = VelSet
trigger1 = Time > 20
trigger1 = Time < 27
x = 3

[State 3000, 移動速度]
type = VelSet
trigger1 = Time > 26
x = 1.5

[State 3000, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 11
x = 0

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = time <= 5
value = SCA

[State 702, すり抜け]
type = PlayerPush
trigger1 = Time > 8
value = 0

[State -2];ヘルパーやろう
type = helper
trigger1 = movecontact
triggerall = numhelper(3013) = 0 
ID = 3013
helpertype = normal
name = "are"
pos = 0,0
postype = p1
stateno = 3013
ownpal = 1

[State 1200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;シアーハート
[Statedef 1300]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 0
ctrl = 0
anim = 412
sprpriority = 2
facep2 = 1

[State 1000, 7]
type = Helper
triggerall = var(49) = 0
trigger1 = Time = 0
trigger1 = numhelper(1001) = 0
helpertype = normal
name = "cear heart"
stateno = 1301
id = 1301
pos = 10, -10
postype = p1
ownpal = 1
facing = 1
size.xscale = 1
size.yscale = 1

[State 10820, けむり]
type = Explod
trigger1 = Time = 0
facing = 1                 ;キャラと同じ向きに表示（デフォ
postype = p1
pos = 30,5
anim = 20018
sprpriority = 4
ownpal = 1

[State 400, 3]
type = CtrlSet
trigger1 = Time = 30
value = 1

[State 400, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11 ;しゃがむステートへ（コモンステート）
ctrl = 1
;---------------------------------------------------------------------------
; アタック
[Statedef 1301]
type    = S
movetype= A
physics = S
juggle  = 0;4
poweradd= 0
ctrl = 0
velset = 7*parent,const(size.xscale)+parent,fvar(0),0
anim = 1301
sprpriority = -1
facep2 = 1

[State 0]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 200, 1]
type = HitDef
trigger1 = anim = 1301
trigger1 = time = 0
attr = S, NA
damage = 5, 0
animtype = Light
guardflag = LA
hitflag = MAF
priority = 2, Hit
pausetime = 0, 8
sparkno = s36400
guard.sparkno = s36400
sparkxy = -10, -76
hitsound = s1, 0
guardsound = s1,5
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -8*const(size.xscale)
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12
numhits = 0

[State 600, 2　ヒット定義]
type = HitDef
trigger1 = anim = 910
trigger1 = animelem = 3
attr = A, NA
damage    = 30,6
animtype  = hard
guardflag = MA
priority = 2, Hit
pausetime = 0,9
sparkno = s36400
guard.sparkno = s36400
sparkxy = -10,-77
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 11
ground.hittime  = 11-ifelse(var(14)=0&&fvar(30)>=9&&ifelse(fvar(30)=9,random%5=0,random%10=0),11,0)
ground.velocity = 10,-5
air.velocity = -4*const(size.xscale) * (var(14) = 0),(-6+var(19)*1.3) * (var(14) = 0)
p2facing = 1
getpower = 10 * (var(14) = 0),0
givepower = 10,0
ground.cornerpush.veloff = 0
air.hittime = 15
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
guard.kill = 0

[State 1000, 7]
type = Helper
trigger1 = MoveContact
trigger1 = numhelper(1302) = 0
helpertype = normal
name = "bom"
stateno = 1302
id = 1302
pos = 0, -20
postype = p2
ownpal = 1
facing = 1
bindtime = 999999
size.xscale = 1
size.yscale = 1

[State 400, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 15
value = 100, 13

[State 215]
type = VelSet
trigger1 = time = 15
x = 20

[State 215]
type = VelSet
trigger1 = time = 35
x = -20

[State 215　ヘルパー消滅]
type = changeanim
trigger1 = time = 55
value = 910

[State 400, 音を鳴らす]
type = PlaySnd
trigger1 = anim = 910
trigger1 = animelem = 1
value = 300, 0

[State 0, ts]
type = TargetState
trigger1 = movehit
trigger1 = !Target,NumPartner
trigger1 = Target,life = 0
trigger1 = roundno > 1
value = 186

[State 215　ヘルパー消滅]
type = DestroySelf
trigger1 = anim = 910
trigger1 = animtime = 0
trigger2 = root,movetype = H
;---------------------------------------------------------------------------
; 爆発
[Statedef 1302]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0
anim = 1302
sprpriority = 4
facep2 = 1

[State 600, 2　ヒット定義]
type = HitDef
trigger1 = time = 0
attr = A, NA
damage    = 60,12
animtype  = hard
guardflag = MA
priority = 2, Hit
pausetime = 0,9
sparkno = s36400
guard.sparkno = s36400
sparkxy = -10,-77
hitsound = s1, 3
guardsound = s1,5
ground.type = High
fall.recover = 0
fall = 1
ground.slidetime = 11
ground.hittime  = 11-ifelse(var(14)=0&&fvar(30)>=9&&ifelse(fvar(30)=9,random%5=0,random%10=0),11,0)
ground.velocity = 1.3,-7
guard.velocity = 6
air.velocity = 1.3,-7
airguard.velocity = 1,5
p2facing = 1
ground.cornerpush.veloff = 0
air.hittime = 15
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
guard.kill = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 300, 1
channel = 0

[State 0, ts]
type = TargetState
trigger1 = movehit
trigger1 = !Target,NumPartner
trigger1 = Target,life = 0
trigger1 = roundno > 1
value = 186

[State 230, 2]
type = destroyself
trigger1 = NumHelper(1301) = 0
trigger2 = root,movetype = H
;---------------------------------------------------------------------------
;シアーハート 立ち
[Statedef 1303]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 0
ctrl = 0
anim = 1303
sprpriority = 2
facep2 = 1

[State 1000, 7]
type = Helper
trigger1 = Time = 0
trigger1 = numhelper(1001) = 0
helpertype = normal
name = "kq"
stateno = 1310
id = 1001
pos = 20, 0
postype = p1
ownpal = 1
facing = 1
size.xscale = 1
size.yscale = 1

[State 1000, 7]
type = Helper
triggerall = var(49) = 0
trigger1 = Time = 0
helpertype = normal
name = "cear heart"
stateno = 1304
id = 1304
pos = 40, -65
postype = p1
ownpal = 1
facing = 1
size.xscale = 1
size.yscale = 1

[State 400, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0 
ctrl = 1
;---------------------------------------------------------------------------
; アタック
[Statedef 1304]
type    = S
movetype= A
physics = S
juggle  = 0;4
poweradd= 0
ctrl = 0
velset = 7*parent,const(size.xscale)+parent,fvar(0),0
anim = 1301
sprpriority = -1
facep2 = 1

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = facing != parent,facing

[State 0]
type = SprPriority
trigger1 = 1
value = -1
ignorehitpause = 1

[State 200, 1]
type = HitDef
trigger1 = anim = 1301
trigger1 = time = 0
attr = S, NA
damage = 5, 0
sprpriority = -1
animtype = Light
guardflag = MA
hitflag = MAF
priority = 2, Hit
pausetime = 0, 8
sparkno = s36400
guard.sparkno = s36400
sparkxy = -10, -76
hitsound = s1, 0
guardsound = s1,5
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -8*const(size.xscale)
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12
numhits = 0

[State 600, 2　ヒット定義]
type = HitDef
trigger1 = anim = 910
trigger1 = animelem = 3
attr = A, NA
damage    = 30,6
animtype  = hard
guardflag = MA
priority = 2, Hit
pausetime = 0,9
sparkno = s36400
guard.sparkno = s36400
sparkxy = -10,-77
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 11
ground.hittime  = 11
ground.velocity = -10,-5
air.velocity = -4*const(size.xscale) * (var(14) = 0),(-6+var(19)*1.3) * (var(14) = 0)
p2facing = 1
getpower = 10 * (var(14) = 0),0
givepower = 10,0
ground.cornerpush.veloff = 0
air.hittime = 15
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
guard.kill = 0

[State 1000, 7]
type = Helper
trigger1 = MoveContact
trigger1 = numhelper(1302) = 0
helpertype = normal
name = "bom"
stateno = 1305
id = 1302
pos = 0, -60
postype = p2
ownpal = 1
facing = 1
bindtime = 999999
size.xscale = 1
size.yscale = 1

[State 400, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 15
value = 100, 13

[State 215]
type = VelSet
trigger1 = time = 15
x = 20

[State 215]
type = VelSet
trigger1 = time = 35
x = -20

[State 215　ヘルパー消滅]
type = changeanim
trigger1 = time = 55
value = 910

[State 400, 音を鳴らす]
type = PlaySnd
trigger1 = anim = 910
trigger1 = animelem = 1
value = 300, 0

[State 0, ts]
type = TargetState
trigger1 = movehit
trigger1 = !Target,NumPartner
trigger1 = Target,life = 0
trigger1 = roundno > 1
value = 186

[State 215　ヘルパー消滅]
type = DestroySelf
trigger1 = anim = 910
trigger1 = animtime = 0
trigger2 = root,movetype = H
;---------------------------------------------------------------------------
; 爆発
[Statedef 1305]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0
anim = 1302
sprpriority = 4
facep2 = 1

[State 600, 2　ヒット定義]
type = HitDef
trigger1 = time = 0
attr = A, NA
damage    = 60,12
animtype  = hard
guardflag = MA
priority = 2, Hit
pausetime = 0,9
sparkno = s36400
guard.sparkno = s36400
sparkxy = -10,-77
hitsound = s1, 3
guardsound = s1,5
ground.type = High
fall.recover = 0
fall = 1
ground.slidetime = 11
ground.hittime  = 11
ground.velocity = 1.3,-7
guard.velocity = 11
air.velocity = 1.3,-7
airguard.velocity = 3,-5
p2facing = 1
ground.cornerpush.veloff = 0
air.hittime = 15
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
guard.kill = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 300, 1
channel = 0

[State 0, ts]
type = TargetState
trigger1 = movehit
trigger1 = !Target,NumPartner
trigger1 = Target,life = 0
trigger1 = roundno > 1
value = 186

[State 230, 2]
type = destroyself
trigger1 = NumHelper(1304) = 0
trigger2 = root,movetype = H
;---------------------------------------------------------------------------
; kq
[Statedef 1310]
type    = S
movetype= I
physics = S
juggle  = 0;4
poweradd= 0
ctrl = 0
velset = 0,0
anim = 1200
sprpriority = 0
facep2 = 1

[State 0]
type = SprPriority
trigger1 = 1
value = 0
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 230, 2];プッツン時スタンド消去
type = destroyself
trigger1 = root,stateno = 700
ignorehitpause = 1

[State 215　ヘルパー消滅]
type = DestroySelf
trigger1 = animtime = 0
;===========================================================================
; 超必殺技
;===========================================================================
;---------------------------------------------------------------------------
; 最初のM.U.G.E.Nから存在するカンフーマンの超必殺技。
; 超必なので攻撃を当ててもゲージを増やさないようにする事に気を付けるだけで、
; 後は結構簡単な処理にまとめられてる。
; 超必時の暗転用の処理（SuperPause）にも刮目せよ！m9っ｀Д´)
;---------------------------------------------------------------------------
;美奈子さん
[Statedef 3000]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3000
ctrl = 0
sprpriority = 2

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = time = 1
value = -1000

[state 3000]
type = pause
trigger1 = animelem = 1
time = 40
movetime = 40

[State 0, ]
type = PlaySnd
trigger1 = animelem = 1
value = 4, 0

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 1
value = 100,6
channel = 0

[State 3000, 残像]
type = AfterImage
trigger1 = AnimElem = 2, 1
time = 2
length = 10
FrameGap = 3
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = 1,1,1
trans = add1

[State 3000, 残像表示時間]
type = AfterImageTime
trigger1 = AnimElemTime(2) >= 1 && Time < 100
time = 2

[State 30]
type = NotHitBy  
trigger1 = numhelper(3003) = 1
value = SCA

[State 30]
type = HitBy  ;特定の攻撃以外食らわない
trigger1 = time = 0
value = SCA,NT,ST,HT
time = 60
;立ち、屈み、空中、通常なげ、必殺なげ、超必殺なげ

[State 3000, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 2
x = 0

[State 3000, 移動速度]
type = VelSet
trigger1 = Time > 40
trigger1 = Time < 69
x = 10

[State 3000, 移動速度]
type = VelSet
trigger1 = Time > 48
trigger1 = Time < 73
x = 5

[State 3000, 移動速度]
type = VelSet
trigger1 = Time > 72
trigger1 = Time < 90
x = 2

[State 3000, 移動速度]
type = VelSet
trigger1 = Time > 89
x = 1

[State 3000, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 5
x = 0

[State 702, すり抜け]
type = PlayerPush
trigger1 = 1
value = 0

[State 702, helper]
type = helper
trigger1 = animelem = 1
helpertype = normal
name = "are"
pos = -10,0
postype = p1
keyctrl = 0
sprpriority = -3
stateno = 3020
ownpal = 1
size.xscale = .9
size.yscale = 1.07

[State -2];ヘルパーやろう
type = helper
trigger1 = time = 0  
helpertype = normal
name = "are"
pos = 0,0
postype = p1
stateno = 3001
ownpal = 1

[state 3003]
type = helper
trigger1 = animelem = 1
name = "cutin"
helpertype = normal
stateno = 23100
id = 3100
pos = 0,0
postype = back
ownpal = 1
keyctrl = 0
sprpriority = -3
supermovetime = 9999999
pausemovetime = 9999999

[state 3003]
type = helper
trigger1 = animelem = 1
name = "haikei"
helpertype = normal
stateno = 23101
id = 3101
pos = 0,0
postype = left
ownpal = 1
keyctrl = 0
sprpriority = -5
supermovetime = 9999999
pausemovetime = 9999999

[state 3000]
type = ChangeState
triggerall = numhelper(3003) = 1
trigger1 = Time = 85
value = 3002

[State 3000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;美奈子さん　ヘルパー
[Statedef 3001]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3001
ctrl = 0
sprpriority = 2

[State 230, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = hard
damage    = 0
guardflag = MA
pausetime = 0,120
guard.pausetime = 0,20
sparkno = 0
sparkxy = -10,-37
hitsound   = s100, 5
guardsound = s1, 5
ground.type = Low
ground.slidetime = 10
ground.hittime  = 12
ground.velocity = 0
air.velocity = 0,0

[State 1065, 3]
type = bindtoparent
trigger1 = 1
pos = 0,0
time = 1
ignorehitpause = 1

[State -2];ヘルパーやろう
type = helper
trigger1 = movehit
triggerall = numhelper(3003) = 0 
ID = 3003
helpertype = normal
name = "are"
pos = 0,0
postype = p1
stateno = 3003
ownpal = 1

[State 215　ヘルパー消滅]
type = DestroySelf
trigger1 = Time = 20
;---------------------------------------------------------------------------
;美奈子さん　ヘルパー2
[Statedef 3003]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3001
ctrl = 0
sprpriority = 2

[State 1027, 位置]
type = PosSet
trigger1 = 1
x = enemynear,pos x 
y = enemynear,pos y 

[State 1000, 7]
type = Helper
triggerall = numhelper(3004) = 0
trigger1 = root,stateno = 3002 && root,time = 5
helpertype = normal
name = "bom"
stateno = 3004
id = 3004
pos = 0, -60
postype = p2
ownpal = 1
facing = 1
bindtime = 999999
size.xscale = 1.5
size.yscale = 1.5

[State 215　ヘルパー消滅]
type = DestroySelf
trigger1 = root,stateno != [3000,3002]
;---------------------------------------------------------------------------
;爆破する
[Statedef 3002]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3002
ctrl = 0
sprpriority = 2

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 1
value = 100,7
channel = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 4
value = 100, 2

[State 1000, VarSet]
type = VarSet
trigger1 = animelem = 7
var(5) = 0

[State 3000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 爆発
[Statedef 3004]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0
anim = 912
sprpriority = 4
facep2 = 1

[State 600, 2　ヒット定義]
type = HitDef
trigger1 = time = 0
attr = A, NA
damage    = 200
animtype  = hard
guardflag = MA
priority = 2, Hit
pausetime = 0,9
sparkno = s36400
guard.sparkno = s36400
sparkxy = -10,-77
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -1.3,-25
guard.velocity = -11
air.velocity = -1.3,-25
airguard.velocity = -4.5,-5
envshake.time = 25        ;攻撃を当てた場合の画面振動の処理
envshake.ampl = 7
envshake.freq = 176
p2facing = 1
getpower = 10 * (var(14) = 0),0
givepower = 10,0
ground.cornerpush.veloff = 0
air.hittime = 15
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
fall = 1
fall.recover = 0          ;相手は空中受け身が出来なくなる

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 0
value = 300,1

[State 0, ts]
type = TargetState
trigger1 = movehit
trigger1 = !Target,NumPartner
trigger1 = Target,life = 0
trigger1 = roundno > 1
value = 186

[State 230, 2]
type = destroyself
trigger1 = animtime = 0
;---------------------------------------------------------------------------
;美奈子さんvar2
[Statedef 3010]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3000
ctrl = 0
sprpriority = 2

[State 30]
type = NotHitBy  
trigger1 = numhelper(3013) = 1
value = SCA

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = time = 1
value = -1000

[state 3000]
type = pause
trigger1 = animelem = 1
time = 40
movetime = 40

[State 0, ]
type = PlaySnd
trigger1 = animelem = 1
value = 4, 0

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 1
value = 100,6
channel = 0

[State 3000, 残像]
type = AfterImage
trigger1 = AnimElem = 2, 1
time = 2
length = 10
FrameGap = 3
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = 1,1,1
trans = add1

[State 3000, 残像表示時間]
type = AfterImageTime
trigger1 = AnimElemTime(2) >= 1 && Time < 100
time = 2

[State 30]
type = HitBy  ;特定の攻撃以外食らわない
trigger1 = time = 0
value = SCA,NT,ST,HT
time = 60
;立ち、屈み、空中、通常なげ、必殺なげ、超必殺なげ

[State 3000, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 2
x = 0

[State 3000, 移動速度]
type = VelSet
trigger1 = Time > 40
trigger1 = Time < 69
x = 10

[State 3000, 移動速度]
type = VelSet
trigger1 = Time > 48
trigger1 = Time < 73
x = 5

[State 3000, 移動速度]
type = VelSet
trigger1 = Time > 72
trigger1 = Time < 90
x = 2

[State 3000, 移動速度]
type = VelSet
trigger1 = Time > 89
x = 1

[State 3000, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 5
x = 0

[State 702, すり抜け]
type = PlayerPush
trigger1 = 1
value = 0

[State 702, helper]
type = helper
trigger1 = animelem = 1
helpertype = normal
name = "are"
pos = -10,0
postype = p1
keyctrl = 0
sprpriority = -3
stateno = 3021
ownpal = 1
size.xscale = .9
size.yscale = 1.07

[State -2];ヘルパーやろう
type = helper
trigger1 = time = 0  
helpertype = normal
name = "are"
pos = 0,0
postype = p1
stateno = 3011
ownpal = 1

[state 3003]
type = helper
trigger1 = animelem = 1
name = "cutin"
helpertype = normal
stateno = 23100
id = 3100
pos = 0,0
postype = back
ownpal = 1
keyctrl = 0
sprpriority = -3
supermovetime = 9999999
pausemovetime = 9999999

[state 3003]
type = helper
trigger1 = animelem = 1
name = "haikei"
helpertype = normal
stateno = 23101
id = 3101
pos = 0,0
postype = left
ownpal = 1
keyctrl = 0
sprpriority = -5
supermovetime = 9999999
pausemovetime = 9999999

[State 3000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;美奈子さんvar2　ヘルパー
[Statedef 3011]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3001
ctrl = 0
sprpriority = 2

[State 230, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = hard
damage    = 0
guardflag = MA
pausetime = 0,30
guard.pausetime = 0,20
sparkno = 0
sparkxy = -10,-37
hitsound   = s100, 5
guardsound = s1, 5
ground.type = Low
ground.slidetime = 10
ground.hittime  = 12
ground.velocity = 0
air.velocity = 0,0

[State 1065, 3]
type = bindtoparent
trigger1 = 1
pos = 0,0
time = 1
ignorehitpause = 1

[State -2];ヘルパーやろう
type = helper
trigger1 = movecontact
triggerall = numhelper(3013) = 0 
ID = 3013
helpertype = normal
name = "are"
pos = 0,0
postype = p1
stateno = 3013
ownpal = 1

[State 215　ヘルパー消滅]
type = DestroySelf
trigger1 = Time = 20
;---------------------------------------------------------------------------
;美奈子さんvar2　ヘルパー2
[Statedef 3013]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3001
ctrl = 0
sprpriority = 2

[State 1027, 位置]
type = PosSet
trigger1 = 1
x = enemynear,pos x 
y = enemynear,pos y 

[State 181, ]
type = AttackDist
trigger1 = 1
value = 0

[State 1000, 7]
type = Helper
triggerall = !numhelper(3004)
trigger1 = root,stateno = 3012; && root,time = 5
helpertype = normal
name = "bom"
stateno = 3014
id = 3004
pos = 0, -60
postype = p2
ownpal = 1
facing = 1
bindtime = 999999
size.xscale = 1.5
size.yscale = 1.5

[State 215　ヘルパー消滅]
type = DestroySelf
trigger1 = root,stateno != [120,153]
trigger1 = root,movetype = H
trigger2 = root,stateno = 3012 
;---------------------------------------------------------------------------
;爆破する
[Statedef 3012]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3012
ctrl = 0
sprpriority = 2

[state 3000]
type = pause
trigger1 = animelem = 1
time = 40
movetime = 40

[State 0, ]
type = PlaySnd
trigger1 = animelem = 1
value = 4, 0

[state 3003]
type = helper
trigger1 = animelem = 1
name = "cutin"
helpertype = normal
stateno = 23100
id = 3100
pos = 0,0
postype = back
ownpal = 1
keyctrl = 0
sprpriority = -3
supermovetime = 9999999
pausemovetime = 9999999

[state 3003]
type = helper
trigger1 = animelem = 1
name = "haikei"
helpertype = normal
stateno = 23101
id = 3101
pos = 0,0
postype = left
ownpal = 1
keyctrl = 0
sprpriority = -5
supermovetime = 9999999
pausemovetime = 9999999

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 1
value = 100,7
channel = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 4
value = 100, 2

[State 1000, VarSet]
type = VarSet
trigger1 = animelem = 7
var(5) = 0

[State 3000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 爆発
[Statedef 3014]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0
anim = 912
sprpriority = 4
facep2 = 1

[State 600, 2　ヒット定義]
type = HitDef
trigger1 = time = 0
attr = A, NA
damage    = 200
animtype  = hard
hitflag = MAFD
guardflag = MA
priority = 2, Hit
pausetime = 0,9
sparkno = s36400
guard.sparkno = s36400
sparkxy = -10,-77
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -1.3,-25
guard.velocity = -11
air.velocity = -1.3,-25
airguard.velocity = -4.5,-5
envshake.time = 25        ;攻撃を当てた場合の画面振動の処理
envshake.ampl = 7
envshake.freq = 176
p2facing = 1
getpower = 10 * (var(14) = 0),0
givepower = 10,0
ground.cornerpush.veloff = 0
air.hittime = 15
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
fall = 1
fall.recover = 0          ;相手は空中受け身が出来なくなる

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 0
value = 300,1

[State 0, ts]
type = TargetState
trigger1 = movehit
trigger1 = !Target,NumPartner
trigger1 = Target,life = 0
trigger1 = roundno > 1
value = 186

[State 230, 2]
type = destroyself
trigger1 = animtime = 0
;---------------------------------------------------------------------------
;美奈子さんvar2　kqヘルパー
[Statedef 3020]
type    = S
movetype= I
physics = S
juggle  = 4
velset = 0,0
anim = 10020
ctrl = 0
sprpriority = 0

[State 1065, 3]
type = bindtoparent
trigger1 = 1
pos = 0,0
time = 1
ignorehitpause = 1

[State 3000, ステート変更]
type = ChangeState
trigger1 = root,stateno != 3000
value = 3022
;---------------------------------------------------------------------------
;美奈子さんvar2　kqヘルパー
[Statedef 3021]
type    = S
movetype= I
physics = S
juggle  = 4
velset = 0,0
anim = 10020
ctrl = 0
sprpriority = 0

[State 1065, 3]
type = bindtoparent
trigger1 = 1
pos = 0,0
time = 1
ignorehitpause = 1

[State 3000, ステート変更]
type = ChangeState
trigger1 = root,stateno != 3010
value = 3022
;---------------------------------------------------------------------------
;美奈子さんvar2　kqヘルパー 消滅
[Statedef 3022]
type    = S
movetype= I
physics = S
juggle  = 4
velset = 0,0
anim = 10021
ctrl = 0
sprpriority = 0

[State 215　ヘルパー消滅]
type = DestroySelf
trigger1 = animtime = 0
;---------------------------------------------------------------------------
;空気弾
[Statedef 3100]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3100
ctrl = 0
sprpriority = 2

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = time = 1
value = -1000

[State 810, HitBy]
type = HitBy
trigger1 = time = 0
value = SCA, NT,ST,HT
time = 40

[state 3000]
type = pause
trigger1 = animelem = 1
time = 40
movetime = 40

[State 3000, 移動速度]
type = VelSet
trigger1 = Time = 46
x = -10

[State 3000, 移動速度]
type = VelSet
trigger1 = Time = 52
x = -5

[State 3000, 移動速度]
type = VelSet
trigger1 = Time = 55
x = 0

[State 10820, けむり]
type = Explod
trigger1 = time = 46
facing = 1                 ;キャラと同じ向きに表示（デフォ
postype = p1
pos = 0,0
anim = 20020
sprpriority = 4
ownpal = 1

[State 0, ]
type = PlaySnd
trigger1 = animelem = 1
value = 4, 0

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 1
value = 100,12
channel = 0

[State 702, helper]
type = helper
trigger1 = animelem = 1
helpertype = normal
name = "kq"
id = 1001
pos = -10,0
postype = p1
keyctrl = 0
sprpriority = 2
stateno = 3101
ownpal = 1
size.xscale = .90
size.yscale = 1.07

[state 3003]
type = helper
trigger1 = animelem = 1
name = "cutin"
helpertype = normal
stateno = 23100
id = 3100
pos = 0,0
postype = back
ownpal = 1
keyctrl = 0
sprpriority = -3
supermovetime = 9999999
pausemovetime = 9999999

[state 3003]
type = helper
trigger1 = animelem = 1
name = "haikei"
helpertype = normal
stateno = 23101
id = 3101
pos = 0,0
postype = left
ownpal = 1
keyctrl = 0
sprpriority = -5
supermovetime = 9999999
pausemovetime = 9999999

[State 3000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;空気弾 stand
[Statedef 3101]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 13000
ctrl = 0
sprpriority = 2

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 6
value = 100,20

[State 1065, 3]
type = bindtoparent
trigger1 = 1
pos = 25,0
time = 1
ignorehitpause = 1

[State 702, helper]
type = helper
trigger1 = time = 6
helpertype = normal
name = "ab"
id = 3102
pos = 15,-80
postype = p1
keyctrl = 0
sprpriority = 3
stateno = 3102
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
trigger2 = animtime = 0
value = 3103
;---------------------------------------------------------------------------
;空気弾 bom
[Statedef 3102]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 3102
ctrl = 0
sprpriority = 3

[State 600, 2　ヒット定義]
type = HitDef
trigger1 = time = 0
attr = A, NA
damage    = 160, 30
animtype  = hard
guardflag = MA
priority = 2, Hit
pausetime = 0,9
sparkno = s36400
guard.sparkno = s36400
sparkxy = -10,-77
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 11
ground.hittime  = 11-ifelse(var(14)=0&&fvar(30)>=9&&ifelse(fvar(30)=9,random%5=0,random%10=0),11,0)
ground.velocity = -10,-5
air.velocity = -4*const(size.xscale) * (var(14) = 0),(-6+var(19)*1.3) * (var(14) = 0)
p2facing = 1
getpower = 10 * (var(14) = 0),0
givepower = 10,0
ground.cornerpush.veloff = 0
air.hittime = 15
guard.dist = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
guard.kill = 0
affectteam = E
fall = 1
fall.recover = 0

[State 230, 2]
type = changeanim
triggerall = anim = 3102
triggerall = root,statetype != A
trigger1 = root,anim = 3104
trigger1 = root,animelem = 5
trigger2 = root,movetype = H
trigger3 = root,command = "a"
trigger3 = root,ctrl = 1
value = 3103

[State 400, 音を鳴らす]
type = PlaySnd
trigger1 = anim = 3103
trigger1 = animelem = 1
value = 300, 0

[State 1301, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = NoShadow ;影を消す

[State 1301, 特殊効果]
type = Trans
trigger1 = anim = 3102
trans = addalpha
alpha = 128, 128

[State 1301, 特殊効果]
type = Trans
trigger1 = anim = 3103
trans = addalpha
alpha = 256, 0

[State 3000, 移動速度]
type = VelSet
trigger1 = Time = 0
x = 5

[State 3000, 移動速度]
type = VelSet
trigger1 = Time > 2
x = 0.5

[State 3000, 移動速度]
type = VelSet
trigger1 = anim = 3103
x = 0

[State 3010, 2]
type = destroyself
trigger1 = pos x <= -240 || pos x >= 240

[State 0, ts]
type = TargetState
trigger1 = movehit
trigger1 = !Target,NumPartner
trigger1 = Target,life = 0
trigger1 = roundno > 1
value = 186

[State 215　ヘルパー消滅]
type = DestroySelf
trigger1 = anim = 3103
trigger1 = animtime = 0
;---------------------------------------------------------------------------
; 終了（スタンド)
[Statedef 3103]
type    = S
movetype= I
physics = S
juggle  = 0;4
poweradd= 0
ctrl = 0
velset = 0,0
anim = 13001
sprpriority = 0

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = invisible

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 13001
id = 1002
pos = 0,0
postype = p1
sprpriority = 0
bindtime = -1
removeongethit = 1
scale = const(size.xscale),const(size.yscale)
pausemovetime = parent,var(14) * 9999999999999

[State 1000, 3]
type = ModifyExplod
trigger1 = time >= 2
ID = 1002
scale = 1-time/11.5 , 1+time/11.5
pausemovetime = parent,var(14) * 9999999999999

[State 191, 3]
type = PlaySnd
trigger1 = animtime = 0
value = 100,1

[State 230, 2]
type = destroyself
trigger1 = animtime = 0
;---------------------------------------------------------------------------
; ポーズ
[Statedef 3104]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 110
velset = 0,0
anim = 3104
ctrl = 0
sprpriority = 2

[State 400, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 5
value = 100, 2

[State 1010, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;接触空気弾
[Statedef 3200]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3100
ctrl = 0
sprpriority = 2

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = time = 1
value = -1000

[State 810, HitBy]
type = HitBy
trigger1 = time = 0
value = SCA, NT,ST,HT
time = 40

[state 3000]
type = pause
trigger1 = animelem = 1
time = 40
movetime = 40

[State 3000, 移動速度]
type = VelSet
trigger1 = Time = 46
x = -10

[State 3000, 移動速度]
type = VelSet
trigger1 = Time = 52
x = -5

[State 3000, 移動速度]
type = VelSet
trigger1 = Time = 55
x = 0

[State 10820, けむり]
type = Explod
trigger1 = time = 46
facing = 1                 ;キャラと同じ向きに表示（デフォ
postype = p1
pos = 0,0
anim = 20020
sprpriority = 4
ownpal = 1

[State 0, ]
type = PlaySnd
trigger1 = animelem = 1
value = 4, 0

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 1
value = 100,12
channel = 0

[State 702, helper]
type = helper
trigger1 = animelem = 1
helpertype = normal
name = "kq"
id = 1001
pos = -10,0
postype = p1
keyctrl = 0
sprpriority = 2
stateno = 3201
ownpal = 1
size.xscale = .90
size.yscale = 1.07

[state 3003]
type = helper
trigger1 = animelem = 1
name = "cutin"
helpertype = normal
stateno = 23100
id = 3100
pos = 0,0
postype = back
ownpal = 1
keyctrl = 0
sprpriority = -3
supermovetime = 9999999
pausemovetime = 9999999

[state 3003]
type = helper
trigger1 = animelem = 1
name = "haikei"
helpertype = normal
stateno = 23101
id = 3101
pos = 0,0
postype = left
ownpal = 1
keyctrl = 0
sprpriority = -5
supermovetime = 9999999
pausemovetime = 9999999

[State 3000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;空気弾 stand
[Statedef 3201]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 13000
ctrl = 0
sprpriority = 2

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 6
value = 100,20

[State 1065, 3]
type = bindtoparent
trigger1 = 1
pos = 25,0
time = 1
ignorehitpause = 1

[State 702, helper]
type = helper
trigger1 = time = 6
helpertype = normal
name = "ab"
id = 3102
pos = 15,-80
postype = p1
keyctrl = 0
sprpriority = 3
stateno = 3202
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 230, 2]
type = changestate
trigger1 = animtime = 0
value = 3103
;---------------------------------------------------------------------------
;空気弾 bom
[Statedef 3202]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 3202
ctrl = 0
sprpriority = 3

[State 600, 2　ヒット定義]
type = HitDef
trigger1 = anim = 3103
trigger1 = animelem = 3
attr = A, NA
damage    = 160, 30
animtype  = hard
guardflag = MA
priority = 2, Hit
pausetime = 0,9
sparkno = s36400
guard.sparkno = s36400
sparkxy = -10,-77
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 11
ground.hittime  = 11-ifelse(var(14)=0&&fvar(30)>=9&&ifelse(fvar(30)=9,random%5=0,random%10=0),11,0)
ground.velocity = -10,-5
air.velocity = -4*const(size.xscale) * (var(14) = 0),(-6+var(19)*1.3) * (var(14) = 0)
p2facing = 1
getpower = 10 * (var(14) = 0),0
givepower = 10,0
ground.cornerpush.veloff = 0
air.hittime = 15
guard.dist = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4
guard.kill = 0
affectteam = E
fall = 1
fall.recover = 0

[State 200, 1]
type = HitDef
trigger1 = anim = 3202
trigger1 = time = 0
attr = S, NA
damage = 0, 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 2, Hit
pausetime = 0, 10
sparkno = s36400
guard.sparkno = s36400
sparkxy = -10, -76
hitsound = s9997, 0
guardsound = s1,5
ground.type = High
ground.slidetime = 0
ground.hittime  = 0
guard.hittime  = 0
ground.velocity = 0*const(size.xscale)
air.type = High
air.velocity = 0*const(size.xscale),0
air.hittime = 0
numhits = 0

[State 230, 2]
type = changeanim
triggerall = anim = 3202
trigger1 = movecontact
value = 3103

[State 400, 音を鳴らす]
type = PlaySnd
trigger1 = anim = 3103
trigger1 = animelem = 1
value = 300, 0

[State 1301, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = NoShadow ;影を消す

[State 1301, 特殊効果]
type = Trans
trigger1 = anim = 3102
trans = addalpha
alpha = 128, 128

[State 1301, 特殊効果]
type = Trans
trigger1 = anim = 3103
trans = addalpha
alpha = 256, 0

[State 3000, 移動速度]
type = VelSet
trigger1 = Time = 0
x = 10

[State 3000, 移動速度]
type = VelSet
trigger1 = Time > 2
x = 1

[State 3000, 移動速度]
type = VelSet
trigger1 = anim = 3103
x = 0

[State 3010, 2]
type = destroyself
trigger1 = pos x <= -240 || pos x >= 240

[State 0, ts]
type = TargetState
trigger1 = movehit
trigger1 = !Target,NumPartner
trigger1 = Target,life = 0
trigger1 = roundno > 1
value = 186

[State 215　ヘルパー消滅]
type = DestroySelf
trigger1 = anim = 3103
trigger1 = animtime = 0
;---------------------------------------------------------------------------
;接触空気弾屈
[Statedef 3300]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3099
ctrl = 0
sprpriority = 2

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = time = 1
value = -1000

[state 3000]
type = pause
trigger1 = animelem = 1
time = 40
movetime = 40

[State 3000, 移動速度]
type = VelSet
trigger1 = Time = 46
x = -10

[State 3000, 移動速度]
type = VelSet
trigger1 = Time = 52
x = -5

[State 3000, 移動速度]
type = VelSet
trigger1 = Time = 55
x = 0

[State 10820, けむり]
type = Explod
trigger1 = time = 46
facing = 1                 ;キャラと同じ向きに表示（デフォ
postype = p1
pos = 0,0
anim = 20020
sprpriority = 4
ownpal = 1

[State 0, ]
type = PlaySnd
trigger1 = animelem = 1
value = 4, 0

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 1
value = 100,12
channel = 0

[State 702, helper]
type = helper
trigger1 = animelem = 1
helpertype = normal
name = "kq"
id = 1001
pos = -10,0
postype = p1
keyctrl = 0
sprpriority = 2
stateno = 3201
ownpal = 1
size.xscale = 1
size.yscale = 1

[state 3003]
type = helper
trigger1 = animelem = 1
name = "cutin"
helpertype = normal
stateno = 23100
id = 3100
pos = 0,0
postype = back
ownpal = 1
keyctrl = 0
sprpriority = -3
supermovetime = 9999999
pausemovetime = 9999999

[state 3003]
type = helper
trigger1 = animelem = 1
name = "haikei"
helpertype = normal
stateno = 23101
id = 3101
pos = 0,0
postype = left
ownpal = 1
keyctrl = 0
sprpriority = -5
supermovetime = 9999999
pausemovetime = 9999999

[State 3000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------
;カットイン

[Statedef 23100]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 3200
sprpriority = -3

[State 191, 2] 
type = AssertSpecial
trigger1 = 1
flag = invisible

[State 1000, 5]
type = explod
trigger1 = time % 1= 0
trigger1 = time < 30
trigger1 = parent,facing = 1
anim = 3200
id = 23107
pos = 0+var(14)*1,239+var(14)*3
postype = left
sprpriority = -3
removetime = 1
bindtime = -1
pausemovetime = 999999
removeongethit = 1
random = 30,30
ownpal = 1

[State 1000, 5]
type = explod
trigger1 = time % 1= 0
trigger1 = time >= 30
trigger1 = parent,facing = 1
anim = 3200
id = 23107
pos = 30,330
postype = left
sprpriority = -3
removetime = 1
bindtime = -1
pausemovetime = 999999
removeongethit = 1
random = 60,60
scale = 2.6*parent,const(size.xscale),2.6
ownpal = 1

[State 1000, 5]
type = explod
trigger1 = time % 1= 0
trigger1 = time < 30
trigger1 = parent,facing = -1
anim = 3200
id = 23107
pos = 0-var(14)*1,239+var(14)*3
postype = right
sprpriority = -3
removetime = 1
bindtime = -1
pausemovetime = 999999
removeongethit = 1
facing = -1
random = 30,30
ownpal = 1

[State 1000, 5]
type = explod
trigger1 = time % 1= 0
trigger1 = time >= 30
trigger1 = parent,facing = -1
anim = 3200
id = 23107
pos = -30,330
postype = right
sprpriority = -3
removetime = 1
bindtime = -1
pausemovetime = 999999
removeongethit = 1
facing = -1
random = 30,30
scale = 2.6*parent,const(size.xscale),2.6
ownpal = 1
getpower = 0

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 30
ID = 23107
scale = (0.4+Var(14)/15.0)*parent,const(size.xscale) , 0.4+Var(14)/15.0
pausemovetime = 999999

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 14
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 14
value = 1

[state 3000]
type = removeexplod
trigger1 = time >= 40
id = 23100

[state 3000]
type = destroyself
trigger1 = time >= 40
;-----------------------------------------------
;SC背景

[Statedef 23101]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 3101
sprpriority = -5

[State 191, 2] 
type = AssertSpecial
trigger1 = 1
flag = invisible

[State 1000, 2]
type = Varset
trigger1 = Time = 0
trigger2 = Time = 21
v = 14
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
trigger1 = Time <= 20
trigger2 = Time >= 21
trigger2 = Time <= 40
v = 14
value = 15

[State 1000, 3]
type = PalFx
trigger1 = Time = 0
time = 1
add = 255,255,255
mul = 255,255,255

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 3101
pos = 0,239
postype = left
sprpriority = -5
bindtime = -1
supermovetime = 9999999
pausemovetime = 9999999
removeongethit = 1
removetime = 41
ownpal = 0

[State 1000, 3]
type = PalFx
trigger1 = Time >= 0
trigger1 = Time <= 20
trigger2 = Time >= 21
trigger2 = Time <= 40
time = 1
add = 255-Var(14),255-Var(14),255-Var(14)

[state 3000]
type = destroyself
trigger1 = time >= 41
;===========================================================================
;---------------------------------------------------------------------------
; カンフーアッパーの超必殺技版。
; 攻撃がヒットしたら別のステートへ変更する処理と、
; HitDefに特殊なパラメータを加えている程度。
; テンプレートと見比べたら理解出来るはず。
;---------------------------------------------------------------------------
;スマッシュカンフーアッパー
[Statedef 3050]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3050
ctrl = 0
sprpriority = 2

[State 3050, 物理的なキャラの幅]
type = Width
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(16) < 0
value = 5,0

[State 3050, 超必殺技暗転時間停止]
type = SuperPause
trigger1 = AnimElem = 2
pos = -5, -55
anim = 100
sound = 20, 0
poweradd = -1000

[State 3050, 残像]
type = AfterImage
trigger1 = AnimElem = 2
time = 2

[State 3050, 残像表示時間]
type = AfterImageTime
trigger1 = AnimElemTime(2) >= 0
time = 2

[State 3050, 相手の特定の攻撃属性無効]
type = NotHitBy
trigger1 = AnimElem = 2
value = , NA, SA, AT
time = 6

[State 3050, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 2

[State 3050, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = S, HA
animtype  = Up
damage    = 155, 12
getpower  = 0
priority  = 5
guardflag = MA
pausetime = 30,30
sparkno = 3
sparkxy = 0,-110
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -1.3,-25
guard.velocity = -11
air.velocity = -1.3,-25
airguard.velocity = -4.5,-5
envshake.time = 25        ;攻撃を当てた場合の画面振動の処理
envshake.ampl = 7
envshake.freq = 176
p2facing = 1
fall = 1
fall.recover = 0          ;相手は空中受け身が出来なくなる
fall.damage = 70          ;相手が地面に激突した瞬間のダメージ量
fall.envshake.ampl = 6    ;相手が地面に激突した瞬間の画面振動
fall.envshake.freq = 178
fall.envshake.time = 15
mindist = 50,-100         ;攻撃を当てた相手の位置を補正する最小の座標
maxdist = 100,-10         ;攻撃を当てた相手の位置を補正する最大の座標
yaccel = .8

[State 3050, ステート変更];攻撃がヒットした場合
type = ChangeState
trigger1 = MoveHit
value = 3051

[State 3050, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;スマッシュカンフーアッパー：ヒット後
[Statedef 3051]
type    = S
movetype= A
physics = S
anim = 3051

[State 3051, 残像表示時間]
type = AfterImageTime
trigger1 = AnimTime < -2
time = 2

[State 3051, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;===========================================================================
;---------------------------------------------------------------------------
;ガード受付
[Statedef 7777]
type     = A
movetype = I
physics  = N
ctrl     = 0
anim     = 133
sprpriority = 1

[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 10001 固定]
type = BindToParent
trigger1 = 1
time = 1
facing = 0
pos = 0,0+IfElse(parent,StateType=C,30,0)
;（しゃがみなら30、そうでなければ0）を足す。

[State 215　ステート]
type = ChangeState
trigger1 = parent,Anim != [130,132]
value = 7779
;---------------------------------------------------------------------------
;ガード
[Statedef 7778]
type     = A
movetype = I
physics  = N
ctrl     = 0
anim     = 134
sprpriority = 1

[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 10001 固定]
type = BindToParent
trigger1 = 1
trigger1 = parent,Anim = 150
time = 1
facing = 0
pos = 0,0

[State 10001 固定]
type = BindToParent
trigger1 = 1
trigger1 = parent,Anim = 151
time = 1
facing = 0
pos = 0,30

[State 10001 固定]
type = BindToParent
trigger1 = 1
trigger1 = parent,Anim = 152
time = 1
facing = 0
pos = 15,0

[State 215　ステート]
type = ChangeState
trigger1 = parent,Anim != [150,155];ガード硬直
value = 7779
;---------------------------------------------------------------------------
;ガードさよなら
[Statedef 7779]
type     = A
movetype = I
physics  = N
ctrl     = 0
anim     = 135
sprpriority = 3

[State 230, 2]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 192, 128

[State 215　ヘルパー消滅]
type = DestroySelf
trigger1 = AnimTime = 0
;---------------------------------------------------------------------------
; アドバンシング（立ち）
[Statedef 4100]
type    = U
movetype= H
physics = N
anim = 150
ctrl = 0
velset = 0,0

[State 1051, 2]
type = nothitby
trigger1 = time <= 1
value = SCA
time = 1

[State 1051, 2]
type = velset
trigger1 = 1
x = 0

[State 3010, 2]
type = helper
trigger1 = time = 0
name = "adv"
helpertype = normal
stateno = 4010
id = 4010
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.ground.back = 16
size.ground.front = 16
size.air.back = 16
size.air.front = 16
size.height = 500
persistent = 0
ignorehitpause = 1

[State 191, Wood 1]
type = Explod
trigger1 = time = 0
anim = 860
id = 860
postype = p1
pos = 17,-68
sprpriority = 3
bindtime = -1
ownpal = 1

[State 1051, 2]
type = changestate
trigger1 = time >= 1
value = 151
;===========================================================================
; アドバンシング（しゃがみ）
[Statedef 4105]
type    = C
movetype= H
physics = N
anim = 151
ctrl = 0
velset = 0,0

[State 1051, 2]
type = nothitby
trigger1 = time <= 1
value = SCA
time = 1

[State 1051, 2]
type = velset
trigger1 = 1
x = 0

[State 3010, 2]
type = helper
trigger1 = time = 0
name = "adv"
helpertype = normal
stateno = 4010
id = 4010
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.ground.back = 16
size.ground.front = 16
size.air.back = 16
size.air.front = 16
size.height = 500
persistent = 0
ignorehitpause = 1

[State 191, Wood 1]
type = Explod
trigger1 = time = 0
anim = 860
id = 860
postype = p1
pos = 17,-18
sprpriority = 3
bindtime = -1
ownpal = 1

[State 1051, 2]
type = changestate
trigger1 = time >= 1
value = 153
;---------------------------------------------------------------------------
; アドバンシングヘルパー
[Statedef 4010]
type    = A
movetype= I
physics = N
anim = 861
ctrl = 0
velset = 10,0
sprpriority = 4

[State 5071, 1]
type = parentvarset
trigger1 = time = 0
v = 24
value = 1

[State 5071, 1]
type = parentvarset
trigger1 = time = 2
v = 24
value = 0

[State 810, Throw Sound]
type = playsnd
trigger1 = animelem = 1
value = 100,0

[State 810, Throw Sound]
type = playsnd
trigger1 = time = 0
value = 3,18

[State 5071, 1]
type = parentvarset
trigger1 = time = 0
v = 16
value = 0

[State 1051, 2]
type = playerpush
trigger1 = 1
value = 1

[State 1051, 2]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 191, Wood 1]
type = Explod
trigger1 = 0;time = 0
trigger1 = enemy,statetype != A
anim = 860
id = 870
postype = p2
pos = 15,0
sprpriority = 3
bindtime = -1
ownpal = 1
removeongethit = 1
facing = -1

[State 1051, 2]
type = destroyself
trigger1 = time = 16
trigger2 = parent,alive = 0
;---------------------------------------------------------------------------
; ガーキャン soff
[Statedef 1800]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 110
velset = 0,0
anim = 1800
ctrl = 0
sprpriority = 2

[State 191, Wood 1]
type = nothitby
trigger1 = Time = 0
value = SCA
time = 10

[State 1020, Blink Yellow]
type = PalFX
trigger1 = Time = 0
time = 3
add = 255,255,255

[State 1000, 7]
type = Helper
trigger1 = Time = 0
trigger1 = numhelper(1001) = 0
helpertype = normal
name = "kq"
stateno = 1801
id = 1001
pos = 0, 0
postype = p1
ownpal = 1
facing = 1

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;ガーキャンkq
[Statedef 1801]
type    = S
movetype= A
physics = S
juggle  = 0;4
poweradd= 0
ctrl = 0
velset = 7*parent,const(size.xscale)+parent,fvar(0),0
anim = 1001
sprpriority = 0
facep2 = 1

[State 191, Wood 1]
type = nothitby
trigger1 = Time = 0
value = SCA
time = 10

[State 200, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA
damage = 5, 0
animtype = Light
guardflag = M
hitflag = MAF
priority = 2, Hit
pausetime = 0, 11
sparkno = s810
guard.sparkno = s840
sparkxy = -10, -76
hitsound = s1, 0
guardsound = s1,5
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -8*const(size.xscale)
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12

[State 1000, 7]
type = Helper
trigger1 = Movehit
trigger1 = numhelper(1003) = 0
helpertype = normal
name = "bom"
stateno = 1802
id = 1003
pos = 0, -50
postype = p2
ownpal = 1
facing = 1
bindtime = 999999
size.xscale = 1
size.yscale = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 1
ignorehitpause = 1

[State 230, 2]
type = screenbound
trigger1 = 1
value = 1

[State 1020, Blink Yellow]
type = PalFX
trigger1 = Time = 0
time = 3
add = 255,255,255

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 1020
time = 0
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = animtime = 0
value = 1002
;---------------------------------------------------------------------------
; 爆弾
[Statedef 1802]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0
anim = 36400
sprpriority = 4
facep2 = 1

[State 301,ヘルパー]
type = Helper
trigger1 = time = 10
triggerall = numhelper(1004) = 0
helpertype = normal
name = "bom"
stateno = 1803
id = 1003
pos = 0, -70
postype = p2
ownpal = 1
facing = -1
size.xscale = 1
size.yscale = 1

[State 230, 2]
type = destroyself
trigger1 = time = 51
;---------------------------------------------------------------------------
; 爆発
[Statedef 1803]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0
anim = 911
sprpriority = 4
facep2 = 1

[State 220, 1]
type = Hitdef
trigger1 = AnimElem = 5
attr = S, SA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 70
pausetime = 0
guard.pausetime = 0
sparkno = S830
guard.sparkno = S840
sparkxy = -20, -63
hitsound = S1,2
guardsound = S1,3
ground.type = High
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = ifelse(-5*.9**((var(42)-1)+!var(42))>-1,-1,-5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(2*((var(42)-1)+!var(42))))>0,0,(-6.5+(2*((var(42)-1)+!var(42)))))
guard.velocity = -8
air.velocity = ifelse(-5*.9**((var(42)-1)+!var(42))>-1,-1,-5*.9**((var(42)-1)+!var(42))), ifelse((-6.5+(2*((var(42)-1)+!var(42))))>0,0,(-6.5+(2*((var(42)-1)+!var(42)))))
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 70,0
givepower = 35,0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 1
yaccel = .35;44
guard.kill = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 100, 2
channel = 0

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 0
value = 300,1

[State 230, 2]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
; 財布
[Statedef 1900]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0
anim = 36400
sprpriority = 0
facep2 = 1

[State 600, 2　ヒット定義]
type = HitDef
trigger1 = time = 0
attr = A, NA
damage    = 0
animtype  = hard
guardflag = MA
priority = 2, Hit
pausetime = 0,0
sparkno = s36400
guard.sparkno = s36400
sparkxy = -10,-77
hitsound = s1, 9999
guardsound = s1,9999
ground.type = High
ground.slidetime = 0
ground.hittime  = 11-ifelse(var(14)=0&&fvar(30)>=9&&ifelse(fvar(30)=9,random%5=0,random%10=0),11,0)
ground.velocity = 0,0
air.velocity = 0*const(size.xscale) * (var(14) = 0),(-6+var(19)*1.3) * (var(14) = 0)
p2facing = 1
getpower = 10 * (var(14) = 0),0
givepower = 0,0
ground.cornerpush.veloff = 0
air.hittime = 0
guard.dist = 0
palfx.sinadd = 90,90,90,4

[State 10001 固定]
type = BindToParent
trigger1 = 1
time = 1
facing = 0
pos = 0, 0

[State 230, 2]
type = changestate
trigger1 = root,stateno = 5110
trigger1 = root,Command = "c"
value = 1901
;---------------------------------------------------------------------------
; 財布2
[Statedef 1901]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0
anim = 9995
sprpriority = 0
facep2 = 1

[State 230, 2]
type = playsnd
trigger1 = anim = 900
lowpriority = 1
value = 300, 0
channel = 12

[State 230, 2]
type = changeanim
trigger1 = anim = 9995
trigger1 = P2BodyDist X < 0
value = 900

[State 600, 2　ヒット定義]
type = HitDef
trigger1 = time = 0
attr = A, NA
damage    = 20
animtype  = hard
guardflag = MA
priority = 2, Hit
pausetime = 0,9
sparkno = s36400
guard.sparkno = s36400
sparkxy = -10,0
hitsound = s1, 99999
guardsound = s1,5
ground.type = High
ground.slidetime = 11
ground.hittime  = 11-ifelse(var(14)=0&&fvar(30)>=9&&ifelse(fvar(30)=9,random%5=0,random%10=0),11,0)
ground.velocity = 3,0
air.velocity = -4*const(size.xscale) * (var(14) = 0),(-6+var(19)*1.3) * (var(14) = 0)
p2facing = 1
getpower = 10 * (var(14) = 0),0
givepower = 10,0
ground.cornerpush.veloff = 0
air.hittime = 15
guard.dist = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4


[State 230, 2]
type = changestate
trigger1 = anim = 900
trigger1 = animtime = 0
value = 1900
;---------------------------------------------------------------------------
; カンフーマンのこのコンスタンツファイルをそのまま使う場合は、
; ここからステートを追加すると整理しやすいでしょう。
;
; ・・・ってエレクバイト先生が言ってるけど、正直使いにくいかも（ﾏﾃｺﾗ
; 冗談です(´・ω:;.:...
;---------------------------------------------------------------------------
;===========================================================================
; 常時監視ステート（－２）
;===========================================================================
;---------------------------------------------------------------------------
; 通常の食らい状態（Statedef 5000～5199間）でも、
; 相手に（「P2StateNo」や「TargetState」等で）制御を奪われても、
; 常に登録したステートコントローラが有効になります。
; サブシステム等を制御する時に重宝するでしょう。
;---------------------------------------------------------------------------
;ガードのときｽﾀﾝﾄﾞの手を表示する
[Statedef -2]

[State -2]
type = helper
trigger1 = Anim = [130,132];ガード受付。
trigger1 = numhelper(7777) = 0
;ｽﾀﾝﾄﾞﾓｰﾄﾞの時は10130のｱﾆﾒなので。
helpertype = normal
postype = p1
pos = 0,0+IfElse(StateType=C,30,0)
;（しゃがみなら30、そうでなければ0）を足す。
sprpriority = 2
ownpal = 1
stateno = 7777
id = 7777
size.xscale = 1
size.yscale = 1

[State -2]
type = helper
trigger1 = numhelper(7778) = 0
trigger1 = Anim = [150,155];ガード硬直
helpertype = normal
postype = p1
pos = 0,0+IfElse(StateType=C,30,0)
sprpriority = 2
ownpal = 1
stateno = 7778
id = 7778
size.xscale = 1
size.yscale = 1
;---------------------------------------------------------------------------
[State -2];スタンド出現時にガード不可にする
type = AssertSpecial
trigger1 = NumHelper(1001) = 1 
flag = nostandguard
flag2 = nocrouchguard
flag3 = noairguard
ignorehitpause = 1
;---------------------------------------------------------------------------
;ｽﾀﾝﾄﾞ被ダメでｽﾀﾝﾄﾞ消滅のとき、本体もダメージ受ける
[State -2]
type = ChangeState
trigger1 = var(11) != 0
trigger1 = stateno != [16502,16504]
value = ifelse(StateType=S,16502,(ifelse(StateType=C,16503,16504)))
ctrl = 0
;---------------------------------------------------------------------------
[State -2,AttackMulSet];補正
Type = AttackMulSet
TriggerAll = NumEnemy 
TriggerAll = Alive
Trigger1 = Enemy,GetHitVar(HitCount) < 5
Value = 0.50+(0.40-(Enemy,GetHitVar(HitCount)*0.01))

[State -2,AttackMulSet]
Type = AttackMulSet
TriggerAll = NumEnemy
TriggerAll = Alive
Trigger1 = Enemy,GetHitVar(HitCount) >= 5
Value = 0.50
;-----------------------------------
[State -2]
type = helper
trigger1 = stateno = 0
trigger1 = numhelper(1900) = 0
helpertype = normal
postype = p1
sprpriority = 2
ownpal = 1
stateno = 1900
id = 1900
size.xscale = 1
size.yscale = 1
;-----------------------------------
[State -2,TargetState]
type = TargetState
trigger1 = NumTarget
trigger1 = !Target,NumPartner
trigger1 = Target,StateNo = 5110
trigger1 = Target,life = 0
trigger1 = roundno > 1
value = 189

[Statedef -2]
;-----------------------------------
;ここは「パワー溜め」のステートで発生させた「Explod」のエフェクト画像を
;特定の条件が有効になれば消す、という処理をしています。

[State -2, エフェクトを消す];パワー溜めステート用
type = RemoveExplod
triggerall = NumExplod(130) > 0
                          ;↑はＩＤナンバー「130」のExplodの画面中の数が0よりも多い、
                          ;つまり１枚以上表示されている時
trigger1 = StateNo != 700 ;ステートが７００（パワー溜め）以外の時
trigger2 = MoveType != I  ;MoveTypeが「I（何もしてない）」以外の時
ID = 130                  ;消すExplodの特定のＩＤナンバーを指定

;-----------------------------------
[State -2, クリップボード]
type = DisplayToClipboard
trigger1 = 1
text = "Cancel=%d, Throw=%d, Button=%d, Body-Distance X=%d,Y=%d \n"
params = var(1),var(2),var(5),floor(P2BodyDist X),floor(P2BodyDist Y)

[State -2, クリップボード（追加専用）]
type = AppendToClipboard
trigger1 = 1
text = "Position X=%d,Y=%d, Velocity X=%f,Y=%f, Hit=%d \n"
params = floor(Pos X),floor(Pos Y),(Vel X),(Vel Y),(MoveHit)
;===========================================================================
; 準常時監視ステート（－３）
;===========================================================================
;---------------------------------------------------------------------------
; こちらは通常の食らい状態以外の「P2StateNo」や「TargetState」等で制御された、
; 作成者が任意に指定した相手側の食らいステートに限り、
; 登録したステートコントローラが有効にはなりません。
; －１や－２と上手く使い分けて行きましょう。
;---------------------------------------------------------------------------

[Statedef -3]
;-----------------------------------
;ここは「ジャンプ」か「バックステップ」をした後に
;着地する音を鳴らす設定をしています。

[State -3, 音を鳴らす]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52  ;着地ステート
trigger2 = stateno = 106 ;バックステップ後の着地ステート
value = 40, 0

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; ■最後に『コモンステート』について■
; コモンステートとは、全キャラ共通の基本動作のステートです。
; 通常は特に変更しない限り、M.U.G.E.N本体のdataフォルダにある
;「common1.cns（コモンステートファイル）」を使います。
;
; しかし、もしもあなたのキャラのステートファイルでcommon1.cnsと同じ番号の
; 基本動作のステートを作った場合は処理が上書きされ、
; common1.cns側の同じ番号のステートは無効になります。
;
; common1.cnsのプログラム優先度は最低に属しているので、
; ステートの作成には番号に注意しないといけません。
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
