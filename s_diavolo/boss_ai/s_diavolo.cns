; 『ぼす』のコンスタンツとステートのファイルです。
;===========================================================================
; コンスタンツ（定数）
;===========================================================================
;---------------------------------------------------------------------------
; ここがキャラの心臓部とも言うべき場所。
; １キャラ単位のライフや大きさなど、標準のステータスを予め決めておく部分。
; このコーナー自体省略出来ません。
;---------------------------------------------------------------------------
; 基本データ
;---------------------------------------------------------------------------
[Data]
life              = 1000   ;ライフ（体力ゲージ）最大値
power             = 3000   ;パワーゲージ最大値（オプション・デフォルトは3000=Lv.3）
attack            = 100    ;攻撃力（デフォルトは１００％）
defence           = 100    ;防御力（デフォルトは１００％）
fall.defence_up   = 50     ;横に倒れている時に一時的に加える防御力（％）
liedown.time      = 60     ;横に倒れている時間（フレーム）
airjuggle         = 80     ;ジャグルポイント限界値（「小ネタ.txt」参照）
sparkno           = 2      ;デフォルトのヒットスパーク（fightfxから）
guard.sparkno     = 40     ;デフォルトのガードスパーク（fightfxから）
KO.echo           = 0      ;ＫＯ時の音声（11,0）にエコーを掛けるか否か（0=掛けない,1=掛ける）
volume            = 0      ;キャラの標準の音量（最小-255・最大255）
IntPersistIndex   = 56     ;次のラウンドへ持ち越せる「Var」のアドレスの範囲を決める（※１）
FloatPersistIndex = 40     ;次のラウンドへ持ち越せる「FVar」のアドレスの範囲を決める（※１）

;---------------------------------------------------------------------------
; ※１：変数のラウンド持ち越し方法
;
; 　変数を次のラウンドへ持ち越したい場合は、↑の
; 　「IntPersistIndex」と「FloatPersistIndex」を使う。
; 　そのやり方はM.U.G.E.Nの説明書にすら載ってないので、ここで例を元に解説。
;
; 　①IntPersistIndex = 23　（Var(23)～Var(59)までを全て次のラウンドへ持ち越せる）
; 　②FloatPersistIndex = 18（FVar(18)～FVar(39)までを全て次のラウンドへ持ち越せる）
;
; 　つまり「Var(**)（Fvar(**)）以降全ての変数を持ち越す」という命令になる。
; 　それ以前のアドレスの変数は全て持ち越さなくなる。
;
; 　全ての変数を持ち越さない場合は、
; 　IntPersistIndexは60以上、FloatPersistIndexは40以上にしておこう。
;
; 　×これはダメ×
; 　　①IntPersistIndex = 10,15,20,25　（15,20,25の部分は意味無し）
; 　　②FloatPersistIndex = 4,16 　　　（16の部分は意味無し）
; 　　これらは最初の数字以外全て無効。
; 
;---------------------------------------------------------------------------
; 改訂前の和訳ＫＦＭではPersistIndexの解釈が無茶苦茶間違ってました。
; 大変失礼致しました。(人・ω・｀)ごめんなさい
; 今回はちゃんと調べて正確な情報を載せてるんで安心してください（苦笑
;---------------------------------------------------------------------------
; サイズ
;---------------------------------------------------------------------------
[Size]
xscale = .833			;水平方向の縮尺（通常１）
yscale = 1.00			;垂直方向の縮尺（通常１）
ground.back      = 15      ;地上にいる時の「後方の物理的な幅」
ground.front     = 16      ;地上にいる時の「前方の物理的な幅」
air.back         = 12      ;空中にいる時の「後方の物理的な幅」
air.front        = 12      ;空中にいる時の「前方の物理的な幅」
height           = 60      ;キャラの物理的な高さ（高いほど相手は飛び越しにくくなる）
attack.dist      = 160     ;相手がガード態勢に入る最低の距離
proj.attack.dist = 90      ;自分の「Projectile」に対して相手がガード態勢に入る最低の距離
proj.doscale     = 0       ;xscaleとyscaleを「Projectile」にも影響させるか否か（0=させない・1=させる）
head.pos         = -5,-90  ;キャラの標準の頭の座標（Bind系で適用される）
mid.pos          = -5,-60  ;キャラの標準の体中心の座標（Bind系で適用される）
shadowoffset     = 0       ;影のＹ軸方向の位置座標
draw.offset      = 0,0     ;キャラの表示座標（Ｘ軸,Ｙ軸）

;---------------------------------------------------------------------------
; 移動速度
;---------------------------------------------------------------------------
[Velocity]
walk.fwd     = 1.6         ;前進速度（Ｘ軸・[Statedef 20]に適用される）
walk.back    = -1.2        ;後退速度（Ｘ軸・[Statedef 20]に適用される）
run.fwd      = 5.8,0       ;前方に走る速度（Ｘ軸,Ｙ軸・[Statedef 100]に適用される）
run.back     = -4.5,-3.8   ;後方に走る速度（Ｘ軸,Ｙ軸・[Statedef 105]に適用される）
jump.neu = 0,-11     ;垂直ジャンプの速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
jump.back = -3.67      ;後方ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
jump.fwd = 3.97        ;前方ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
runjump.back = -4.5,-11	;後ダッシュしながらのジャンプ速度(オプション)
runjump.fwd = 4.5,-11	;前ダッシュしながらのジャンプ速度(オプション)
airjump.neu  = 0,-8.1      ;空中垂直ジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 45]に適用される）
airjump.back = -2.55       ;空中後方ジャンプ速度（Ｘ軸・[Statedef 45]に適用される）
airjump.fwd  = 2.5         ;空中前方ジャンプ速度（Ｘ軸・[Statedef 45]に適用される）

;---------------------------------------------------------------------------
; 運動関係
;---------------------------------------------------------------------------
[Movement]
 airjump.num = 0       ;空中ジャンプが出来る回数
airjump.height  = 35       ;空中ジャンプが出来る最低の高度（Ｙ軸）
yaccel = .6		      ;Ｙ軸加速度（重力）
stand.friction  = .85      ;立っている時の摩擦係数（ステートのPhysicsが「S」の時）
crouch.friction = .82      ;しゃがんでいる時の摩擦係数（ステートのPhysicsが「C」の時）
;---------------------------------------------------------------------------
; 勝利メッセージ
;---------------------------------------------------------------------------
[ja.Quotes]
victory1 = "誰だろうと、わたしの永遠の絶頂を\nおびやかす者は許さない。"
victory2 = "おまえの任務は……\nこれにて終了だな。"
victory3 = "全ての人間は、この時間の中で\n動いた足跡を覚えていないッ！"
victory4 = "おまえが下だ！"
victory5 = "これは「試練」だ"
victory6 = "オレをよく見ろッ！"
victory7 = "この便器に吐き出された\nタンカスどもが！！"
victory8 = "オレは『兵士』ではない"
;===========================================================================
; ステート
;===========================================================================
;---------------------------------------------------------------------------
; ここからはキャラのそれぞれの行動（ステート）を設定する。
; 番号（ステートナンバー）に気を付ければ良いだけで、
; 行動の決め方もステートの数も作りたいキャラによって自由。
;
; 本来ステートは別のファイルとして扱っているものだけど、
; このようにコンスタンツファイルと一緒にまとめる事も可能。
;
; ステートの基本的な設定はおまけフォルダの「テンプレート.txt」を参照。
;===========================================================================
; 基本行動
;===========================================================================
;---------------------------------------------------------------------------
;タイムオーバー（負けた時）
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 0, pos]
type = playsnd
triggerall = var(49) = 10000
trigger1 = time = 0
value = 6,6

[State 0, 円]
type = explod
triggerall = var(49) = 10000
trigger1 = !time
anim = 866
id = 868
pos = 0,-85
postype = p1
sprpriority = 4
ownpal = 1
shadow = 0,0,0
scale = .558,.715
pausemovetime = 999999
supermovetime = 999999

[State 8500, 1]
type = varset
triggerall = var(49) = 10000
trigger1 = !time
var(49) = 0


[State 170, 無敵]
type = NotHitBy
trigger1 = 1 ;トリガーを何も書かず「1」にする事により、『無条件で常に実行させる命令』になる。
value = SCA
time = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;勝利ポーズ分岐（common1.cnsには無いけど、これもコモンステート）
[Statedef 180]
type = S

[State 0, var]
type = varrandom
trigger1 = !time
v = 10
range = 0,1

[State 180, otya]
type=changestate
trigger1= prevstateno=3401
value=prevstateno

[State 180, ステート変更]
type = ChangeState
triggerall = var(10) = 0
trigger1 = matchover
value = 182

[State 180, ステート変更]
type = ChangeState
triggerall = var(10) = 1
trigger1 = matchover
value = 182

[State 180, ステート変更]
type = ChangeState
trigger1 = Time = 0
value = 181

;---------------------------------------------------------------------------
;勝利ポーズ
[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 0, pos]
type = playsnd
triggerall = var(49) = 10000
trigger1 = time = 0
value = 6,6

[State 0, 0]
type = PosAdd
triggerall = var(49) = 10000
trigger1 = !time
x = -10

[State 0, 円]
type = explod
triggerall = var(49) = 10000
trigger1 = !time
anim = 866
id = 868
pos = 0,-85
postype = p1
sprpriority = 4
ownpal = 1
shadow = 0,0,0
scale = .558,.715
pausemovetime = 999999
supermovetime = 999999

[State 8500, 1]
type = varset
triggerall = var(49) = 10000
trigger1 = !time
var(49) = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 181, 0
channel = 0

[State 191, 2] 
type = AssertSpecial
trigger1 = Time = [0,326]
flag = roundnotover

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
;---------------------------------------------------------------------------
;マッチ勝利ポーズ1
[Statedef 182]
type = S
ctrl = 0
anim = 182
velset = 0,0

[State 0, pos]
type = playsnd
triggerall = var(49) = 10000
trigger1 = time = 0
value = 6,6

[State 0, 0]
type = PosAdd
triggerall = var(49) = 10000
trigger1 = !time
x = -10

[State 0, 円]
type = explod
triggerall = var(49) = 10000
trigger1 = !time
anim = 866
id = 868
pos = 0,-85
postype = p1
sprpriority = 4
ownpal = 1
shadow = 0,0,0
scale = .558,.715
pausemovetime = 999999
supermovetime = 999999

[State 8500, 1]
type = varset
triggerall = var(49) = 10000
trigger1 = !time
var(49) = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = !time
value = 182, 0
channel = 0

[State 191, 2] 
type = AssertSpecial
trigger1 = Time = [0,397]
flag = roundnotover

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
;---------------------------------------------------------------------------
;マッチ勝利ポーズ2
[Statedef 183]
type = S
ctrl = 0
anim = 36400
velset = 0,0

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = invisible

[State 0, var]
type = varrandom
trigger1 = !time
v = 10
range = 0,1

[State 0, pos]
type = playsnd
triggerall = var(49) = 10000
trigger1 = time = 0
value = 6,6

[State 0, 0]
type = PosAdd
triggerall = var(49) = 10000
trigger1 = !time
x = -10

[State 0, 円]
type = explod
triggerall = var(49) = 10000
trigger1 = !time
anim = 866
id = 868
pos = 0,-85
postype = p1
sprpriority = 4
ownpal = 1
shadow = 0,0,0
scale = .558,.715
pausemovetime = 999999
supermovetime = 999999

[State 8500, 1]
type = varset
triggerall = var(49) = 10000
trigger1 = !time
var(49) = 0

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "damy"
stateno = 20183
id = 183
pos = 0,0
postype = p1
pausemovetime = 0
supermovetime = 0
size.xscale = .83
size.yscale = 1
facing = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = var(10) = 0
trigger1 = animelem = 1
value = 183, 0
channel = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = var(10) = 1
trigger1 = animelem = 1
value = 183, 1
channel = 0

[State 191, 2] 
type = AssertSpecial
trigger1 = var(10) = 0
trigger1 = Time = [0,469]
flag = roundnotover

[State 191, 2] 
type = AssertSpecial
trigger1 = var(10) = 1
trigger1 = Time = [0,609]
flag = roundnotover

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
;---------------------------------------------------------------------------
;マッチ勝利ポーズ2ダミー
[Statedef 20183]
type = S
ctrl = 0
anim = 183
velset = 0,0

[State 20, 1]
type = VelSet
trigger1 = time >= 14
x = -const(velocity.walk.fwd.x)

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
;---------------------------------------------------------------------------
;トリッシュ
[Statedef 190190]
type    = S
movetype= I
physics = S
ctrl = 0
anim = 9921
sprpriority = -8

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 215]
type = PosSet
trigger1 = 1
y = -10
;---------------------------------------------------------------------------
; PREINTRO
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

[State 3000, ゲージ増加]
type = PowerAdd
trigger1 = time = 0
triggerall = power <= 999
value = 1000

[State 190, 2] ;vsジョルノ
type = ChangeState
triggerall = Time = 0
trigger1 = P2Name = "Giorno" || P4Name = "Giorno"
value = 25191

[State 190, 2] ;vsレクイエムジョルノ
type = ChangeState
triggerall = Time = 0
trigger1 = P2Name = "Requiem Giorno" || P4Name = "Requiem Giorno"
value = 25192

[State 190, 2] ;vsブチャラティ
type = ChangeState
triggerall = Time = 0
trigger1 = P2Name = "Bruno" || P4Name = "Bruno"
trigger2 = P2Name = "bucciarati" || P4Name = "bucciarati"
value = 25193

[State 190, 2] ;vsミスタ、アバッキオ、暗チ
type = ChangeState
triggerall = Time = 0
trigger1 = P2Name = "mista" || P4Name = "mista"
trigger2 = P2Name = "leone abbacchio" || P4Name = "leone abbacchio"
trigger3 = P2Name = "Ghiaccio" || P4Name = "Ghiaccio"
trigger4 = P2Name = "prosciutto_aniki" || P4Name = "prosciutto_aniki"
trigger5 = P2Name = "rizotto" || P4Name = "rizotto"
value = 25194

[State 190, 2] ;vsナランチャ(欠番)
type = null;ChangeState
triggerall = Time = 0
trigger1 = P2Name = "nara" || P4Name = "nara"
value = 25195

[State 190, 2] ;vsフーゴ
type = ChangeState
triggerall = Time = 0
trigger1 = P2Name = "Fugo" || P4Name = "Fugo"
value = 25196

[State 190, 2] ;vsトリッシュ
type = ChangeState
triggerall = Time = 0
trigger1 = P2Name = "trish una" || P4Name = "trish una"
value = 25197

[State 190, 2] ;vsポルナレフ
type = ChangeState
triggerall = Time = 0
trigger1 = P2Name = "Polnareff" || P4Name = "Polnareff"
value = 25198

[State 190, 2] ;Go straight to intro.
type = ChangeState
;triggerall = P2Name != "KawajiriKosaku" || P4Name != "KawajiriKosaku"
trigger1 = Time = 0
value = 191+(random%2)
;---------------------------------------------------------------------------
;イントロ（試合開始前の登場演出アクション）
[Statedef 191]
type = S
ctrl = 0
anim = 191
velset = 0,0

[State 3000, ゲージ増加]
type = PowerAdd
trigger1 = time = 0
triggerall = power <= 999
value = 1000

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 12
value = 190, 0
channel = 0

[State 191, アニメ変更];バトル画面に切り替わった瞬間のフェードインの時、アニメを固定している
type = ChangeAnim
trigger1 = RoundState = 0
value = 191

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状態

[State 191, ステート変更];アニメーションが終われば「通常立ち」のステートに変更する
type = ChangeState
trigger1 = time > 300 
value = 0
;---------------------------------------------------------------------------
;イントロ（試合開始前の登場演出アクション）
[Statedef 192]
type = S
ctrl = 0
anim = 0
velset = 0,0

[State 1000, 7];歩行ダミー
type = Helper
trigger1 = Time = 50
trigger1 = numhelper(192) = 0
helpertype = normal
name = "walk"
stateno = 100192
id = 192
pos = -53,0
postype = p1
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 55
value = 190, 1
channel = 0
persistent = 0

[State 181, EnvColor]
type = Bgpalfx
trigger1 = time = [50,60]
time = 1
invertall = 1
add = 128,0,0
;color = 0
ignorehitpause = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 50
value = 1, 16

[State 3000, ゲージ増加]
type = PowerAdd
trigger1 = time = 0
triggerall = power <= 999
value = 1000

[State 191, アニメ変更]
type = ChangeAnim
trigger1 = RoundState = 0
value = 0

[State 191, アニメ変更]
type = ChangeAnim
trigger1 = time = 114
value = 193

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状態

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = numhelper(192)
trigger1 = time <= 114
trigger2 = time < 50
flag = invisible

[State 191, ステート変更];アニメーションが終われば「通常立ち」のステートに変更する
type = ChangeState
trigger1 = time > 455
value = 0
;---------------------------------------------------------------------------
;歩行ダミー
[Statedef 100192]
type = S
ctrl = 0
anim = 192
velset = 0,0

[State 1000, 速度]
type = velset
trigger1 = 1
x = .8

[State 191, ステート変更];アニメーションが終われば「通常立ち」のステートに変更する
type = destroyself
trigger1 = time = 65
value = 0
;---------------------------------------------------------------------------
;イントロ（VSジョルノ）
[Statedef 25191]
type = S
ctrl = 0
anim = 0
velset = 0,0

[State 1000, 7];歩行ダミー
type = Helper
trigger1 = Time = 50
trigger1 = numhelper(192) = 0
helpertype = normal
name = "walk"
stateno = 100192
id = 192
pos = -53,0
postype = p1
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 55
value = 190, 10
channel = 0
persistent = 0

[State 181, EnvColor]
type = Bgpalfx
trigger1 = time = [50,60]
time = 1
invertall = 1
add = 128,0,0
;color = 0
ignorehitpause = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 50
value = 1, 16

[State 3000, ゲージ増加]
type = PowerAdd
trigger1 = time = 0
triggerall = power <= 999
value = 1000

[State 191, アニメ変更]
type = ChangeAnim
trigger1 = RoundState = 0
value = 0

[State 191, アニメ変更]
type = ChangeAnim
trigger1 = time = 114
value = 193

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状態

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = numhelper(192)
trigger1 = time <= 114
trigger2 = time < 50
flag = invisible

[State 191, ステート変更];アニメーションが終われば「通常立ち」のステートに変更する
type = ChangeState
trigger1 = time > 265
value = 0
;---------------------------------------------------------------------------
;イントロ（VSレクイエムジョルノ）
[Statedef 25192]
type = S
ctrl = 0
anim = 25192
velset = 0,0

[State 1000, 7]
type = Helper
trigger1 = animelem = 3
helpertype = normal
name = "kc"
stateno = 25292
id = 1001
pos = 25, 0
postype = p1
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 5
value = 190, 20
channel = 0
persistent = 0

[State 3000, ゲージ増加]
type = PowerAdd
trigger1 = time = 0
triggerall = power <= 999
value = 1000

[State 191, アニメ変更]
type = ChangeAnim
trigger1 = RoundState = 0
value = 25192

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状

[State 191, ステート変更];アニメーションが終われば「通常立ち」のステートに変更する
type = ChangeState
trigger1 = !animtime
value = 0
;---------------------------------------------------------------------------
;挑発KC
[Statedef 25292]
type    = S
movetype= I
physics = S
poweradd= 0
ctrl = 0
anim = 25292
sprpriority = 0
facep2 = 1

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 25,0

[State 0, 円]
type = explod
trigger1 = !time
anim = 865
id = 867
pos = 0,-85
postype = p1
sprpriority = 4
ownpal = 1
shadow = 0,0,0
scale = .558,.715
pausemovetime = 999999
supermovetime = 999999

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = time = 0
trigger1 = facing != parent,facing

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 0, 円];腕
type = null;explod
trigger1 = time = 6
anim = 9198
id = 9198
pos = 0,0
postype = p1
sprpriority = 3
removetime = -1
ownpal = 1
shadow = 0,0,0
scale = .833,1
;pausemovetime = 999999
;supermovetime = 999999
persistent = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 6, 5

[State -2,***]
type = null;sprpriority
trigger1 = 1
value = 0
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 0
ignorehitpause = 1

[State -2, エフェクトを消す];挑発KQ腕
type = null;RemoveExplod
trigger1 = root,stateno != 195
trigger2 = root,inguarddist
trigger2 = root,command = "holdback"
ID = 9198

[State 230, 2];スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,inguarddist
trigger2 = root,command = "holdback"
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = !animtime
value = 1102
;---------------------------------------------------------------------------
;イントロ（VSブチャ）
[Statedef 25193]
type = S
ctrl = 0
anim = 0
velset = 0,0

[State 1000, 7];歩行ダミー
type = Helper
trigger1 = Time = 50
trigger1 = numhelper(192) = 0
helpertype = normal
name = "walk"
stateno = 100192
id = 192
pos = -53,0
postype = p1
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 55
value = 190, 30
channel = 0
persistent = 0

[State 181, EnvColor]
type = Bgpalfx
trigger1 = time = [50,60]
time = 1
invertall = 1
add = 128,0,0
;color = 0
ignorehitpause = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 50
value = 1, 16

[State 3000, ゲージ増加]
type = PowerAdd
trigger1 = time = 0
triggerall = power <= 999
value = 1000

[State 191, アニメ変更]
type = ChangeAnim
trigger1 = RoundState = 0
value = 0

[State 191, アニメ変更]
type = ChangeAnim
trigger1 = time = 114
value = 193

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状態

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = numhelper(192)
trigger1 = time <= 114
trigger2 = time < 50
flag = invisible

[State 191, ステート変更];アニメーションが終われば「通常立ち」のステートに変更する
type = ChangeState
trigger1 = time > 448
value = 0
;---------------------------------------------------------------------------
;イントロ（VSミスタ、アバ、暗チ）
[Statedef 25194]
type = S
ctrl = 0
anim = 0
velset = 0,0

[State 1000, 7];歩行ダミー
type = Helper
trigger1 = Time = 50
trigger1 = numhelper(192) = 0
helpertype = normal
name = "walk"
stateno = 100192
id = 192
pos = -53,0
postype = p1
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 55
value = 190, 40
channel = 0
persistent = 0

[State 181, EnvColor]
type = Bgpalfx
trigger1 = time = [50,60]
time = 1
invertall = 1
add = 128,0,0
;color = 0
ignorehitpause = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 50
value = 1, 16

[State 3000, ゲージ増加]
type = PowerAdd
trigger1 = time = 0
triggerall = power <= 999
value = 1000

[State 191, アニメ変更]
type = ChangeAnim
trigger1 = RoundState = 0
value = 0

[State 191, アニメ変更]
type = ChangeAnim
trigger1 = time = 114
value = 193

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状態

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = numhelper(192)
trigger1 = time <= 114
trigger2 = time < 50
flag = invisible

[State 191, ステート変更];アニメーションが終われば「通常立ち」のステートに変更する
type = ChangeState
trigger1 = time > 204
value = 0
;---------------------------------------------------------------------------
;イントロ（VSナランチャ）
[Statedef 25195]
type = S
ctrl = 0
anim = 0
velset = 0,0

[State 1000, 7];歩行ダミー
type = Helper
trigger1 = Time = 50
trigger1 = numhelper(192) = 0
helpertype = normal
name = "walk"
stateno = 100192
id = 192
pos = -53,0
postype = p1
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 55
value = 190, 50
channel = 0
persistent = 0

[State 181, EnvColor]
type = Bgpalfx
trigger1 = time = [50,60]
time = 1
invertall = 1
add = 128,0,0
;color = 0
ignorehitpause = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 50
value = 1, 16

[State 3000, ゲージ増加]
type = PowerAdd
trigger1 = time = 0
triggerall = power <= 999
value = 1000

[State 191, アニメ変更]
type = ChangeAnim
trigger1 = RoundState = 0
value = 0

[State 191, アニメ変更]
type = ChangeAnim
trigger1 = time = 114
value = 193

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状態

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = numhelper(192)
trigger1 = time <= 114
trigger2 = time < 50
flag = invisible

[State 191, ステート変更];アニメーションが終われば「通常立ち」のステートに変更する
type = ChangeState
trigger1 = time > 429
value = 0
;---------------------------------------------------------------------------
;イントロ（VSフーゴ）
[Statedef 25196]
type = S
ctrl = 0
anim = 0
velset = 0,0

[State 1000, 7];歩行ダミー
type = Helper
trigger1 = Time = 50
trigger1 = numhelper(192) = 0
helpertype = normal
name = "walk"
stateno = 100192
id = 192
pos = -53,0
postype = p1
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 55
value = 190, 60
channel = 0
persistent = 0

[State 181, EnvColor]
type = Bgpalfx
trigger1 = time = [50,60]
time = 1
invertall = 1
add = 128,0,0
;color = 0
ignorehitpause = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 50
value = 1, 16

[State 3000, ゲージ増加]
type = PowerAdd
trigger1 = time = 0
triggerall = power <= 999
value = 1000

[State 191, アニメ変更]
type = ChangeAnim
trigger1 = RoundState = 0
value = 0

[State 191, アニメ変更]
type = ChangeAnim
trigger1 = time = 114
value = 193

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状態

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = numhelper(192)
trigger1 = time <= 114
trigger2 = time < 50
flag = invisible

[State 191, ステート変更];アニメーションが終われば「通常立ち」のステートに変更する
type = ChangeState
trigger1 = time > 446
value = 0
;---------------------------------------------------------------------------
;イントロ（VSトリッシュ）
[Statedef 25197]
type = S
ctrl = 0
anim = 0
velset = 0,0

[State 1000, 7];歩行ダミー
type = Helper
trigger1 = Time = 50
trigger1 = numhelper(192) = 0
helpertype = normal
name = "walk"
stateno = 100192
id = 192
pos = -53,0
postype = p1
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 55
value = 190, 70
channel = 0
persistent = 0

[State 181, EnvColor]
type = Bgpalfx
trigger1 = time = [50,60]
time = 1
invertall = 1
add = 128,0,0
;color = 0
ignorehitpause = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 50
value = 1, 16

[State 3000, ゲージ増加]
type = PowerAdd
trigger1 = time = 0
triggerall = power <= 999
value = 1000

[State 191, アニメ変更]
type = ChangeAnim
trigger1 = RoundState = 0
value = 0

[State 191, アニメ変更]
type = ChangeAnim
trigger1 = time = 114
value = 193

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状態

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = numhelper(192)
trigger1 = time <= 114
trigger2 = time < 50
flag = invisible

[State 191, ステート変更];アニメーションが終われば「通常立ち」のステートに変更する
type = ChangeState
trigger1 = time > 400
value = 0
;---------------------------------------------------------------------------
;イントロ（VSポル）
[Statedef 25198]
type = S
ctrl = 0
anim = 0
velset = 0,0

[State 1000, 7];歩行ダミー
type = Helper
trigger1 = Time = 50
trigger1 = numhelper(192) = 0
helpertype = normal
name = "walk"
stateno = 100192
id = 192
pos = -53,0
postype = p1
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 55
value = 190, 80
channel = 0
persistent = 0

[State 181, EnvColor]
type = Bgpalfx
trigger1 = time = [50,60]
time = 1
invertall = 1
add = 128,0,0
;color = 0
ignorehitpause = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 50
value = 1, 16

[State 3000, ゲージ増加]
type = PowerAdd
trigger1 = time = 0
triggerall = power <= 999
value = 1000

[State 191, アニメ変更]
type = ChangeAnim
trigger1 = RoundState = 0
value = 0

[State 191, アニメ変更]
type = ChangeAnim
trigger1 = time = 114
value = 193

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状態

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = numhelper(192)
trigger1 = time <= 114
trigger2 = time < 50
flag = invisible

[State 191, ステート変更];アニメーションが終われば「通常立ち」のステートに変更する
type = ChangeState
trigger1 = time > 277
value = 0
;---------------------------------------------------------------------------
; ※２：AssertSpecial
;
; 　他のコントローラでは設定出来ない『特殊な効果』を指定する命令。
; 　設定したトリガーが有効になってる間だけ一時的に適用される。
;
; 　適用出来るパラメータはこのコントローラを一つ設置する場合、最大３つまで。
; 　書式としては「flag」「flag2」「flag3」を順に加えていく形。
; 　flag2とflag3はオプション。ではその特殊効果を全て紹介。
;
; 　Intro          = イントロ（試合開始前の登場演出アクション）の状態になる。イントロステート専用。
; 　Invisible      = 自分の姿を消す。しかし残像（AfterImage）は消せない。
; 　RoundNotOver   = 現在のラウンドを過ぎない。勝利ポーズ専用。
; 　NoBarDisplay   = ライフバーを非表示にする。
; 　NoBG           = ステージの奥の画像を非表示にし、「真っ黒の背景」にする。
; 　NoFG           = ステージの手前の画像を非表示にする。
; 　NoStandGuard   = 立ちガードが出来なくなる。
; 　NoCrouchGuard  = しゃがみガードが出来なくなる。
; 　NoAirGuard     = 空中ガードが出来なくなる。
; 　NoAutoTurn     = 自動で振り向かない。
; 　NoJuggleCheck  = ジャグルをチェックしない。（ジャグルポイントが減らなくなる）
; 　NoKOSnd        = ＫＯ時の音声（11,0）を鳴らさないようにする。画面中に存在する全員に有効なので注意。
; 　NoKOSlow       = ＫＯ時のスローモーションを無効にする。（ＫＯ直前に有効にしないといけない）
; 　NoShadow       = 自分の影を消す。
; 　GlobalNoShadow = 画面中に存在する全てのプレイヤー（ヘルパーとProjectileも含む）の影を消す。
; 　NoMusic        = 演奏しているＢＧＭを止める。（プラグインによってはＢＧＭがバグるので要注意）
; 　NoWalk         = 歩かない。（前か後ろのキーを入力中コントロールが可能の時に勝手に[Statedef 20]にならない）
; 　TimerFreeze    = タイムカウント（制限時間）を停止する。
; 　UnGuardable    = 自分の全ての攻撃が『ガード不可』になる。
;
;---------------------------------------------------------------------------
;挑発
[Statedef 195]
type = S
movetype = I
physics = S
ctrl = 0
anim = 195+var(49)
velset = 0,0
sprpriority = 2

[State 3001, Width]
type = null;Width
trigger1 = 1
edge = 80,0

[State 210, 画像表示優先度]
type = SprPriority
triggerall = var(49) = 10000
trigger1 = !time
value = 0

[State 0, var]
type = null;varset
trigger1 = !time
trigger1 = var(10) > 1
v = 10
value = 0

[State 0, var]
type = null;varadd
trigger1 = !animtime
v = 10
value = 1

[State 180, ステート変更]
type = null;Changeanim
trigger1 = var(10) = 0
trigger1 = !Time
value = 195+var(49)

[State 180, ステート変更]
type = null;Changeanim
trigger1 = var(10) = 1
trigger1 = !Time
value = 196+var(49)

[State 1000, 音を鳴らす]
type = PlaySnd
;trigger1 = var(10) = 0
trigger1 = Time = 1
value = 195, 3
channel = 0

[State 1000, 音を鳴らす]
type = null;PlaySnd
trigger1 = var(10) = 1
trigger1 = Time = 10
value = 195, 1
channel = 0

[State 195, コントロール]
type = CtrlSet
trigger1 = inguarddist
trigger1 = command = "holdback"
value = 1

[State 1000, 7]
type = Helper
triggerall = var(49) = 0
trigger1 = Time = 0
;trigger1 = numhelper(1001) = 0
helpertype = normal
name = "kc"
stateno = 10195
id = 1001
pos = 25, 0
postype = p1
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00

[State 0, 円];腕
type = null;explod
triggerall = var(49) = 10000
trigger1 = time = 13
anim = 9198
id = 9198
pos = -40,-5
postype = p1
sprpriority = 3
removetime = -1
ownpal = 1
shadow = 0,0,0
scale = .833,1
;pausemovetime = 999999
;supermovetime = 999999
persistent = 0

[State 195, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;挑発KC
[Statedef 10195]
type    = S
movetype= I
physics = S
poweradd= 0
ctrl = 0
anim = 10195
sprpriority = 0
facep2 = 1

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 25,0

[State 0, 円]
type = explod
trigger1 = !time
anim = 865
id = 867
pos = 0,-85
postype = p1
sprpriority = 4
ownpal = 1
shadow = 0,0,0
scale = .558,.715
pausemovetime = 999999
supermovetime = 999999

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = time = 0
trigger1 = facing != parent,facing

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 0, 円];腕
type = null;explod
trigger1 = time = 6
anim = 9198
id = 9198
pos = 0,0
postype = p1
sprpriority = 3
removetime = -1
ownpal = 1
shadow = 0,0,0
scale = .833,1
;pausemovetime = 999999
;supermovetime = 999999
persistent = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 6, 5

[State -2,***]
type = null;sprpriority
trigger1 = 1
value = 0
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 0
ignorehitpause = 1

[State -2, エフェクトを消す];挑発KQ腕
type = null;RemoveExplod
trigger1 = root,stateno != 195
trigger2 = root,inguarddist
trigger2 = root,command = "holdback"
ID = 9198

[State 230, 2];スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,inguarddist
trigger2 = root,command = "holdback"
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = !animtime
value = 1102
;---------------------------------------------------------------------------
; 終了(挑発スタンド)
[Statedef 9197]
type    = S
movetype= I
physics = S
juggle  = 0;4
poweradd= 0
ctrl = 0
velset = 0,0
anim = 9197
sprpriority = 0

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = invisible

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 9197
id = 9197
pos = 0,0
postype = p1
sprpriority = 0
bindtime = -1
removeongethit = 1
scale = const(size.xscale),const(size.yscale)
pausemovetime = parent,var(14) * 9999999999999

[State 1000, 3]
type = ModifyExplod
trigger1 = time >= 2
ID = 9197
scale = 1-time/11.5 , 1+time/11.5
pausemovetime = parent,var(14) * 9999999999999

[State 191, 3]
type = PlaySnd
trigger1 = animtime = 0
value = 100,1

[State 0, 円]
type = explod
trigger1 = !time
anim = 866
id = 867
pos = 0,-80
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .508,.645
pausemovetime = 999999
supermovetime = 999999

[State 230, 2]
type = destroyself
trigger1 = animtime = 0
;===========================================================================
; 通常攻撃技
;===========================================================================
;---------------------------------------------------------------------------
; 通常技はそんなに難しいテクニックは使ってないから、
; テンプレートを見ながら確認すれば覚えやすいと思う。
; 基本忘るべからず。
;
; ステートナンバーは、立ち技が２００～２９９、しゃがみ技が４００～４９９、
; ジャンプ技が６００～６９９の間で決めて作るのが一般的。
; しかし強制じゃないので自由に作っちゃってＯＫ。
;---------------------------------------------------------------------------
;立ち弱
[Statedef 200]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 200
sprpriority = 2
facep2 = 1

[State 0, vel]
type = varset
trigger1 = !time
var(8) = 1

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 200, 0+(random%2)
channel = 0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
damage = 15*fvar(1), 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 8, 8
getpower = ifelse(helper(8500),fvar(8)=0,20,20*1.1)
givepower = 20
sparkno = s810
sparkxy = -10, -90
hitsound = s1, 0
guardsound = s1, 5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -4
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1.4,ifelse(var(40)<30,-3+(var(40)*0.2),ifelse((var(40)*0.2)<0,0,(var(40)*0.2)))
air.hittime = 12
fall = 0
fall.recover = 0
air.fall = 0
guard.kill = 0

[state 0, helper]
type = helper
triggerall = !time
trigger1 = !numhelper(1001)
trigger2 = helper(1001),stateno = 1102
trigger3 = helper(1001),stateno = 206 || helper(1001),stateno = 216 || helper(1001),stateno = 226
trigger4 = helper(1001),stateno = 406 || helper(1001),stateno = 416 || helper(1001),stateno = 426
trigger5 = numhelper(1001) < 2
trigger5 = helper(1001),stateno = 417 ||helper(1001),stateno = 418
helpertype = normal
name = "stand"
stateno = 201
id = 1001
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 0.833
size.yscale = 1

[State 200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;本体立ち弱スタンド
[Statedef 201]
type = S
movetype = A
physics = N
ctrl = 0
anim = 201
sprpriority = 1

[State 0, anim]
type = changeanim
trigger1 = root,var(39)
trigger1 = root,movecontact
value = anim
elem = animelemno(0)

[State 0, var]
trigger1 != root,movecontact
type = parentvarset
trigger1 = 1
var(39) = 1

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 15,-10

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, 円]
type = explod
trigger1 = animtime = -1
anim = 866
id = 867
pos = 0,-80
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .508,.645
pausemovetime = 999999
supermovetime = 999999

[State 230, 2];スタンド消去
type = null;destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno != 200
trigger2 = root,stateno = [200,220]
trigger2 = root,stateno = [400,420]
trigger3 = root,stateno = [1000,1050]
trigger4 = root,stateno = [1100,1150]
trigger5 = root,stateno = [1200,1250]
trigger6 = root,stateno = [1400,1460]
trigger7 = root,stateno = 1700
trigger8 = root,stateno = [800,801]
trigger9 = root,stateno = 900
trigger10 = root,stateno = 3000
trigger11 = root,stateno = 3090
trigger12 = root,stateno = 3300
ignorehitpause = 1

[State 230, 2];スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno = 900
trigger3 = root,stateno = 3000
trigger4 = root,stateno = 3090
trigger5 = root,stateno = 3300
trigger6 = root,stateno = 1700
trigger7 = root,stateno = 1750
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 200 && stateno != 201
value = 201
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 210 && stateno != 211
value = 211
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 220 && stateno != 221
value = 221
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 400 && stateno != 401
value = 401
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 410 && stateno != 411
value = 411
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 420 && stateno != 421
value = 421
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1000 && stateno != 1001
value = 1001
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1010 && stateno != 1011
value = 1011
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1030 && stateno != 1031
value = 1031
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1050 && stateno != 1051
value = 1051
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1100 && stateno != 1101
value = 1101
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1120 && stateno != 1121
value = 1121
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1150 && stateno != 1151
value = 1151
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1200 && stateno != 1202
value = 1202
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1400 && stateno != 1430
value = 1430
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1460 && stateno != 1470
value = 1470
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1700 && stateno != 1701
value = 1701
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1750 && stateno != 1751
value = 1751
ignorhitpause = 1

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = animtime = 0
value = 1102
;---------------------------------------------------------------------------
;D立ち弱
[Statedef 205]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 205
sprpriority = 2
facep2 = 1

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < 0

[State 0, vel]
type = varset
trigger1 = !time
var(8) = 1

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 200, 0+(random%2)
channel = 0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "stand"
stateno = 206
id = 1001
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 0.833
size.yscale = 1

[State 200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;本体立ち弱スタンド
[Statedef 206]
type = S
movetype = A
physics = N
ctrl = 0
anim = 206
sprpriority = 1

[State 0, anim]
type = changeanim
trigger1 = root,var(39)
trigger1 = root,movecontact
value = anim
elem = animelemno(0)

[State 0, var]
trigger1 != root,movecontact
type = parentvarset
trigger1 = 1
var(39) = 1

[State 0, btr]
type = bindtoroot
trigger1 = !time
pos = 15,-10

[State 0, btr]
type = velset
trigger1 = time = 0
x = 2

[State 0, btr]
type = velset
trigger1 = time = 5
x = 8

[State 0, btr]
type = veladd
trigger1 = vel x >= 0
trigger1 = time > 5
x = -.5

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State -2, 補正適用]
type=attackmulset
trigger1=!root,var(31)
value=ifelse(root,life <= 300,ifelse(p2movetype=A,1.2*2,1.2),ifelse(p2movetype=A,2,1))

[State -2, 補正適用]
type=attackmulset
trigger1=root,var(31)
value=ifelse(root,life <= 300,ifelse(p2movetype=A,1.8*2,1.8),ifelse(p2movetype=A,3,1.5))

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
damage = 15*root,fvar(1), 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 8, 8
getpower = ifelse(helper(8500),fvar(8)=0,20,20*1.1)
givepower = 20
sparkno = s810
sparkxy = -10, -90
hitsound = s1, 0
guardsound = s1, 5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -4
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1.4,ifelse(var(40)<30,-3+(var(40)*0.2),ifelse((var(40)*0.2)<0,0,(var(40)*0.2)))
air.hittime = 12
fall = 0
fall.recover = 0
air.fall = 0
guard.kill = 0

[State 0, 円]
type = explod
trigger1 = animtime = -1
anim = 866
id = 867
pos = 0,-80
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .508,.645
pausemovetime = 999999
supermovetime = 999999

[State 230, 2];スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno != 205
trigger2 = root,stateno = [200,220]
trigger3 = root,stateno = [400,420]
trigger4 = root,stateno = [1000,1050]
trigger5 = root,stateno = [1100,1150]
trigger6 = root,stateno = [1200,1250]
trigger7 = root,stateno = [1400,1460]
trigger8 = root,stateno = 1700
trigger9 = root,stateno = [800,801]
trigger10 = root,stateno = 900
trigger11 = root,stateno = 1000 || root,stateno = 1020 || root,stateno = 1030 || root,stateno = 1050
trigger12 = root,stateno = 1100 || root,stateno = 1120 || root,stateno = 1150
trigger13 = root,stateno = 1200
trigger14 = root,stateno = 1400 || root,stateno = 1460
trigger15 = root,stateno = 1700 || root,stateno = 1750
trigger16 = root,stateno = 3000
trigger17 = root,stateno = 3090
trigger18 = root,stateno = 3300
ignorehitpause = 1

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = animtime = 0
value = 1102
;---------------------------------------------------------------------------
;立ち中
[Statedef 210]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0
anim = 210
sprpriority = -1

[State 0, EB解除]
type = varset
triggerall = !time
trigger1 = (command = "y" || command = "z")
var(8) = 0

[State 210, アニメ変更]
type = null;ChangeAnim
trigger1 = AnimElemTime(5) > 0 && AnimElemTime(6) <= 0
trigger1 = movecontact
value = 210
elem = 6
ignorehitpause = 1
persistent = 0

[State 210, 画像表示優先度]
type = SprPriority
trigger1 = AnimElem = 5
value = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 210, 0+(random%2)
channel = 0
[State 210, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = Medium
damage    = 25*fvar(1),0
guardflag = MA
pausetime = 12,12
getpower = ifelse(helper(8500),fvar(8)=0,30,30*1.1)
givepower = 25
sparkno = s820
sparkxy = -10,-70
hitsound = s1, 17
guardsound = s1,5
ground.type = High
ground.slidetime = 19
ground.hittime  = 19
guard.slidetime = 15
ground.hittime  = 15
ground.velocity = -5
air.velocity = -2.5,ifelse(var(40)<30,-4+(var(40)*0.2),ifelse((var(40)*0.2)<0,0,(var(40)*0.2)))
fall = 0
fall.recover = 0
air.fall = 0
guard.kill = 0

[state 0, helper]
type = helper
triggerall = !time
trigger1 = !numhelper(1001)
trigger2 = helper(1001),stateno = 1102
trigger3 = helper(1001),stateno = 206 || helper(1001),stateno = 216 || helper(1001),stateno = 226
trigger4 = helper(1001),stateno = 406 || helper(1001),stateno = 416 || helper(1001),stateno = 426
trigger5 = numhelper(1001) < 2
trigger5 = helper(1001),stateno = 417 ||helper(1001),stateno = 418
helpertype = normal
name = "stand"
stateno = 211
id = 1001
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 0.833
size.yscale = 1

[State 210, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;本体立ち中スタンド
[Statedef 211]
type = S
movetype = A
physics = N
ctrl = 0
anim = 211
sprpriority = 1

[State 0, anim]
type = changeanim
trigger1 = root,var(39)
trigger1 = root,movecontact
value = anim
elem = animelemno(0)

[State 0, var]
trigger1 != root,movecontact
type = parentvarset
trigger1 = 1
var(39) = 1

[State 210, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 3
value = 0, 1

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 0,-10

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, 円]
type = explod
trigger1 = animtime = -1
anim = 866
id = 867
pos = 0,-80
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .508,.645
pausemovetime = 999999
supermovetime = 999999

[State 230, 2];スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno = 900
trigger3 = root,stateno = 3000
trigger4 = root,stateno = 3090
trigger5 = root,stateno = 3300
trigger6 = root,stateno = 1700
trigger7 = root,stateno = 1750
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 200 && stateno != 201
value = 201
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 210 && stateno != 211
value = 211
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 220 && stateno != 221
value = 221
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 400 && stateno != 401
value = 401
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 410 && stateno != 411
value = 411
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 420 && stateno != 421
value = 421
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1000 && stateno != 1001
value = 1001
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1010 && stateno != 1011
value = 1011
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1030 && stateno != 1031
value = 1031
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1050 && stateno != 1051
value = 1051
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1100 && stateno != 1101
value = 1101
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1120 && stateno != 1121
value = 1121
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1150 && stateno != 1151
value = 1151
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1200 && stateno != 1202
value = 1202
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1400 && stateno != 1430
value = 1430
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1460 && stateno != 1470
value = 1470
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1700 && stateno != 1701
value = 1701
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1750 && stateno != 1751
value = 1751
ignorhitpause = 1

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = animtime = 0
value = 1102
;---------------------------------------------------------------------------
;D立ち中
[Statedef 215]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0
anim = 215
sprpriority = -1

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < 0

[State 0, EB解除]
type = varset
triggerall = !time
trigger1 = (command = "y" || command = "z")
var(8) = 0

[State 210, アニメ変更]
type = null;ChangeAnim
trigger1 = AnimElemTime(5) > 0 && AnimElemTime(6) <= 0
trigger1 = movecontact
value = 210
elem = 6
ignorehitpause = 1
persistent = 0

[State 210, 画像表示優先度]
type = SprPriority
trigger1 = AnimElem = 5
value = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 210, 0+(random%2)
channel = 0

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "stand"
stateno = 216
id = 1001
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 0.833
size.yscale = 1

[State 210, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;本体立ち中スタンド
[Statedef 216]
type = S
movetype = A
physics = N
ctrl = 0
anim = 216
sprpriority = 1

[State 0, anim]
type = changeanim
trigger1 = root,var(39)
trigger1 = root,movecontact
value = anim
elem = animelemno(0)

[State 0, var]
trigger1 != root,movecontact
type = parentvarset
trigger1 = 1
var(39) = 1

[State 210, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 3
value = 0, 1

[State 0, btr]
type = bindtoroot
trigger1 = time = 0
pos = 0,-10

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, 円]
type = explod
trigger1 = animtime = -1
anim = 866
id = 867
pos = 0,-80
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .508,.645
pausemovetime = 999999
supermovetime = 999999

[State 0, btr]
type = velset
trigger1 = time = 0
x = 2

[State 0, btr]
type = velset
trigger1 = time = 5
x = 8

[State 0, btr]
type = veladd
trigger1 = vel x >= 0
trigger1 = time > 5
x = -.5

[State -2, 補正適用]
type=attackmulset
trigger1=!root,var(31)
value=ifelse(root,life <= 300,ifelse(p2movetype=A,1.2*2,1.2),ifelse(p2movetype=A,2,1))

[State -2, 補正適用]
type=attackmulset
trigger1=root,var(31)
value=ifelse(root,life <= 300,ifelse(p2movetype=A,1.8*2,1.8),ifelse(p2movetype=A,3,1.5))

[State 210, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = Medium
damage    = 25*root,fvar(1),0
guardflag = MA
pausetime = 12,12
getpower = ifelse(helper(8500),fvar(8)=0,30,30*1.1)
givepower = 25
sparkno = s820
sparkxy = -10,-70
hitsound = s1, 1
guardsound = s1,5
ground.type = High
ground.slidetime = 19
ground.hittime  = 19
guard.slidetime = 15
ground.hittime  = 15
ground.velocity = -5
air.velocity = -2.5,ifelse(var(40)<30,-4+(var(40)*0.2),ifelse((var(40)*0.2)<0,0,(var(40)*0.2)))
fall = 0
fall.recover = 0
air.fall = 0
guard.kill = 0

[State 230, 2];スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno != 215
trigger2 = root,stateno = [200,220]
trigger3 = root,stateno = [400,420]
trigger4 = root,stateno = [1000,1050]
trigger5 = root,stateno = [1100,1150]
trigger6 = root,stateno = [1200,1250]
trigger7 = root,stateno = [1400,1460]
trigger8 = root,stateno = 1700
trigger9 = root,stateno = [800,801]
trigger10 = root,stateno = 900
trigger11 = root,stateno = 1000 || root,stateno = 1020 || root,stateno = 1030 || root,stateno = 1050
trigger12 = root,stateno = 1100 || root,stateno = 1120 || root,stateno = 1150
trigger13 = root,stateno = 1200
trigger14 = root,stateno = 1400 || root,stateno = 1460
trigger15 = root,stateno = 1700 || root,stateno = 1750
trigger16 = root,stateno = 3000
trigger17 = root,stateno = 3090
trigger18 = root,stateno = 3300
ignorehitpause = 1

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = animtime = 0
value = 1102
;---------------------------------------------------------------------------
;立ち強
[Statedef 220]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0
anim = 220
sprpriority = 2

[State 210, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, NA
sprpriority = 3
animtype  = Hard
damage    = 38*fvar(1),0
guardflag = MA
pausetime = 18,18
getpower = ifelse(helper(8500),fvar(8)=0,40,40*1.1)
givepower = 30
sparkno = s830
sparkxy = -10,-60
hitsound = s1, 2
guardsound = s1,5
ground.type = High
ground.slidetime = 27
ground.hittime  = 27
guard.slidetime = 22
ground.hittime  = 22
ground.velocity = -7
air.velocity = -2.5,ifelse(var(40)<30,-4+(var(40)*0.2),ifelse((var(40)*0.2)<0,0,(var(40)*0.2)))
fall = 0
fall.recover = 0
air.fall = 0
guard.kill = 0

[State 0, EB解除]
type = varset
triggerall = !time
trigger1 = (command = "y" || command = "z")
var(8) = 0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 220, 0+(random%2)
channel = 0

[state 0, helper]
type = helper
triggerall = !time
trigger1 = !numhelper(1001)
trigger2 = helper(1001),stateno = 1102
trigger3 = helper(1001),stateno = 206 || helper(1001),stateno = 216 || helper(1001),stateno = 226
trigger4 = helper(1001),stateno = 406 || helper(1001),stateno = 416 || helper(1001),stateno = 426
trigger5 = numhelper(1001) < 2
trigger5 = helper(1001),stateno = 417 ||helper(1001),stateno = 418
helpertype = normal
name = "stand"
stateno = 221
id = 1001
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 0.833
size.yscale = 1

[State 240, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;本体立ち強スタンド
[Statedef 221]
type = S
movetype = A
physics = N
ctrl = 0
anim = 221
sprpriority = 1

[State 0, anim]
type = changeanim
trigger1 = root,var(39)
trigger1 = root,movecontact
value = anim
elem = animelemno(0)

[State 0, var]
trigger1 != root,movecontact
type = parentvarset
trigger1 = 1
var(39) = 1

[State 240, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 3
value = 0, 2

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 0,-10

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, 円]
type = explod
trigger1 = animtime = -1
anim = 866
id = 867
pos = 0,-80
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .508,.645
pausemovetime = 999999
supermovetime = 999999

[State 230, 2];スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno = 900
trigger3 = root,stateno = 3000
trigger4 = root,stateno = 3090
trigger5 = root,stateno = 3300
trigger6 = root,stateno = 1700
trigger7 = root,stateno = 1750
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 200 && stateno != 201
value = 201
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 210 && stateno != 211
value = 211
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 220 && stateno != 221
value = 221
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 400 && stateno != 401
value = 401
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 410 && stateno != 411
value = 411
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 420 && stateno != 421
value = 421
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1000 && stateno != 1001
value = 1001
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1010 && stateno != 1011
value = 1011
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1030 && stateno != 1031
value = 1031
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1050 && stateno != 1051
value = 1051
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1100 && stateno != 1101
value = 1101
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1120 && stateno != 1121
value = 1121
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1150 && stateno != 1151
value = 1151
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1200 && stateno != 1202
value = 1202
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1400 && stateno != 1430
value = 1430
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1460 && stateno != 1470
value = 1470
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1700 && stateno != 1701
value = 1701
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1750 && stateno != 1751
value = 1751
ignorhitpause = 1

[State 230, 2]
type = null;changestate
trigger1 = root,stateno = 3000 && stateno != 3040
value = 3040
ignorhitpause = 1

[State 230, 2]
type = null;changestate
trigger1 = root,stateno = 3090 && stateno != 3095
value = 3095
ignorhitpause = 1

[State 230, 2]
type = null;changestate
trigger1 = root,stateno = 3300 && stateno != 3340
value = 3340
ignorhitpause = 1

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = animtime = 0
value = 1102
;---------------------------------------------------------------------------
;D立ち強
[Statedef 225]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0
anim = 225
sprpriority = 2

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < 0

[State 0, EB解除]
type = varset
triggerall = !time
trigger1 = (command = "y" || command = "z")
var(8) = 0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 220, 0+(random%2)
channel = 0

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "stand"
stateno = 226
id = 1001
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 0.833
size.yscale = 1

[State 240, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;本体D立ち強スタンド
[Statedef 226]
type = S
movetype = A
physics = N
ctrl = 0
anim = 226
sprpriority = 1

[State 0, anim]
type = changeanim
trigger1 = root,var(39)
trigger1 = root,movecontact
value = anim
elem = animelemno(0)

[State 0, var]
trigger1 != root,movecontact
type = parentvarset
trigger1 = 1
var(39) = 1

[State 240, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 3
value = 0, 2

[State 0, btr]
type = bindtoroot
trigger1 = time = 0
pos = 0,-10

[State 0, btr]
type = velset
trigger1 = time = 0
x = 2

[State 0, btr]
type = velset
trigger1 = time = 5
x = 8

[State 0, btr]
type = veladd
trigger1 = vel x >= 0
trigger1 = time > 5
trigger2 = vel x >= 0
trigger2 = p2bodydist x < 60
trigger2 = time >= 0
x = ifelse(p2bodydist x < 20,-1,-0.5)

[State -2, 補正適用]
type=attackmulset
trigger1=!root,var(31)
value=ifelse(root,life <= 300,ifelse(p2movetype=A,1.2*2,1.2),ifelse(p2movetype=A,2,1))

[State -2, 補正適用]
type=attackmulset
trigger1=root,var(31)
value=ifelse(root,life <= 300,ifelse(p2movetype=A,1.8*2,1.8),ifelse(p2movetype=A,3,1.5))

[State 210, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, NA
sprpriority = 3
animtype  = Hard
damage    = 38*root,fvar(1),0
guardflag = MA
pausetime = 18,18
getpower = ifelse(helper(8500),fvar(8)=0,40,40*1.1)
givepower = 30
sparkno = s830
sparkxy = -10,-60
hitsound = s1, 2
guardsound = s1,5
ground.type = High
ground.slidetime = 24
ground.hittime  = 24
guard.slidetime = 19
ground.hittime  = 19
ground.velocity = -7
air.velocity = -2.5,ifelse(var(40)<30,-4+(var(40)*0.2),ifelse((var(40)*0.2)<0,0,(var(40)*0.2)))
fall = 0
fall.recover = 0
air.fall = 0
guard.kill = 0

[State 0, 円]
type = explod
trigger1 = animtime = -1
anim = 866
id = 867
pos = 0,-80
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .508,.645
pausemovetime = 999999
supermovetime = 999999

[State 230, 2];スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno != 225
trigger2 = root,stateno = [200,220]
trigger3 = root,stateno = [400,420]
trigger4 = root,stateno = [1000,1050]
trigger5 = root,stateno = [1100,1150]
trigger6 = root,stateno = [1200,1250]
trigger7 = root,stateno = [1400,1460]
trigger8 = root,stateno = 1700
trigger9 = root,stateno = [800,801]
trigger10 = root,stateno = 900
trigger11 = root,stateno = 1000 || root,stateno = 1020 || root,stateno = 1030 || root,stateno = 1050
trigger12 = root,stateno = 1100 || root,stateno = 1120 || root,stateno = 1150
trigger13 = root,stateno = 1200
trigger14 = root,stateno = 1400 || root,stateno = 1460
trigger15 = root,stateno = 1700 || root,stateno = 1750
trigger16 = root,stateno = 3000
trigger17 = root,stateno = 3090
trigger18 = root,stateno = 3300
ignorehitpause = 1

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = animtime = 0
value = 1102
;---------------------------------------------------------------------------
;前立ち強
[Statedef 250]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0
anim = 250
sprpriority = 2

[State 0, EB解除]
type = varset
triggerall = !time
trigger1 = command = "holdfwd"
trigger1 = command = "z"
var(8) = 0


[State 1027, 位置]
type = velset
trigger1 = time = 7
x = 3

[State 210, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, NA
sprpriority = 3
animtype  = Medium
damage    = 40*fvar(1)
guardflag = MA
pausetime = 14,14
getpower = ifelse(helper(8500),fvar(8)=0,80,80*1.1)
givepower = 40
sparkno = s830
sparkxy = -10,-60
hitsound = s1, 11
guardsound = s1,5
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
guard.hittime  = 16
guard.slidetime = 16
ground.velocity = -3.5
air.velocity = -2.5,ifelse(var(40)<30,3+(var(40)*0.2),ifelse((var(40)*0.2)<0,0,(var(40)*0.2)))
fall.recover = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 100, 22
channel = 0

[state 0, helper]
type = helper
trigger1 = animelem = 1
helpertype = normal
name = "stand"
stateno = 251
id = 241
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = .9
size.yscale = 1.07

[State 240, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;本体前立ち強スタンド
[Statedef 251]
type = S
movetype = A
physics = N
ctrl = 0
anim = 251
sprpriority = 0

[State 0, anim]
type = changeanim
trigger1 = root,var(39)
trigger1 = root,movecontact
value = anim
elem = animelemno(0)

[State 0, var]
trigger1 != root,movecontact
type = parentvarset
trigger1 = 1
var(39) = 1

[State 240, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 5
value = 0, 2

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 12,-10

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, 円]
type = explod
trigger1 = animtime = -1
anim = 866
id = 867
pos = 0,-70
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .508,.645
pausemovetime = 999999
supermovetime = 999999

[State 0, end]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,stateno != 250 
;===========================================================================
;---------------------------------------------------------------------------
; ２Ｄ格ゲーでのしゃがみ通常攻撃は空中ガードが不可な作品が結構多い。
; カンフーマンも例外ではなかったみたい。
; ↓のしゃがみ弱パンチのguardflagが「L」のみになってるのに注目。
; 意味は「Low」。相手はこのしゃがみ弱パンチをガードする場合、
; 「しゃがみガードだけしか出来ない」という事になる。
;
; それ以外は簡単。
;---------------------------------------------------------------------------
;しゃがみ弱
[Statedef 400]
type    = C
movetype= A
physics = C
ctrl = 0
anim = 400
sprpriority = 2
facep2 = 1

[State 400, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 400, 0+(random%2)
channel = 0

[State 200, 1]
type = Hitdef
trigger1 = AnimElem = 2
attr = C, NA
hitflag = MAF
guardflag = L
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = 14*fvar(1)
pausetime = 8,7
getpower = ifelse(helper(8500),fvar(8)=0,20,20*1.1)
givepower = 20
guard.pausetime = 8,7
sparkno = s810
guard.sparkno = S840
sparkxy = -10,-60
hitsound = S1,0
guardsound = S1,5
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -5
guard.velocity = -4
air.velocity = -3
ground.cornerpush.veloff = -5
air.cornerpush.veloff = 0
persistent = 0
fall = 0
fall.recover = 0
air.fall = 0
yaccel = .44

[state 0, helper]
type = helper
triggerall = !time
trigger1 = !numhelper(1001)
trigger2 = helper(1001),stateno = 1102
trigger3 = helper(1001),stateno = 206 || helper(1001),stateno = 216 || helper(1001),stateno = 226
trigger4 = helper(1001),stateno = 406 || helper(1001),stateno = 416 || helper(1001),stateno = 426
trigger5 = numhelper(1001) < 2
trigger5 = helper(1001),stateno = 417 ||helper(1001),stateno = 418
helpertype = normal
name = "stand"
stateno = 401
id = 1001
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 0.833
size.yscale = 1

[State 400, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11 ;しゃがむステートへ（コモンステート）
Ctrl = 1
;---------------------------------------------------------------------------
;本体しゃがみ弱スタンド
[Statedef 401]
type = S
movetype = A
physics = N
ctrl = 0
anim = 401
sprpriority = 1

[State 0, anim]
type = changeanim
trigger1 = root,var(39)
trigger1 = root,movecontact
value = anim
elem = animelemno(0)

[State 0, var]
trigger1 != root,movecontact
type = parentvarset
trigger1 = 1
var(39) = 1

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 15,-10

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, 円]
type = null;explod
trigger1 = animtime = -1
anim = 866
id = 867
pos = 0,-80
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .508,.645
pausemovetime = 999999
supermovetime = 999999

[State 0, EB解除]
type = null;varset
triggerall = time = 5
trigger1 = command = "holdfwd"
trigger1 = command = "z"
var(23) = 1

[State 230, 2];スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno = 900
trigger3 = root,stateno = 3000
trigger4 = root,stateno = 3090
trigger5 = root,stateno = 3300
trigger6 = root,stateno = 1700
trigger7 = root,stateno = 1750
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 200 && stateno != 201
value = 201
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 210 && stateno != 211
value = 211
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 220 && stateno != 221
value = 221
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 400 && stateno != 401
trigger2 = root,stateno = 400 && root,animelemtime(1) = 0  && time != 0
value = 401
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 410 && stateno != 411
value = 411
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 420 && stateno != 421
value = 421
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1000 && stateno != 1001
value = 1001
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1010 && stateno != 1011
value = 1011
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1030 && stateno != 1031
value = 1031
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1050 && stateno != 1051
value = 1051
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1100 && stateno != 1101
value = 1101
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1120 && stateno != 1121
value = 1121
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1150 && stateno != 1151
value = 1151
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1200 && stateno != 1202
value = 1202
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1400 && stateno != 1430
value = 1430
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1460 && stateno != 1470
value = 1470
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1700 && stateno != 1701
value = 1701
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1750 && stateno != 1751
value = 1751
ignorhitpause = 1

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = animtime = 0
value = 1102
;---------------------------------------------------------------------------
;Dしゃがみ弱
[Statedef 405]
type    = C
movetype= A
physics = C
ctrl = 0
anim = 405
sprpriority = 2
facep2 = 1

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < 0

[State 400, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 400, 0+(random%2)
channel = 0

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "stand"
stateno = 406
id = 1001
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 0.833
size.yscale = 1

[State 400, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11 ;しゃがむステートへ（コモンステート）
Ctrl = 1
;---------------------------------------------------------------------------
;Dしゃがみ弱スタンド
[Statedef 406]
type = S
movetype = A
physics = N
ctrl = 0
anim = 406
sprpriority = 1

[State 0, anim]
type = changeanim
trigger1 = root,var(39)
trigger1 = root,movecontact
value = anim
elem = animelemno(0)

[State 0, var]
trigger1 != root,movecontact
type = parentvarset
trigger1 = 1
var(39) = 1

[State 0, btr]
type = bindtoroot
trigger1 = !time
pos = 15,-10

[State 0, btr]
type = velset
trigger1 = time = 0
x = 2

[State 0, btr]
type = velset
trigger1 = time = 5
x = 8

[State 0, btr]
type = veladd
trigger1 = vel x >= 0
trigger1 = time > 5
x = -.5

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, 円]
type = null;explod
trigger1 = animtime = -1
anim = 866
id = 867
pos = 0,-80
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .508,.645
pausemovetime = 999999
supermovetime = 999999

[State -2, 補正適用]
type=attackmulset
trigger1=!root,var(31)
value=ifelse(root,life <= 300,ifelse(p2movetype=A,1.2*2,1.2),ifelse(p2movetype=A,2,1))

[State -2, 補正適用]
type=attackmulset
trigger1=root,var(31)
value=ifelse(root,life <= 300,ifelse(p2movetype=A,1.8*2,1.8),ifelse(p2movetype=A,3,1.5))

[State 200, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = C, NA
hitflag = MAF
guardflag = L
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = 14*root,fvar(1)
pausetime = 8,7
getpower = ifelse(helper(8500),fvar(8)=0,20,20*1.1)
givepower = 20
guard.pausetime = 8,7
sparkno = s810
guard.sparkno = S840
sparkxy = -10,-60
hitsound = S1,0
guardsound = S1,5
ground.type = Low
air.type = Low
ground.slidetime = 11
ground.hittime = 11
air.hittime = 11
guard.ctrltime = 11
ground.velocity = -5
guard.velocity = -4
air.velocity = -3
ground.cornerpush.veloff = -5
air.cornerpush.veloff = 0
persistent = 0
fall = 0
fall.recover = 0
air.fall = 0
yaccel = .44

[State 230, 2];スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno = [200,220]
trigger3 = root,stateno != 405
trigger3 = root,stateno = [400,420]
trigger4 = root,stateno = [1000,1050]
trigger5 = root,stateno = [1100,1150]
trigger6 = root,stateno = [1200,1250]
trigger7 = root,stateno = [1400,1460]
trigger8 = root,stateno = 1700
trigger9 = root,var(28) = 0
trigger9 = time > 5
trigger9 = numhelper(1001) >= 2
trigger9 = helper(1001),stateno != 1102
trigger10 = root,var(28) = 1
trigger10 = time > 5
trigger10 = numhelper(1001) >= 3
trigger10 = helper(1001),stateno != 1102
trigger11 = root,stateno = [800,801]
trigger12 = root,stateno = 900
trigger13 = root,stateno = 1000 || root,stateno = 1020 || root,stateno = 1030 || root,stateno = 1050
trigger14 = root,stateno = 1100 || root,stateno = 1120 || root,stateno = 1150
trigger15 = root,stateno = 1200
trigger16 = root,stateno = 1400 || root,stateno = 1460
trigger17 = root,stateno = 1700 || root,stateno = 1750
trigger18 = root,stateno = 3000
trigger19 = root,stateno = 3090
trigger20 = root,stateno = 3300
ignorehitpause = 1

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = animtime = 0
value = 1102
;---------------------------------------------------------------------------
; 効果の違う攻撃を連続でヒットさせる場合は、複数のHitDefが必要。
; ↓のしゃがみ強パンチのguardflagの効果がそれぞれ別々（MとMA）なように、
; パラメータが数値じゃなければ特に。こればかりはどうしようもない。
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;しゃがみ中
[Statedef 410]
type    = C
movetype= A
physics = C
ctrl = 0
anim = 410
sprpriority = 2
facep2 = 1

[State 400, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 1

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 410, 0+(random%2)
channel = 0

[State 210, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, NA
sprpriority = 2
animtype  = Medium
damage    = 20*fvar(1)
guardflag = L
pausetime = 10,10
getpower = ifelse(helper(8500),fvar(8)=0,40,40*1.1)
givepower = 25
sparkno = s820
sparkxy = -10,-30
hitsound = s1, 17
guardsound = s1,5
ground.type = trip
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -1.5
guard.velocity = -2
air.velocity = -1.5,-1
fall = 1
air.fall = 1
fall.recover = 0
p2stateno = 10425

[state 0, helper]
type = helper
triggerall = !time
trigger1 = !numhelper(1001)
trigger2 = helper(1001),stateno = 1102
trigger3 = helper(1001),stateno = 206 || helper(1001),stateno = 216 || helper(1001),stateno = 226
trigger4 = helper(1001),stateno = 406 || helper(1001),stateno = 416 || helper(1001),stateno = 426
trigger5 = numhelper(1001) < 2
trigger5 = helper(1001),stateno = 417 ||helper(1001),stateno = 418
helpertype = normal
name = "stand"
stateno = 411
id = 1001
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 0.833
size.yscale = 1

[State 400, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11 ;しゃがむステートへ（コモンステート）
Ctrl = 1
;---------------------------------------------------------------------------
;本体しゃがみ中スタンド
[Statedef 411]
type = S
movetype = A
physics = N
ctrl = 0
anim = 411
sprpriority = 1

[State 0, anim]
type = changeanim
trigger1 = root,var(39)
trigger1 = root,movecontact
value = anim
elem = animelemno(0)

[State 0, var]
trigger1 != root,movecontact
type = parentvarset
trigger1 = 1
var(39) = 1

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 15,-10

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, エフェクト]
type = explod
trigger1 = time = 7
anim = 919
id = 919
pos = -30,-25
postype = p1
sprpriority = 4
ownpal = 1
shadow = 0,0,0
scale = 1,.5
pausemovetime = 0
supermovetime = 0

[State 230, 2];スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno = 900
trigger3 = root,stateno = 3000
trigger4 = root,stateno = 3090
trigger5 = root,stateno = 3300
trigger6 = root,stateno = 1700
trigger7 = root,stateno = 1750
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 200 && stateno != 201
value = 201
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 210 && stateno != 211
value = 211
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 220 && stateno != 221
value = 221
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 400 && stateno != 401
value = 401
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 410 && stateno != 411
value = 411
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 420 && stateno != 421
value = 421
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1000 && stateno != 1001
value = 1001
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1010 && stateno != 1011
value = 1011
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1030 && stateno != 1031
value = 1031
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1050 && stateno != 1051
value = 1051
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1100 && stateno != 1101
value = 1101
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1120 && stateno != 1121
value = 1121
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1150 && stateno != 1151
value = 1151
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1200 && stateno != 1202
value = 1202
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1400 && stateno != 1430
value = 1430
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1460 && stateno != 1470
value = 1470
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1700 && stateno != 1701
value = 1701
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1750 && stateno != 1751
value = 1751
ignorhitpause = 1

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = animtime = 0
value = 1102
;---------------------------------------------------------------------------
;Dしゃがみ中
[Statedef 415]
type    = C
movetype= A
physics = C
ctrl = 0
anim = 415
sprpriority = 2
facep2 = 1

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < 0

[State 400, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 1

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 410, 0+(random%2)
channel = 0

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "stand"
stateno = 416
id = 1001
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 0.833
size.yscale = 1

[State 400, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11 ;しゃがむステートへ（コモンステート）
Ctrl = 1
;---------------------------------------------------------------------------
;Dしゃがみ中スタンド
[Statedef 416]
type = S
movetype = A
physics = N
ctrl = 0
anim = 416
sprpriority = 1

[State 0, anim]
type = changeanim
trigger1 = root,var(39)
trigger1 = root,movecontact
value = anim
elem = animelemno(0)

[State 0, var]
trigger1 != root,movecontact
type = parentvarset
trigger1 = 1
var(39) = 1

[State 0, btr]
type = bindtoroot
trigger1 = !time
pos = 15,-10

[State 0, btr]
type = velset
trigger1 = time = 0
x = 2

[State 0, btr]
type = velset
trigger1 = time = 5
x = 7

[State 0, btr]
type = veladd
trigger1 = vel x >= 0
trigger1 = time > 5
trigger2 = vel x >= 0
trigger2 = p2bodydist x < 60
trigger2 = time >= 0
x = -.5

[State -2, 補正適用]
type=attackmulset
trigger1=!root,var(31)
value=ifelse(root,life <= 300,ifelse(p2movetype=A,1.2*2,1.2),ifelse(p2movetype=A,2,1))

[State -2, 補正適用]
type=attackmulset
trigger1=root,var(31)
value=ifelse(root,life <= 300,ifelse(p2movetype=A,1.8*2,1.8),ifelse(p2movetype=A,3,1.5))

[State 0, var]
type = parentvarset
trigger1 = movehit
var(29) = 1

[State 210, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, NA
sprpriority = 2
animtype  = Medium
damage    = 14*root,fvar(1)
guardflag = L
pausetime = 10,10
getpower = ifelse(helper(8500),fvar(8)=0,40,40*1.1)
givepower = 25
sparkno = s820
sparkxy = -10,-30
hitsound = s1, 17
guardsound = s1,5
ground.type = trip
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -1.5
guard.velocity = -2
air.velocity = -1.5,-1
fall = 1
air.fall = 1
fall.recover = 0
p2stateno = 10425

[State 0, var];⑨AI攻撃ヒット時用
type = parentvarset
trigger1 = root,var(58) = 3
var(58) = ifelse(movehit,4,0)

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, エフェクト]
type = explod
trigger1 = time = 7
anim = 919
id = 919
pos = -30,-25
postype = p1
sprpriority = 4
ownpal = 1
shadow = 0,0,0
scale = 1,.5
bindtime = -1
pausemovetime = 0
supermovetime = 0

[State 230, 2];スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno = [200,220]
trigger3 = root,stateno != 415
trigger3 = root,stateno = [400,420]
trigger4 = root,stateno = [1000,1050]
trigger5 = root,stateno = [1100,1150]
trigger6 = root,stateno = [1200,1250]
trigger7 = root,stateno = [1400,1460]
trigger8 = root,stateno = 1700
trigger9 = root,stateno = [800,801]
trigger10 = root,stateno = 900
trigger11 = root,stateno = 1000 || root,stateno = 1020 || root,stateno = 1030 || root,stateno = 1050
trigger12 = root,stateno = 1100 || root,stateno = 1120 || root,stateno = 1150
trigger13 = root,stateno = 1200
trigger14 = root,stateno = 1400 || root,stateno = 1460
trigger15 = root,stateno = 1700 || root,stateno = 1750
trigger16 = root,stateno = 3000
trigger17 = root,stateno = 3090
trigger18 = root,stateno = 3300
ignorehitpause = 1

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = numtarget
trigger1 = animtime = 0
value = 417

[State 230, 2]
type = changestate
trigger1 = animtime = 0
value = 1102
;---------------------------------------------------------------------------
;Dしゃがみ中スタンド保留
[Statedef 417]
type = S
movetype = I
physics = N
ctrl = 0
anim = 29999
sprpriority = 1

[State 191, 3]
type = PlaySnd
trigger1 = time = 5
value = 100,1

[State 0, 線]
type = explod
trigger1 = time = 0
anim = 1103
id = 1103
pos = 0,-40
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .8,.8
pausemovetime = 999999
supermovetime = 999999

[State 0, 円]
type = explod
trigger1 = time = 0
anim = 866
id = 867
pos = 0,-40
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .508,.645
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = null;parentvarset
trigger1 = root,stateno = [1100,1120]
var(29) = 0

[State 230, 2]
type = destroyself
trigger1 = !numtarget
trigger2 = root,stateno = [1100,1120]
;trigger2 = root,stateno = [410,415]
;---------------------------------------------------------------------------
;再び刻み始めるスタンド保留
[Statedef 418]
type = S
movetype = I
physics = N
ctrl = 0
anim = 29999
sprpriority = 1

[State 191, 3]
type = PlaySnd
trigger1 = time = 5
value = 100,1

[State 0, 線]
type = explod
trigger1 = time = 0
anim = 1103
id = 1103
pos = 0,-40
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .8,.8
pausemovetime = 999999
supermovetime = 999999

[State 0, 円]
type = explod
trigger1 = time = 0
anim = 866
id = 867
pos = 0,-40
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .508,.645
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = parentvarset
trigger1 = target,stateno = 10427
var(29) = 1

[State 230, 2]
type = destroyself
trigger1 = !numtarget
trigger2 = root,stateno = [1100,1120]
trigger3 = root,stateno = 415
trigger3 = root,time = 13
;trigger3 = root,stateno = 415
;---------------------------------------------------------------------------
;CH
[Statedef 420]
type    = C
movetype= A
physics = C
ctrl = 0
anim = 420
sprpriority = 2

[State 210, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, NA
sprpriority = 2
animtype  = hard
damage    = 40*fvar(1)
guardflag = LA
pausetime = 16,16
getpower = ifelse(helper(8500),fvar(8)=0,30,30*1.1)
givepower = 30
sparkno = s830
sparkxy = -10,-60
hitsound = s1, 2
guardsound = s1,5
ground.type = High
ground.slidetime = 30
ground.hittime = 30
guard.slidetime = 24
guard.hittime = 24
air.hittime = 25
ground.velocity = -6
guard.velocity = -6
air.velocity = -1,ifelse(var(40)<30,-5+(var(40)*0.2),ifelse((var(40)*0.2)<0,0,(var(40)*0.2)))
air.velocity = -1,-6
airguard.velocity = -6
fall = 0
air.fall = 1
fall.recover = 0

[State 810, Throw Sound]
type = playsnd
trigger1 = animelem = 1
value = 420,0+(random%2)
channel = 0

[state 0, helper]
type = helper
triggerall = time < 5;!time
trigger1 = !numhelper(1001)
trigger2 = helper(1001),stateno = 1102
trigger3 = helper(1001),stateno = 206 || helper(1001),stateno = 216 || helper(1001),stateno = 226
trigger4 = helper(1001),stateno = 406 || helper(1001),stateno = 416 || helper(1001),stateno = 426
trigger5 = numhelper(1001) < 2
trigger5 = helper(1001),stateno = 417 ||helper(1001),stateno = 418
helpertype = normal
name = "stand"
stateno = 421
id = 1001
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = .833
size.yscale = 1
persistent = 0

[State 230, 3]
type = null;changestate
triggerall = command = "holdup"
trigger1 =Time >= 18
value = 40

[State 410, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------
;本体屈強スタンド
[Statedef 421]
type = S
movetype = I
physics = N
ctrl = 0
anim = 421
sprpriority = 0

[State 0, anim]
type = changeanim
trigger1 = root,var(39)
trigger1 = root,movecontact
value = anim
elem = animelemno(0)

[State 0, var]
trigger1 != root,movecontact
type = parentvarset
trigger1 = 1
var(39) = 1

[State 240, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = 100, 3

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 5,-10

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = animtime = 0
value = 1102

[State 230, 2];スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno = 900
trigger3 = root,stateno = 3000
trigger4 = root,stateno = 3090
trigger5 = root,stateno = 3300
trigger6 = root,stateno = 1700
trigger7 = root,stateno = 1750
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 200 && stateno != 201
value = 201
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 210 && stateno != 211
value = 211
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 220 && stateno != 221
value = 221
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 400 && stateno != 401
value = 401
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 410 && stateno != 411
value = 411
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 420 && stateno != 421
value = 421
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1000 && stateno != 1001
value = 1001
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1010 && stateno != 1011
value = 1011
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1030 && stateno != 1031
value = 1031
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1050 && stateno != 1051
value = 1051
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1100 && stateno != 1101
value = 1101
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1120 && stateno != 1121
value = 1121
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1150 && stateno != 1151
value = 1151
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1200 && stateno != 1202
value = 1202
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1400 && stateno != 1430
value = 1430
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1460 && stateno != 1470
value = 1470
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1700 && stateno != 1701
value = 1701
ignorhitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1750 && stateno != 1751
value = 1751
ignorhitpause = 1
;---------------------------------------------------------------------------
;DCH
[Statedef 425]
type    = C
movetype= A
physics = C
ctrl = 0
anim = 425
sprpriority = 2

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < 0

[State 810, Throw Sound]
type = playsnd
trigger1 = animelem = 1
value = 420,0+(random%2)
channel = 0

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "stand"
stateno = 426
id = 1001
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = .833
size.yscale = 1

[State 230, 3]
type = null;changestate
triggerall = command = "holdup"
trigger1 =Time >= 18
value = 40

[State 410, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------
;D屈強スタンド
[Statedef 426]
type = S
movetype = A
physics = N
ctrl = 0
anim = 426
sprpriority = 0

[State 0, anim]
type = changeanim
trigger1 = root,var(39)
trigger1 = root,movecontact
value = anim
elem = animelemno(0)

[State 0, var]
trigger1 != root,movecontact
type = parentvarset
trigger1 = 1
var(39) = 1

[State 240, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = 100, 3

[State 0, btr]
type = bindtoroot
trigger1 = !time
pos = 5,-10

[State 0, btr]
type = velset
trigger1 = time = 0
x = 2

[State 0, btr]
type = velset
trigger1 = time = 5
x = 8

[State 0, btr]
type = veladd
trigger1 = vel x >= 0
trigger1 = time > 5
x = ifelse(p2bodydist x < 20,-1,-0.5)

[State -2, 補正適用]
type=attackmulset
trigger1=!root,var(31)
value=ifelse(root,life <= 300,ifelse(p2movetype=A,1.2*2,1.2),ifelse(p2movetype=A,2,1))

[State -2, 補正適用]
type=attackmulset
trigger1=root,var(31)
value=ifelse(root,life <= 300,ifelse(p2movetype=A,1.8*2,1.8),ifelse(p2movetype=A,3,1.5))

[State 210, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, NA
sprpriority = 2
animtype  = hard
damage    = 39*root,fvar(1)
guardflag = LA
pausetime = 16,16
getpower = ifelse(helper(8500),fvar(8)=0,30,30*1.1)
givepower = 30
sparkno = s830
sparkxy = -10,-60
hitsound = s1, 2
guardsound = s1,5
ground.type = High
ground.slidetime = 25
ground.hittime = 25
guard.slidetime = 20
guard.hittime = 20
air.hittime = 24
ground.velocity = -6
guard.velocity = -6
air.velocity = -1,ifelse(var(40)<30,-5+(var(40)*0.2),ifelse((var(40)*0.2)<0,0,(var(40)*0.2)))
air.velocity = -1,-6
airguard.velocity = -6
fall = 0
air.fall = 0
fall.recover = 0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = animtime = 0
value = 1102

[State 230, 2];スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno = [200,220]
trigger3 = root,stateno != 415
trigger3 = root,stateno = [400,420]
trigger4 = root,stateno = [1000,1050]
trigger5 = root,stateno = [1100,1150]
trigger6 = root,stateno = [1200,1250]
trigger7 = root,stateno = [1400,1460]
trigger8 = root,stateno = 1700
trigger9 = root,stateno = [800,801]
trigger10 = root,stateno = 900
trigger11 = root,stateno = 1000 || root,stateno = 1020 || root,stateno = 1030 || root,stateno = 1050
trigger12 = root,stateno = 1100 || root,stateno = 1120 || root,stateno = 1150
trigger13 = root,stateno = 1200
trigger14 = root,stateno = 1400 || root,stateno = 1460
trigger15 = root,stateno = 1700 || root,stateno = 1750
trigger16 = root,stateno = 3000
trigger17 = root,stateno = 3090
trigger18 = root,stateno = 3300
ignorehitpause = 1
;===========================================================================
;---------------------------------------------------------------------------
; ジャンプ通常攻撃にChangeStateのコントローラが無いのは、
; Physicsを「A」にしているから。
; おまけフォルダの「小ネタ.txt」を参照。（Physicsの仕組み）
;
; しゃがみ通常技とは逆に、ジャンプ通常技は基本的に「中段属性」の攻撃。
; しゃがみガードが出来ないのが普通なので、guardflagを「HA」にしておくのが定石。
;「立ちガードの需要性」と「空対地のガードの揺さぶりによる駆け引き」を
; プレイヤーに楽しんでもらうための先人達の知恵だね。
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;ジャンプ弱
[Statedef 600]
type    = A
movetype= A
physics = A
ctrl = 0
anim = 600
sprpriority = 2

[State 210, ヒット定義]
type = HitDef
;trigger1 = helper(1001),var(26) = 0
trigger1 = !time
attr = A, NA
sprpriority = 3
animtype  = Medium
damage    = 19*fvar(1)
guardflag = HA
pausetime = 8,8
getpower = ifelse(helper(8500),fvar(8)=0,20,20*1.1)
givepower = 10
sparkno = s810
sparkxy = -10,-80
hitsound = s1, 0
guardsound = s1,5
ground.type = High
ground.slidetime = 16
ground.hittime = 16
guard.slidetime = 12
guard.hittime = 12
ground.velocity = -3
air.velocity = -1.5,-2
fall = 0
fall.recover = 0
air.fall = 0
numhits = 1
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 600, 0+(random%2)
channel = 0

[State 0, anim]
type = changeanim
;trigger1 = helper(1001),var(39)
;trigger1 = helper(1001),movecontact
trigger1 = var(26) <= 15
trigger1 = helper(1001),stateno = 621
trigger1 = helper(1001),movecontact
value = anim
elem = animelemno(0)

[State 0, var]
type = varset
trigger1 = !time
var(26) = 0

[State 0, var]
type = null;varadd
trigger1 = helper(1001),stateno = 621
trigger1 = helper(1001),movecontact
var(26) = 1

[State 1051, 2]
type = null;velset
trigger1 = var(26) <= 15
trigger1 = helper(1001),stateno = 621
trigger1 = helper(1001),movecontact
x = 0
y = 0

[state 0, helper]
type = helper
trigger1 = animelem = 1
helpertype = normal
name = "stand"
stateno = 601
id = 1001
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 0.833
size.yscale = 1
;---------------------------------------------------------------------------
;詐欺飛び
[Statedef 602]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 602;47+var(49)

[State 5210, 2] ;Turn if not facing opponent
type = null;Turn
trigger1 = Time = 0
trigger1 = p2dist X < 0

[State 52, 3 s]
type = PlaySnd
trigger1 = Time = 0
value = 6, 2

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = CtrlSet
trigger1 = 1
value = 0

[State 52, ガード不能]
type = assertspecial
trigger1 = !ctrl && ((prevstateno = [600,699]) || (prevstateno = [10600,10699]))
trigger1 = AnimTime < 0
flag = nostandguard
flag2 = nocrouchguard
flag3 = noairguard

[State 210, ヒット定義]
type = HitDef
trigger1 = helper(1001),var(26) = 0
trigger1 = !time
attr = S, NA
sprpriority = 3
animtype  = Medium
damage    = 19*fvar(1)
guardflag = HA
pausetime = 8,8
getpower = ifelse(helper(8500),fvar(8)=0,20,20*1.1)
givepower = 10
sparkno = s810
sparkxy = -10,-80
hitsound = s1, 0
guardsound = s1,5
ground.type = High
ground.slidetime = 16
ground.hittime = 16
guard.slidetime = 12
guard.hittime = 12
ground.velocity = -3
air.velocity = -1.5,-2
fall = 0
fall.recover = 0
air.fall = 0
numhits = 1
sprpriority = 2

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;空中弱スタンド
[Statedef 601]
type = S
movetype = A
physics = N
ctrl = 0
anim = 601
sprpriority = 0

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = facing != parent,facing

[State 0, anim]
type = changeanim
trigger1 = root,var(39)
trigger1 = root,movecontact
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
trigger1 != root,movecontact
trigger1 = 1
var(39) = 1

[State 0, var]
type = varset
trigger1 = !time
;trigger2 = !animtime
var(26) = 0

[State 0, var]
type = varset
trigger1 = root,stateno = 600
trigger1 = root,movecontact = 1
;trigger1 = time != [5,18]
var(26) = 1

[State 240, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 9
value = 100, 3

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 15,-5

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 210, ヒット定義]
type = null;HitDef
trigger1 = time = 0
attr = S, NA
sprpriority = 3
animtype  = Medium
damage    = 40*root,fvar(1)
guardflag = HA
pausetime = 8,8
getpower = ifelse(helper(8500),fvar(8)=0,70,70*1.1)
givepower = 30
sparkno = s810
sparkxy = -10,-40
hitsound = s1, 2
guardsound = s1,5
ground.type = High
ground.slidetime = 24
ground.hittime = 24
guard.slidetime = 16
guard.hittime = 16
ground.velocity = -5
air.velocity = -3.5,-4
fall = 0
fall.recover = 0
air.fall = 0
numhits = 1
sprpriority = 2

[State 0, 線]
type = explod
trigger1 = animtime = 0
trigger2 = root,stateno != 52
trigger2 = root,stateno != [600,602]
;trigger1 = time = 25
anim = 1103
id = 1103
pos = 0,-60
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale =.8,.8
pausemovetime = 999999
supermovetime = 999999

[State 0, 円]
type = explod
trigger1 = animtime = -1
trigger2 = root,stateno != 52
trigger2 = root,stateno != 600
anim = 866
id = 867
pos = 0,-30
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .508,.645
pausemovetime = 999999
supermovetime = 999999
persistent = 0

[State 0, end]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,stateno != 52
trigger2 = root,stateno != [600,602]
;---------------------------------------------------------------------------
;ジャンプ中
[Statedef 610]
type    = A
movetype= A
physics = A
ctrl = 0
anim = 610
sprpriority = 2

[State 210, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = A, NA
sprpriority = 3
animtype  = Medium
damage    = 29*fvar(1)
guardflag = HA
pausetime = 12,12
getpower = ifelse(helper(8500),fvar(8)=0,70,70*1.1)
givepower = 30
sparkno = s810
sparkxy = -10,-20
hitsound = s1, 17
guardsound = s1,5
ground.type = High
ground.slidetime = 20
ground.hittime = 20
guard.slidetime = 12
guard.hittime = 12
ground.velocity = -4
air.velocity = -3.5,-3
fall = 0
fall.recover = 0
air.fall = 0
numhits = 1
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 610, 0+(random%2)
channel = 0

[State 0, anim]
type = changeanim
;trigger1 = helper(1001),var(39)
;trigger1 = helper(1001),movecontact
trigger1 = var(26) <= 15
trigger1 = helper(1001),stateno = 621
trigger1 = helper(1001),movecontact
value = anim
elem = animelemno(0)

[State 0, var]
type = null;varset
trigger1 = !time
var(26) = 0

[State 0, var]
type = null;varadd
trigger1 = helper(1001),stateno = 621
trigger1 = helper(1001),movecontact
var(26) = 1

[State 1051, 2]
type = null;velset
trigger1 = var(26) <= 15
trigger1 = helper(1001),stateno = 621
trigger1 = helper(1001),movecontact
x = 0
y = 0

[state 0, helper]
type = helper
trigger1 = animelem = 1
helpertype = normal
name = "stand"
stateno = 611
id = 1001
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 1
size.yscale = 1
;---------------------------------------------------------------------------
;詐欺飛び
[Statedef 612]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 612;47+var(49)

[State 5210, 2] ;Turn if not facing opponent
type = null;Turn
trigger1 = Time = 0
trigger1 = p2dist X < 0

[State 52, 3 s]
type = PlaySnd
trigger1 = Time = 0
value = 6, 2

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = CtrlSet
trigger1 = 1
value = 0

[State 52, ガード不能]
type = assertspecial
trigger1 = !ctrl && ((prevstateno = [600,699]) || (prevstateno = [10600,10699]))
trigger1 = AnimTime < 0
flag = nostandguard
flag2 = nocrouchguard
flag3 = noairguard

[State 210, ヒット定義]
type = HitDef
trigger1 = helper(1001),var(26) = 0
trigger1 = !time
attr = S, NA
sprpriority = 3
animtype  = Medium
damage    = 29*fvar(1)
guardflag = HA
pausetime = 12,12
getpower = ifelse(helper(8500),fvar(8)=0,30,30*1.1)
givepower = 30
sparkno = s810
sparkxy = -10,-20
hitsound = s1, 17
guardsound = s1,5
ground.type = High
ground.slidetime = 20
ground.hittime = 20
guard.slidetime = 12
guard.hittime = 12
ground.velocity = -4
air.velocity = -3.5,-4
fall = 0
fall.recover = 0
air.fall = 0
numhits = 1
sprpriority = 2

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;本体空中中スタンド
[Statedef 611]
type = S
movetype = A
physics = N
ctrl = 0
anim = 611
sprpriority = 0

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = facing != parent,facing

[State 0, anim]
type = changeanim
trigger1 = root,var(39)
trigger1 = root,movecontact
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
trigger1 != root,movecontact
trigger1 = 1
var(39) = 1

[State 0, var]
type = varset
trigger1 = !time
;trigger2 = !animtime
var(26) = 0

[State 0, var]
type = varset
trigger1 = root,stateno = 610
trigger1 = root,movecontact = 1
trigger1 = time != [7,14]
var(26) = 1

[State 240, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 9
value = 100, 3

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 25,15

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 210, ヒット定義]
type = null;HitDef
trigger1 = time = 0
attr = S, NA
sprpriority = 3
animtype  = Medium
damage    = 29*root,fvar(1)
guardflag = HA
pausetime = 15,15
getpower = ifelse(helper(8500),fvar(8)=0,30,30*1.1)
givepower = 30
sparkno = s830
sparkxy = -10,-40
hitsound = s1, 11
guardsound = s1,5
ground.type = High
ground.slidetime = 24
ground.hittime = 24
guard.slidetime = 16
guard.hittime = 16
ground.velocity = -5
air.velocity = -3.5,-4
fall = 0
fall.recover = 0
air.fall = 0
numhits = 1
sprpriority = 2

[State 0, エフェクト]
type = explod
trigger1 = time = 2
anim = 920
id = 919
pos = -45,-70
postype = p1
sprpriority = 4
ownpal = 1
shadow = 0,0,0
scale = 1,.5
pausemovetime = 0
supermovetime = 0
bindtime = -1

[State 0, 線]
type = explod
trigger1 = animtime = 0
trigger2 = root,stateno != 52
trigger2 = root,stateno != [610,612]
;trigger1 = time = 25
anim = 1103
id = 1103
pos = 0,-60
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale =.8,.8
pausemovetime = 999999
supermovetime = 999999

[State 0, 円]
type = explod
trigger1 = animtime = -1
trigger2 = root,stateno != 52
trigger2 = root,stateno != 610
anim = 866
id = 867
pos = 0,-30
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .508,.645
pausemovetime = 999999
supermovetime = 999999
persistent = 0

[State 0, end]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,stateno != 52
trigger2 = root,stateno != [610,612]
;---------------------------------------------------------------------------
;ジャンプ強
[Statedef 620]
type    = A
movetype= A
physics = A
ctrl = 0
anim = 620
sprpriority = 2

[State 210, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = A, NA
sprpriority = 3
animtype  = Medium
damage    = 50*fvar(1)
guardflag = HA
pausetime = 15,15
getpower = ifelse(helper(8500),fvar(8)=0,40,40*1.1)
givepower = 30
sparkno = s830
sparkxy = -10,-80
hitsound = s1, 2
guardsound = s1,5
ground.type = High
ground.slidetime = 24
ground.hittime = 24
guard.slidetime = 16
guard.hittime = 16
ground.velocity = -5
air.velocity = -3.5,-4
fall = 0
fall.recover = 0
air.fall = 0
numhits = 1
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 620, 0+(random%2)
channel = 0

[State 0, anim]
type = changeanim
;trigger1 = helper(1001),var(39)
;trigger1 = helper(1001),movecontact
trigger1 = var(26) <= 15
trigger1 = helper(1001),stateno = 621
trigger1 = helper(1001),movecontact
value = anim
elem = animelemno(0)

[State 0, var]
type = null;varset
trigger1 = !time
var(26) = 0

[State 0, var]
type = null;varadd
trigger1 = helper(1001),stateno = 621
trigger1 = helper(1001),movecontact
var(26) = 1

[State 1051, 2]
type = null;velset
trigger1 = var(26) <= 15
trigger1 = helper(1001),stateno = 621
trigger1 = helper(1001),movecontact
x = 0
y = 0

[state 0, helper]
type = helper
trigger1 = animelem = 1
helpertype = normal
name = "stand"
stateno = 621
id = 1001
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 1
size.yscale = 1
;---------------------------------------------------------------------------
;詐欺飛び
[Statedef 622]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 622;47+var(49)

[State 5210, 2] ;Turn if not facing opponent
type = null;Turn
trigger1 = Time = 0
trigger1 = p2dist X < 0

[State 52, 3 s]
type = PlaySnd
trigger1 = Time = 0
value = 6, 2

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = CtrlSet
trigger1 = 1
value = 0

[State 52, ガード不能]
type = assertspecial
trigger1 = !ctrl && ((prevstateno = [600,699]) || (prevstateno = [10600,10699]))
trigger1 = AnimTime < 0
flag = nostandguard
flag2 = nocrouchguard
flag3 = noairguard

[State 210, ヒット定義]
type = HitDef
trigger1 = helper(1001),var(26) = 0
trigger1 = !time
attr = S, NA
sprpriority = 3
animtype  = Medium
damage    = 50*fvar(1)
guardflag = HA
pausetime = 15,15
getpower = ifelse(helper(8500),fvar(8)=0,70,70*1.1)
givepower = 30
sparkno = s830
sparkxy = -10,-80
hitsound = s1, 2
guardsound = s1,5
ground.type = High
ground.slidetime = 24
ground.hittime = 24
guard.slidetime = 16
guard.hittime = 16
ground.velocity = -5
air.velocity = -3.5,-4
fall = 0
fall.recover = 0
air.fall = 0
numhits = 1
sprpriority = 2

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;本体空中強スタンド
[Statedef 621]
type = S
movetype = A
physics = N
ctrl = 0
anim = 621
sprpriority = 0

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = facing != parent,facing

[State 0, anim]
type = changeanim
trigger1 = root,var(39)
trigger1 = root,movecontact
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
trigger1 != root,movecontact
trigger1 = 1
var(39) = 1

[State 0, var]
type = varset
trigger1 = !time
;trigger2 = !animtime
var(26) = 0

[State 0, var]
type = varset
trigger1 = root,stateno = 620
trigger1 = root,movecontact = 1
trigger1 = time != [7,14]
var(26) = 1

[State 240, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 9
value = 100, 3

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 25,0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 210, ヒット定義]
type = null;HitDef
trigger1 = time = 0
attr = S, NA
sprpriority = 3
animtype  = Medium
damage    = 50*root,fvar(1)
guardflag = HA
pausetime = 15,15
getpower = ifelse(helper(8500),fvar(8)=0,70,70*1.1)
givepower = 30
sparkno = s830
sparkxy = -10,-40
hitsound = s1, 2
guardsound = s1,5
ground.type = High
ground.slidetime = 24
ground.hittime = 24
guard.slidetime = 16
guard.hittime = 16
ground.velocity = -5
air.velocity = -3.5,-4
fall = 0
fall.recover = 0
air.fall = 0
numhits = 1
sprpriority = 2

[State 0, 線]
type = explod
trigger1 = animtime = 0
trigger2 = root,stateno != 52
trigger2 = root,stateno != [620,622]
;trigger1 = time = 25
anim = 1103
id = 1103
pos = 0,-60
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale =.8,.8
pausemovetime = 999999
supermovetime = 999999

[State 0, 円]
type = explod
trigger1 = animtime = -1
trigger2 = root,stateno != 52
trigger2 = root,stateno != 620
anim = 866
id = 867
pos = 0,-30
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .508,.645
pausemovetime = 999999
supermovetime = 999999
persistent = 0

[State 0, end]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,stateno != 52
trigger2 = root,stateno != [620,622]
;---------------------------------------------------------------------------
;Sonジャンプ弱
[Statedef 10600]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 15
ctrl = 0
anim = 10600
sprpriority = 0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 600, 0
channel = 0

[State 600, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = 0, 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 600, ヒット定義]
type = HitDef
trigger1 = !time
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Light
damage    = 10*fvar(1)
priority = 3
pausetime = 11,11
getpower = ifelse(helper(8500),fvar(8)=0,50,50*1.1)
givepower = 20
sparkno = S810
guard.sparkno = S840
sparkxy = -10,-54
hitsound = S1,0
guardsound = S1,5
ground.type = High
air.type = High
ground.slidetime = 18
ground.hittime = 18
guard.slidetime = 12
guard.hittime = 12
air.hittime = 14
ground.velocity = -6
guard.velocity = -5.5
air.velocity = -1.3,-3
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 0
fall.recover = 0
air.fall = 0
;---------------------------------------------------------------------------
;Sonジャンプ中
[Statedef 10610]
type    = A
movetype= A
physics = A
ctrl = 0
anim = 10610
sprpriority = 0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 0, 1

[State 600, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Light
damage    = 20*fvar(1)
priority = 3
pausetime = 13,13
getpower = ifelse(helper(8500),fvar(8)=0,62,62*1.1)
givepower = 25
sparkno = S820
guard.sparkno = S840
sparkxy = -10,-34
hitsound = S1,1
guardsound = S1,5
ground.type = High
air.type = High
ground.slidetime = 18
ground.hittime = 18
guard.slidetime = 12
guard.hittime = 12
air.hittime = 14
ground.velocity = -6
guard.velocity = -5.5
air.velocity = -1.3,-3
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 0
fall.recover = 0
air.fall = 0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 610, 0
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I
;---------------------------------------------------------------------------
;Sonジャンプ強
[Statedef 10620]
type    = A
movetype= A
physics = A
ctrl = 0
anim = 10620
sprpriority = 0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 0, 2

[State 210, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = A, NA
animtype  = Medium
damage    = 40*fvar(1)
guardflag = HA
pausetime = 15,15
getpower = ifelse(helper(8500),fvar(8)=0,70,70*1.1)
givepower = 30
sparkno = s830
sparkxy = -10,-40
hitsound = s1, 2
guardsound = s1,5
ground.type = High
ground.slidetime = 24
ground.hittime = 24
guard.slidetime = 16
guard.hittime = 16
ground.velocity = -5
air.velocity = -3.5,-4
fall = 0
fall.recover = 0
air.fall = 0
numhits = 1
sprpriority = 0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 620, 0
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I
;---------------------------------------------------------------------------
;回り込みF
[Statedef 750]
type = S
physics = N
movetype = I
anim = 750
ctrl = 0
velset = 0,0
sprpriority = 0

[State 810, Throw Sound]
type = playsnd
trigger1 = animelem = 1
value = 750,0
channel = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 810, 1]
type = helper
trigger1 = animelem = 12
ID = 751
stateno = 751
pos = 0,0
pausemovetime = 1

[State 810, Throw Sound]
type = playsnd
trigger1 = time = 40
value = 1,16

[State 810, HitBy]
type = HitBy
trigger1 = 1;time <= 45
value = SCA, NT,ST,HT
time = 1

[State 0, 0]
type = PosAdd
trigger1 = time = 40
x = 200

[state 3000]
type = pause
trigger1 = var(26) = 1 || var(31)
trigger1 = 1
time = 1
movetime = 1

[State 810, Push]
type = Ctrlset
trigger1 = var(26) = 1 || var(31)
trigger1 = time = 46
value = 1

[State 810, Push]
type = PlayerPush
trigger1 = 1
value = 0

[State 901,1]
type = SprPriority
trigger1 = AnimTime = 0
value = 0

[State 8500, 1]
type = null;varset
trigger1 = AnimTime = 0
var(40) = 6

[State 181, EnvColor]
type = null;Bgpalfx
trigger1 = time = [35,37]
time = 1
invertall = 1
add = 205,205,205
;color = 0
ignorehitpause = 1

[State 181, EnvColor]
type = Bgpalfx
trigger1 = time = [38,43]
time = 1
invertall = 1
add = 128,0,0
;color = 0
ignorehitpause = 1

[State 181, EnvColor]
type = null;Bgpalfx
trigger1 = time = [44,46]
time = 1
invertall = 1
add = 205,205,205
;color = 0
ignorehitpause = 1

[State 810, StateChange]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;回り込み（残像）
[Statedef 751]
type = S
physics = N
movetype = I
anim = 751
ctrl = 0
velset = 0,0
sprpriority = -2

[State 820, Anim]
type = ChangeAnim
trigger1 = Time = 0
value = 750
elem = 3

[State 810, Velocity]
type = VelSet
trigger1 = animelem = 3
x = 12

[State 810, Velocity]
type = VelMul
trigger1 = AnimElemTime(8) > 0
x = .55

[State 810, Velocity]
type = VelSet
trigger1 = animelem = 12
x = 0

[State 810, HitBy]
type = HitBy
trigger1 = 1
value = SCA

[State 810, Push]
type = PlayerPush
trigger1 = 1
value = 0

[State 100, 2]
type = AssertSpecial
trigger1 = time%2=0
flag = invisible

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 810, StateChange]
type = DestroySelf
trigger1 = root,stateno != 750
trigger2 = time = 45
;---------------------------------------------------------------------------
;回り込みN
[Statedef 752]
type = S
physics = N
movetype = I
anim = 750
ctrl = 0
velset = 0,0
sprpriority = 0

[State 810, Throw Sound]
type = playsnd
trigger1 = animelem = 1
value = 750,0
channel = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 810, 1]
type = helper
trigger1 = animelem = 12
ID = 751
stateno = 753
pos = 0,0
pausemovetime = 1

[State 810, Throw Sound]
type = playsnd
trigger1 = time = 40
value = 1,16

[State 810, HitBy]
type = HitBy
trigger1 = 1;time <= 45
value = SCA, NT,ST,HT
time = 1

[State 0, 0]
type = PosAdd
trigger1 = time = 40
x = 100

[state 3000]
type = pause
trigger1 = var(26) = 1 || var(31)
trigger1 = 1
time = 1
movetime = 1

[State 810, Push]
type = Ctrlset
trigger1 = var(26) = 1 || var(31)
trigger1 = time = 46
value = 1

[State 810, Push]
type = PlayerPush
trigger1 = 1
value = 0

[State 901,1]
type = SprPriority
trigger1 = AnimTime = 0
value = 0

[State 8500, 1]
type = null;varset
trigger1 = AnimTime = 0
var(40) = 6

[State 181, EnvColor]
type = null;Bgpalfx
trigger1 = time = [35,37]
time = 1
invertall = 1
add = 205,205,205
;color = 0
ignorehitpause = 1

[State 181, EnvColor]
type = Bgpalfx
trigger1 = time = [38,43]
time = 1
invertall = 1
add = 128,0,0
;color = 0
ignorehitpause = 1

[State 181, EnvColor]
type = null;Bgpalfx
trigger1 = time = [44,46]
time = 1
invertall = 1
add = 205,205,205
;color = 0
ignorehitpause = 1

[State 810, StateChange]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;回り込みN（残像）
[Statedef 753]
type = S
physics = N
movetype = I
anim = 751
ctrl = 0
velset = 0,0
sprpriority = -2

[State 820, Anim]
type = ChangeAnim
trigger1 = Time = 0
value = 750
elem = 3

[State 810, Velocity]
type = VelSet
trigger1 = animelem = 3
x = 6

[State 810, Velocity]
type = VelMul
trigger1 = AnimElemTime(8) > 0
x = .55

[State 810, Velocity]
type = VelSet
trigger1 = animelem = 12
x = 0

[State 810, HitBy]
type = HitBy
trigger1 = 1
value = SCA

[State 810, Push]
type = PlayerPush
trigger1 = 1
value = 0

[State 100, 2]
type = AssertSpecial
trigger1 = time%2=0
flag = invisible

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 810, StateChange]
type = DestroySelf
trigger1 = root,stateno != 752
trigger2 = time = 45
;---------------------------------------------------------------------------
;回り込みB
[Statedef 754]
type = S
physics = N
movetype = I
anim = 750
ctrl = 0
velset = 0,0
sprpriority = 0

[State 810, Throw Sound]
type = playsnd
trigger1 = animelem = 1
value = 750,0
channel = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 810, 1]
type = helper
trigger1 = animelem = 12
ID = 755
stateno = 755
pos = 0,0
pausemovetime = 1

[State 810, Throw Sound]
type = playsnd
trigger1 = time = 40
value = 1,16

[State 810, HitBy]
type = HitBy
trigger1 = 1;time <= 45
value = SCA, NT,ST,HT
time = 1

[State 0, 0]
type = PosAdd
trigger1 = time = 40
x = -100

[state 3000]
type = pause
trigger1 = var(26) = 1 || var(31)
trigger1 = 1
time = 1
movetime = 1

[State 810, Push]
type = Ctrlset
trigger1 = var(26) = 1 || var(31)
trigger1 = time = 46
value = 1

[State 810, Push]
type = PlayerPush
trigger1 = 1
value = 0

[State 901,1]
type = SprPriority
trigger1 = AnimTime = 0
value = 0

[State 8500, 1]
type = null;varset
trigger1 = AnimTime = 0
var(40) = 6

[State 181, EnvColor]
type = null;Bgpalfx
trigger1 = time = [35,37]
time = 1
invertall = 1
add = 205,205,205
;color = 0
ignorehitpause = 1

[State 181, EnvColor]
type = Bgpalfx
trigger1 = time = [38,43]
time = 1
invertall = 1
add = 128,0,0
;color = 0
ignorehitpause = 1

[State 181, EnvColor]
type = null;Bgpalfx
trigger1 = time = [44,46]
time = 1
invertall = 1
add = 205,205,205
;color = 0
ignorehitpause = 1

[State 810, StateChange]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;回り込みB（残像）
[Statedef 755]
type = S
physics = N
movetype = I
anim = 750
ctrl = 0
velset = 0,0
sprpriority = -2

[State 820, Anim]
type = ChangeAnim
trigger1 = Time = 0
value = 750
elem = 3

[State 810, Velocity]
type = VelSet
trigger1 = animelem = 3
x = -6

[State 810, Velocity]
type = VelMul
trigger1 = AnimElemTime(8) > 0
x = -.55

[State 810, Velocity]
type = VelSet
trigger1 = animelem = 12
x = 0

[State 810, HitBy]
type = HitBy
trigger1 = 1
value = SCA

[State 810, Push]
type = PlayerPush
trigger1 = 1
value = 0

[State 100, 2]
type = AssertSpecial
trigger1 = time%2=0
flag = invisible

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 810, StateChange]
type = DestroySelf
trigger1 = root,stateno != 754
trigger2 = time = 45
;===========================================================================
;プッツンキャンセル
[Statedef 700]
type = S
physics = N
movetype = I
anim = 700+var(49)
ctrl = 0
velset = 0,0
sprpriority = 1

[State 0, explod]
type = null;explod
trigger1 = var(49) = 10000
trigger1 = !time
anim = 10702
id = 777
pos = -10,0
postype = p1
scale = .835,1
sprpriority = 0
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 0
anim = 710
id = 7100
pos = ceil(-30*const(size.xscale)),ceil(-92*const(size.yscale))
postype = p1
scale = .3,.5
sprpriority = 2
pausemovetime = 999999
supermovetime = 999999

;プッツーン
[State 0, helper]
type = helper
trigger1 = !time
stateno = 720
id = 720
facing = ifelse(facing=1,1,-1)
postype = p1
pos = -5,-70
sprpriority = 4
ownpal = 1
size.xscale = .5
size.yscale = .5
pausemovetime = 999999
supermovetime = 999999

[State 0, super]
type = superpause
trigger1 = time = 1
time = 29
movetime = 29
anim = -1
sound = -1
darken = 0
p2defmul = 1
poweradd = -1000
ignorehitpause = 1
persistent = 0

[State 3000,03]
type = BGPalfx
trigger1 = time = 1
mul = 128,128,128
time = 29
ignorehitpause = 1
persistent = 0

[State 0, snd]
type = playsnd
trigger1 = time = 1
value = 6,9
ignorehitpause = 1
persistent = 0

[State 0, end]
type = changestate
trigger1 = time = 28
value = 0
ctrl = 1
ignorehitpause = 1
persistent = 0
;---------------------------------------------------------------------------
;プッツーン
[Statedef 720]
type    = S
physics = N
anim = 720
ctrl = 0
sprpriority = 3
velset = 0,0

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 0, scale]
type = angledraw
trigger1 = time < 10
scale = .2+time*.08,.2+time*.08

[State 0, scale]
type = angledraw
trigger1 = time >= 10
scale = .85+time*.01,.85+time*.01

[State 820, 消去]
type = destroyself
trigger1 = time >= 30
trigger2 = root,stateno != 700
;===========================================================================
;スタンドラッシュ
[Statedef 2100]
type = S
physics = N
movetype = I
anim = 0
ctrl = 0
velset = 0,0
sprpriority = 1

[State 4200,03]
type = Poweradd
trigger1 = !Time
value = -250

[State 8500, 1]
type = varset
trigger1 = time = 0
var(49) = 0

[State 0, 0]
type = PosAdd
trigger1 = time = 0
x = -10

[state 3000]
type = pause
trigger1 = time = 0
time = 10
movetime = 0

[State 1020, Blink Yellow]
type = PalFX
trigger1 = Time = 1
time = 3
add = 255,255,255

[State 0, end]
type = changestate
trigger1 = time = 1
value = 0
ctrl = 1
ignorehitpause = 1
persistent = 0
;===========================================================================
; 投げ技
;===========================================================================
;---------------------------------------------------------------------------
; エレクバイトが「作るのが退屈と感じる時もあるよ」って言ってるけど、
; 作り出したら意外とハマって楽しくなる投げ技。
; 投げる相手の正確な座標取りは面倒臭いけどね（コラ
; 投げ用のHitDefはテンプレートと見比べて確認すればわかるはず。
;---------------------------------------------------------------------------
;掴み
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2

[State 0, pos]
type = playsnd
trigger1 = time = 1
value = 800,0+(random%2)
channel = 0

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 3
value = 0,5

[State 900, 1]
type = HitDef
triggerall = P2movetype != H
triggerall = P2bodydist X = [-const(size.ground.front),60]
trigger1 = AnimElem = 3
attr = S, NT
hitflag = M-
priority = 3, Miss    
sparkno = -1
p1facing = 1
p1stateno = 810
p2facing = 1
p2stateno = 820
guard.dist = 0
getpower = ifelse(helper(8500),fvar(8)=0,150,150*1.1)
givepower = 150
air.fall = 1
fall = 1
fall.recover = 0
hitonce = 1
numhits = 0
envshake.time = 10
envshake.freq = 40
envshake.ampl = -4
id = 800

[state 0, helper]
type = helper
trigger1 = time = 3
helpertype = normal
name = "stand"
stateno = 803
id = 1001
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 0.833
size.yscale = 1

[State 800, ステート変更]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;掴み(後方)
[Statedef 801]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2

[State 0, pos]
type = playsnd
trigger1 = time = 1
value = 800,0+(random%2)
channel = 0

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 3
value = 0,5

[State 900, 1]
type = HitDef
triggerall = P2movetype != H
triggerall = P2bodydist X = [-const(size.ground.front),60]
trigger1 = AnimElem = 1
attr = S, NT
hitflag = M-
priority = 3, Miss    
sparkno = -1
p1facing = 1
p1stateno = 811
p2facing = 1
p2stateno = 821
guard.dist = 0
getpower = ifelse(helper(8500),fvar(8)=0,150,150*1.1)
givepower = 150
air.fall = 1
fall = 1
fall.recover = 0
hitonce = 1
numhits = 0
envshake.time = 10
envshake.freq = 40
envshake.ampl = -4
id = 800

[state 0, helper]
type = helper
trigger1 = time = 3
helpertype = normal
name = "stand"
stateno = 803
id = 1001
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 0.833
size.yscale = 1

[State 800, ステート変更]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;掴みスタンド
[Statedef 803]
type = S
movetype = A
physics = N
ctrl = 0
anim = 803
sprpriority = 1

[State 0, anim]
type = changeanim
trigger1 = root,var(39)
trigger1 = root,movecontact
value = anim
elem = animelemno(0)

[State 0, var]
trigger1 != root,movecontact
type = parentvarset
trigger1 = 1
var(39) = 1

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 30,-10

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, 円]
type = explod
trigger1 = animtime = -1
anim = 866
id = 867
pos = 0,-80
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .508,.645
pausemovetime = 999999
supermovetime = 999999

[State 230, 2];スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno != 200
trigger2 = root,stateno = [200,220]
trigger3 = root,stateno = [400,420]
trigger4 = root,stateno = [1000,1050]
trigger5 = root,stateno = [1100,1150]
trigger6 = root,stateno = [1200,1250]
trigger7 = root,stateno = [1400,1460]
trigger8 = root,stateno = 1700
ignorehitpause = 1

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 230, 2]
type = destroyself
trigger1 = root,stateno != [800,811]

[State 230, 2]
type = changestate
trigger1 = root,stateno = [810,811]
value = 804

[State 230, 2]
type = changestate
trigger1 = animtime = 0
value = 1102
;---------------------------------------------------------------------------
;投げスタンド
[Statedef 804]
type = S
movetype = A
physics = N
ctrl = 0
anim = 804
sprpriority = 1

[State 100, 2]
type = turn
trigger1 = time = 0
trigger1 = facing != root,facing

[State 0, anim]
type = changeanim
trigger1 = root,var(39)
trigger1 = root,movecontact
value = anim
elem = animelemno(0)

[State 0, var]
trigger1 != root,movecontact
type = parentvarset
trigger1 = 1
var(39) = 1

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 30,-10

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, 円]
type = explod
trigger1 = animtime = -1
anim = 866
id = 867
pos = 0,-80
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .508,.645
pausemovetime = 999999
supermovetime = 999999

[State 230, 2];スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno != 200
trigger2 = root,stateno = [200,220]
trigger3 = root,stateno = [400,420]
trigger4 = root,stateno = [1000,1050]
trigger5 = root,stateno = [1100,1150]
trigger6 = root,stateno = [1200,1250]
trigger7 = root,stateno = [1400,1460]
trigger8 = root,stateno = 1700
ignorehitpause = 1

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 230, 2]
type = destroyself
trigger1 = root,stateno != [800,811]

[State 230, 2]
type = changestate
trigger1 = animtime = 0
value = 1102
;---------------------------------------------------------------------------
;投げ成功（前方）
[Statedef 810]
type    = S
movetype= A
physics = N
anim = 801
velset = 0,0
sprpriority = 2

[State 0, end]
type = changestate
trigger1 = time = [1,4]
;trigger1 = target,command = "holdfwd" || target,command = "holdback"
trigger1 = target,command = "c" || target,command = "y" || target,command = "z"
value = 880

[State 901,1]
type = targetBind
trigger1 = !var(49) && time = 0
pos = 90, -10
postype = P1
time = 1

[State 901,1]
type = targetBind
trigger1 = !var(49) && time = 38
pos = 110, -10
postype = P1
time = 1

[State 1027, Sound]
type = PlaySnd
trigger1 = numhelper(1001)=0
trigger1 = time = 38
value = 300,1

[State 1027, Sound]
type = PlaySnd
trigger1 = numhelper(1001)=1
trigger1 = time = 35
value = 1,18

[State 0, pos]
type = playsnd
trigger1 = time = 3
value = 810,0
channel = 0

[state 3000]
type = pause
trigger1 = time = 38
time = 16
movetime = 0

[State 10820, ]
type = Explod
trigger1 = numexplod(830) = 0
trigger1 = Time = 36
facing = 1                 ;キャラと同じ向きに表示（デフォ
postype = p1
pos = 100,-80
anim = 830
id = 830
sprpriority = 4
ownpal = 1
pausemovetime = 999999
supermovetime = 999999

[State 0, 円]
type = explod
trigger1 = time = 38
triggerall = numexplod(864) = 0 
anim = 864
id = 864
pos = 0,-80
postype = p2
ownpal = 1
shadow = 0,0,0
scale = .616,.85;.308,.425
pausemovetime = 999999
supermovetime = 999999
sprpriority = 3
persistent=0
ignorhitpause = 1

[State 3001, Width]
type = Width
trigger1 = time = 0
edge = 100,0

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = !var(31)
trigger1 = time = 38
value = ifelse(var(26)=1,-60,-110);-120

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = var(31)
trigger1 = time = 38
value = ifelse(var(26)=1,-90,-165);-120

[State 215]
type = HitAdd
trigger1 = Time = 38
value = 1

[State 0, shake]
type = envshake
trigger1 = time = 38
time = 15
freq = 90
ampl = -7
phase = 0
persistent = 0
ignorhitpause = 1

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 0
value = 1,9
;channel = 0

[State 1000, Spark]
type = null;helper
trigger1 = time = 0
stateno = 803
id = 1001
pos = 20, 0
sprpriority = 4
facing = ifelse(facing=1,1,-1)
postype = P1
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 0

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, pos]
type = null;playsnd
trigger1 = AnimTime = 0
value = 810,1
channel = 0

[State 810, ステート変更]
type = ChangeState
trigger1 = Time = 75
value = 0
ctrl = 1

[State 810, ステート変更]
type = null;ChangeState
triggerall = power >= 1000
trigger1 = time >= 15
trigger1 = time <= 20
trigger1 = command = "z"
value = 812
ctrl = 0
;---------------------------------------------------------------------------
;投げ成功（後方）
[Statedef 811]
type    = S
movetype= A
physics = N
anim = 802
velset = 0,0
sprpriority = 2

[STate 901,1]
type = turn
trigger1 = !time

[State 0, end]
type = changestate
trigger1 = time = [1,4]
;trigger1 = target,command = "holdfwd" || target,command = "holdback"
trigger1 = target,command = "c" || target,command = "y" || target,command = "z"
value = 880

[State 901,1]
type = targetBind
trigger1 = !var(49) && time = 0
pos = 90, -10
postype = P1
time = 1

[State 901,1]
type = targetBind
trigger1 = !var(49) && time = 38
pos = 110, -10
postype = P1
time = 1

[State 1027, Sound]
type = PlaySnd
trigger1 = numhelper(1001)=0
trigger1 = time = 38
value = 300,1

[State 1027, Sound]
type = PlaySnd
trigger1 = numhelper(1001)=1
trigger1 = time = 35
value = 1,18

[State 0, pos]
type = playsnd
trigger1 = time = 3
value = 810,0
channel = 0

[state 3000]
type = pause
trigger1 = time = 38
time = 16
movetime = 0

[State 10820, ]
type = Explod
trigger1 = numexplod(830) = 0
trigger1 = Time = 36
facing = 1                 ;キャラと同じ向きに表示（デフォ
postype = p1
pos = 100,-80
anim = 830
id = 830
sprpriority = 4
ownpal = 1
pausemovetime = 999999
supermovetime = 999999

[State 0, 円]
type = explod
trigger1 = time = 38
triggerall = numexplod(864) = 0 
anim = 864
id = 864
pos = 0,-80
postype = p2
ownpal = 1
shadow = 0,0,0
scale = .616,.85;.308,.425
pausemovetime = 999999
supermovetime = 999999
sprpriority = 3
persistent=0
ignorhitpause = 1

[State 3001, Width]
type = Width
trigger1 = time = 0
edge = 100,0

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = !var(31)
trigger1 = time = 38
value = ifelse(var(26)=1,-60,-110);-120

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = var(31)
trigger1 = time = 38
value = ifelse(var(26)=1,-90,-165);-120

[State 215]
type = HitAdd
trigger1 = Time = 38
value = 1

[State 0, shake]
type = envshake
trigger1 = time = 38
time = 15
freq = 90
ampl = -7
phase = 0
persistent = 0
ignorhitpause = 1

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 0
value = 1,9
;channel = 0

[State 1000, Spark]
type = null;helper
trigger1 = time = 0
stateno = 803
id = 1001
pos = 20, 0
sprpriority = 4
facing = ifelse(facing=1,1,-1)
postype = P1
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 0

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, pos]
type = null;playsnd
trigger1 = AnimTime = 0
value = 810,1
channel = 0

[State 810, ステート変更]
type = ChangeState
trigger1 = Time = 75
value = 0
ctrl = 1

[State 810, ステート変更]
type = null;ChangeState
triggerall = power >= 1000
trigger1 = time >= 15
trigger1 = time <= 20
trigger1 = command = "z"
value = 812
ctrl = 0
;---------------------------------------------------------------------------
;成功（helper）
[Statedef 813]
type    = S
movetype= A
physics = N
anim = 803
poweradd = 0

[State 1065, 3]
type = bindtoparent
trigger1 = 1
pos = 20,0
time = 1
ignorehitpause = 1

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = facing != parent,facing

[State 230, 2]
type = changestate
trigger1 = animtime = 0
trigger2 = root,stateno = 930
value = 1002
;---------------------------------------------------------------------------
;投げぬけ 自分
[Statedef 880]
type = S
movetype = I
physics = S
anim = 808+var(49)
velset = 0,0

[State 800]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, pos]
type = playsnd
trigger1 = !time
value = 6,14

[State 810]
type = Pause
trigger1 = time = 0
time = 20
movetime = 0

[State 0, 円]
type = explod
trigger1 = !time
anim = 863
id = 868
pos = 15,-80
postype = p1
sprpriority = 4
ownpal = 1
shadow = 0,0,0
scale = .558,.715
pausemovetime = 999999
supermovetime = 999999

[State 0, target]
type = Sprpriority
trigger1 = var(49)=10000
value = 1

[State 0, target]
type = targetbind
trigger1 = !time
pos = 50,0

[State 0, target]
type = targetstate
trigger1 = !time
value = 891

[State 810]
type = VelAdd
trigger1 = time = 1
x = -7

[State 800, ステート変更]
type = ChangeState
Trigger1 = Time >= 30
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 投げ抜け待機モーション(相手)
[Statedef 890]
type     = S
movetype = H
physics  = N
poweradd = 0

[State -2]
type = VelSet
trigger1 = 1
x = 0
ignorehitpause = 1

[State 800]
type = ChangeAnim
trigger1 = time = 0
value = 150

[State 800]
type = NotHitBy
trigger1 = 1
value = SCA

[State 800, ステート変更]
type = SelfState
Trigger1 = Time >= 300
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 投げ抜けモーション(相手)
[Statedef 891]
type     = S
movetype = H
physics  = S
poweradd = 0

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SAC
Time = 1

[State -2]
type = VelSet
trigger1 = time = 0
x = 0
ignorehitpause = 1

[State 800]
type = VelAdd
trigger1 = time = 0
x = -7

[State 800, 制御した相手のアニメ変更]
type = ChangeAnim
Trigger1 = Time = 0
value = 150

[State 800, 制御した相手のアニメ変更]
type = ChangeAnim
Trigger1 = Time = 0
Trigger1 = selfAnimExist(5940) = 1
value = 5940

[State 800, ステート変更]
type = SelfState
Trigger1 = Time >= 30
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;投げスパコン
[Statedef 812]
type    = S
movetype= A
physics = N
anim = 804
poweradd = 0
sprpriority = 2

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 100, 18
channel = 0

[State 0, ]
type = PlaySnd
trigger1 = animelem = 1
value = 4, 0

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = time = 1
value = -1000

[State 4200,01]
type = superPause
trigger1 = Time = 0
moveTime = 50
Time = 50
ctrl = 0
anim = -1

[State 4200,02]
type = BGPalfx
trigger1 = Time = 0
mul = 175,175,175
time = 50
ignorehitpause = 1

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "cutin"
;stateno = ifelse(facing = 1,23101,23102)
stateno = 23101
id = 3101
pos = -20,-40
postype = back
pausemovetime = 999999
supermovetime = 999999
size.xscale = .5
size.yscale = .5
facing = 1

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "line"
;stateno = ifelse(facing = 1,23101,23102)
stateno = 23105
id = 3105
pos = 0,15
postype = left
pausemovetime = 999999
supermovetime = 999999
size.xscale = 0.5
size.yscale = 0.5
facing = 1

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "lineB"
;stateno = ifelse(facing = 1,23101,23102)
stateno = 23106
id = 3106
pos = 0,-190
postype = right
pausemovetime = 999999
supermovetime = 999999
size.xscale = 0.5
size.yscale = 0.5
facing = 1

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = time = 52
value = -185

[State 10820, ]
type = Explod
trigger1 = Time = 52
facing = 1                 ;キャラと同じ向きに表示（デフォ
postype = p2
pos = 0,-80
anim = 911
sprpriority = 5
ownpal = 1
scale = 1.5, 1.5

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 52
value = 300,2

[State 810, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; こっちは制御を奪った相手の食らいステート。
; 相手の制御を解く場合、「ChangeState」のコントローラにしてしまうと
;「相手が制御を奪われた状態のままになるバグ」が発生してしまう。
; なので必ず『SelfState』で相手のステートに戻し、制御を解除しないといけない。
; そこさえ注意しておけば、自由に相手の食らいモーションを設定出来る。
;
; デバッグ表示中に相手の情報の一部の文字が黄色になったら、それが
; P2StateNoやTargetStateで制御を奪われた状態の証。
; 投げが成功したらCtrl+Dで相手側の情報を確認だ！m9っ｀Д´)
;---------------------------------------------------------------------------
;相手側
[Statedef 820]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 3

[State 2500, ScreenBound]
type = screenbound
trigger1 = 1
value = 1
movecamera = 30,10

[State 1060, 2]
type = changeanim2
trigger1 = time = 0
value = 806

[State 1060, 2]
type = changeanim
trigger1 = SelfAnimExist(5052)
trigger1 = time = 42
value = 5052

[State 1061, 2]
type = Velset
trigger1 = time = [42,47]
y = -1
x = -10

[State 1061, 2]
type = null;Velset
trigger1 = time = [47,52]
y = -2
x = -5

[State 1061, 2]
type = null;Velset
trigger1 = time = 52
y = 0
x = -2

[State 1061, 2]
type = Veladd
trigger1 = time >= 47
y = .2

[State 1061, 2]
type = Velset
trigger1 = time > 65
trigger1 = Pos Y >= 0
y = 0
x = 0

[state 3000]
type = nothitby
trigger1 = 1
value = SCA

[State 810, ステート変更]
type = ChangeState
trigger1 = time > 45
trigger1 = Pos Y >= -1
value = 10427

[State 820, 4]
type = SelfState;キャラのコントロールを相手に返します。
trigger1 = time > 45
trigger1 = Pos Y >= 0
value = 5110
;---------------------------------------------------------------------------
;相手側(後)
[Statedef 821]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 0

[State 100, 2]
type = turn
trigger1 = time = 0

[State 2500, ScreenBound]
type = screenbound
trigger1 = 1
value = 1
movecamera = 30,10

[State 1060, 2]
type = changeanim2
trigger1 = time = 0
value = 806

[State 1060, 2]
type = changeanim
trigger1 = SelfAnimExist(5052)
trigger1 = time = 42
value = 5052

[State 1061, 2]
type = Velset
trigger1 = time = [42,47]
y = -1
x = -10

[State 1061, 2]
type = null;Velset
trigger1 = time = [47,52]
y = -2
x = -5

[State 1061, 2]
type = null;Velset
trigger1 = time = 52
y = 0
x = -2

[State 1061, 2]
type = Veladd
trigger1 = time >= 47
y = .2

[State 1061, 2]
type = Velset
trigger1 = time > 65
trigger1 = Pos Y >= 0
y = 0
x = 0

[state 3000]
type = nothitby
trigger1 = 1
value = SCA

[State 810, ステート変更]
type = ChangeState
trigger1 = time > 45
trigger1 = Pos Y >= -1
value = 10427

[State 820, 4]
type = SelfState;キャラのコントロールを相手に返します。
trigger1 = time > 45
trigger1 = Pos Y >= 0
value = 5110
;---------------------------------------------------------------------------
; ※３：GetHitVar
;
; 　食らってしまった『相手の攻撃の効果』を
; 　自分側が「特殊な変数」に変換して判断するトリガー。
;　「GetHitVar(**)」の『**』に該当する、予め決められているパラメータを全て紹介。
;
; 　大概「相手のHitDefとProjectileのパラメータ」から引き出すので、かなり多い（苦笑
;
;
; 　XVelAdd             = 自分が負けて吹っ飛んだ時の「Ｘ軸方向の加速度(float)」を計測する
; 　YVelAdd             = 自分が負けて吹っ飛んだ時の「Ｙ軸方向の加速度(float)」を計測する
; 　Type                = 自分の「食らいアニメの種類」。（0=None・1=High・2=Low・3=Trip）
; 　AnimType            = 相手のHitDefに設定されている「animtype」を判断する
;                        （0=Light・1=Medium・2=Hard・3=Back・4=Up・5=DiagUp）
; 　GroundType          = 相手のHitDefに設定されている「ground.type」を判断する
; 　AirType             = 相手のHitDefに設定されている「air.type」を判断する
;
; 　Damage              = 相手から食らってしまった「ダメージ量」を計測する
; 　HitCount            = 相手の「現在のヒット数」を計測する
; 　FallCount           = 自分が「地面に激突した回数」を判断する
; 　HitShakeTime        = 自分の「ヒット硬直時間」を計測する
; 　HitTime             = 自分の「食らい時間」を計測する
; 　SlideTime           = 相手のHitDefに設定されている「slidetime」を判断する
; 　CtrlTime            = 相手のHitDefに設定されている「(air)guard.ctrltime」を判断する
; 　RecoverTime         = 横に倒れている時の「起き上がるまでの時間」を判断する
;
; 　XOff                = 相手のHitDefに設定されている「"snap"のＸ軸」を判断する（非推奨）
; 　YOff                = 相手のHitDefに設定されている「"snap"のＹ軸」を判断する（非推奨）
; 　ZOff                = 相手のHitDefに設定されている「"snap"のＺ軸」を判断する？（存在しないので無意味）
;
; 　XVel                = 相手のHitDefに設定されている「Ｘ軸の食らい状態の移動速度」を判断する
; 　YVel                = 相手のHitDefに設定されている「Ｙ軸の食らい状態の移動速度」を判断する
; 　YAccel              = 相手のHitDefに設定されている「yaccel」を判断する
; 　chainID             = 相手のHitDefに設定されている「chainID」を判断する
; 　Guarded             =「相手のコンボでの最後の攻撃をガードした場合」を判断する
; 　IsBound             =「TargetBindで掴まれてる状態」を判断する
;
; 　Fall                = 相手のHitDefに設定されている「fall」を判断する
; 　Fall.Damage         = 相手のHitDefに設定されている「fall.damage」を判断する
; 　Fall.XVel           = 相手のHitDefに設定されている「fall.xvelocity」を判断する
; 　Fall.YVel           = 相手のHitDefに設定されている「fall.yvelocity」を判断する
; 　Fall.Recover        = 相手のHitDefに設定されている「fall.recover」を判断する
; 　Fall.RecoverTime    = 相手のHitDefに設定されている「fall.recovertime」を判断する
; 　Fall.Kill           = 相手のHitDefに設定されている「fall.kill」を判断する
; 　Fall.EnvShake.Time  = 相手のHitDefに設定されている「fall.envshake.time」を判断する
; 　Fall.EnvShake.Freq  = 相手のHitDefに設定されている「fall.envshake.freq」を判断する
; 　Fall.EnvShake.Ampl  = 相手のHitDefに設定されている「fall.envshake.ampl」を判断する
; 　Fall.EnvShake.Phase = 相手のHitDefに設定されている「fall.envshake.phase」を判断する
;
;---------------------------------------------------------------------------
;Son掴み
[Statedef 10800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 10800
sprpriority = 0

[State 0, pos]
type = playsnd
trigger1 = time = 1
value = 800,0+(random%2)
channnel = 0

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 3
value = 0,5

[State 900, 1]
type = HitDef
triggerall = P2movetype != H
triggerall = P2bodydist X = [-const(size.ground.front),40]
trigger1 = AnimElem = 1
attr = S, NT
hitflag = M-
priority = 3, Miss    
sparkno = -1
p1facing = 1
p1stateno = 10810
p2facing = 1
p2stateno = 820
guard.dist = 0
getpower = ifelse(helper(8500),fvar(8)=0,80,80*1.1)
givepower = 40
air.fall = 1
fall = 1
fall.recover = 0
hitonce = 1
numhits = 0
envshake.time = 10
envshake.freq = 40
envshake.ampl = -4
id = 800

[State 800, ステート変更]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Son掴み(後方)
[Statedef 10801]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 10800
sprpriority = 0

[State 0, pos]
type = playsnd
trigger1 = time = 1
value = 800,0+(random%2)
channnel = 0

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 3
value = 0,5

[State 900, 1]
type = HitDef
triggerall = P2movetype != H
triggerall = P2bodydist X = [-const(size.ground.front),40]
trigger1 = AnimElem = 1
attr = S, NT
hitflag = M-
priority = 3, Miss    
sparkno = -1
p1facing = 1
p1stateno = 10811
p2facing = 1
p2stateno = 821
guard.dist = 0
getpower = ifelse(helper(8500),fvar(8)=0,80,80*1.1)
givepower = 40
air.fall = 1
fall = 1
fall.recover = 0
hitonce = 1
numhits = 0
envshake.time = 10
envshake.freq = 40
envshake.ampl = -4
id = 800

[State 800, ステート変更]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Son投げ成功（前方）
[Statedef 10810]
type    = S
movetype= A
physics = N
anim = 10801
sprpriority = 0

[State 0, end]
type = changestate
trigger1 = time = [1,4]
;trigger1 = target,command = "holdfwd" || target,command = "holdback"
trigger1 = target,command = "c" || target,command = "y" || target,command = "z"
value = 880

[State 10820, ]
type = Explod
trigger1 = numhelper(1001)=0
trigger1 = Time = 42
facing = 1
postype = p2
pos = -40,-80
anim = 912
sprpriority = 5
ownpal = 1

[State 0, D4爆発]
type = explod
trigger1 = numhelper(1001)=0
trigger1 = Time = 42
anim = 914
id = 914
postype = p2
pos = -40,-80
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = 0.5,0.5
;pausemovetime = 999999
;supermovetime = 999999

[State 1027, Sound]
type = PlaySnd
trigger1 = numhelper(1001)=0
trigger1 = time = 38
value = 300,1

[State 1027, Sound]
type = PlaySnd
trigger1 = numhelper(1001)=1
trigger1 = time = 38
value = 0,5

[State 0, pos]
type = playsnd
trigger1 = time = 30
value = 810,0
channnel = 0

[State 3001, Width]
type = Width
trigger1 = time = 0
edge = 100,0

[State 901,1]
type = targetBind
trigger1 = time = 0
pos = 40, 0
postype = P1
time = 1

[State 901,1]
type = targetBind
trigger1 = time = 17
pos = -10, 0
postype = P1
time = 1

[State 901,1]
type = targetBind
trigger1 = time = 119
pos = -30, 0
postype = P1
time = 1

[State 901,1]
type = targetBind
trigger1 = time = 37
pos = 30, 0
postype = P1
time = 1

[State 901,1]
type = targetBind
trigger1 = time = 39
pos = 50, 0
postype = P1
time = 1

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = numhelper(1001)=0
trigger1 = time = 42
value = -120

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = numhelper(1001)=1
trigger1 = time = 42
value = -30

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 10
value = 1,9

[State 1000, Spark]
type = null;helper
trigger1 = time = 0
stateno = 803
id = 1001
pos = 20, 0
sprpriority = 4
facing = ifelse(facing=1,1,-1)
postype = P1
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 0

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, pos]
type = null;playsnd
trigger1 = AnimTime = 0
value = 810,1
channnel = 0

[State 810, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 810, ステート変更]
type = null;ChangeState
triggerall = power >= 1000
trigger1 = time >= 15
trigger1 = time <= 20
trigger1 = command = "z"
value = 812
ctrl = 0
;---------------------------------------------------------------------------
;Son投げ成功（後方）
[Statedef 10811]
type    = S
movetype= A
physics = N
anim = 10802
sprpriority = 0

[State 0, end]
type = changestate
trigger1 = time = [1,4]
;trigger1 = target,command = "holdfwd" || target,command = "holdback"
trigger1 = target,command = "c" || target,command = "y" || target,command = "z"
value = 880

[State 0, pause]
type = pause
;trigger1 = time = [30,32]
;trigger1 = time % 2= 0
trigger1 = Time = 32
time = 8
movetime = 0

[State 0, pause]
type = pause
trigger1 = Time = 34
time = 5
movetime = 0

[State 0, pause]
type = pause
trigger1 = Time = 36
time = 2
movetime = 0

[State 10820, ]
type = Explod
trigger1 = numhelper(1001)=0
trigger1 = Time = 30
facing = 1                 ;キャラと同じ向きに表示（デフォ
postype = p2
pos = 20,-80
anim = 912
sprpriority = 0
ownpal = 1

[State 0, D4爆発]
type = explod
trigger1 = numhelper(1001)=0
trigger1 = Time = 30
anim = 914
id = 914
postype = p2
pos = 20,-80
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = 0.5,0.5
;pausemovetime = 999999
;supermovetime = 999999

[State 1027, Sound]
type = PlaySnd
trigger1 = numhelper(1001)=0
trigger1 = time = 30
value = 300,1

[State 1027, Sound]
type = PlaySnd
trigger1 = numhelper(1001)=1
trigger1 = time = 30
value = 0,5

[State 0, pos]
type = playsnd
trigger1 = time = 25
value = 810,0
channnel = 0

[State 3001, Width]
type = Width
trigger1 = time = 0
edge = 100,0

[State 901,1]
type = targetBind
trigger1 = time = 0
pos = 40, 0
postype = P1
time = 1

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = numhelper(1001)=0
trigger1 = time = 32
value = -120

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = numhelper(1001)=1
trigger1 = time = 32
value = -30

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 0
value = 1,9

[State 1000, Spark]
type = null;helper
trigger1 = time = 0
stateno = 803
id = 1001
pos = 20, 0
sprpriority = 4
facing = ifelse(facing=1,1,-1)
postype = P1
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 0

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1061, 2]
type = Velset
trigger1 = time = [31,35]
x = 5

[State 1061, 2]
type = Velset
trigger1 = time = [35,60]
x = 3

[State 1061, 2]
type = Veladd
trigger1 = vel x > 0
trigger1 = time = [60,80]
x = -0.15

[State 0, pos]
type = null;playsnd
trigger1 = Time = 80
value = 810,1
channnel = 0

[State 810, ステート変更]
type = ChangeState
trigger1 = Time = 80
value = 0
ctrl = 1

[State 810, ステート変更]
type = null;ChangeState
triggerall = power >= 1000
trigger1 = time >= 15
trigger1 = time <= 20
trigger1 = command = "z"
value = 812
ctrl = 0
;---------------------------------------------------------------------------
;血の目潰し
[Statedef 900]
type    = S
movetype= A
physics = S
anim = 900+var(49)
sprpriority = 1
velset = 0,0
ctrl = 0
poweradd = -500

[State 8500, 1]
type = varset
trigger1 = !time
var(25) = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 0, vel]
type = null;velset
triggerall = command != "holdfwd"
trigger1 = time <= 8
x = 4

[State 0, vel]
type = velset
;triggerall = command = "holdfwd"
trigger1 = time <= 8
x = 12

[State 52, 3 s]
type = PlaySnd
trigger1 = Time = 0
value = 1, 6

[State 52, 3 s]
type = PlaySnd
trigger1 = Time = 0
value = 1, 14

[State 52, 3 s]
type = PlaySnd
trigger1 = Time = 0
value = 1, 15

[State 0, hitby]
type = hitby
trigger1 = 1
value = SCA,AT

[State 0, explod]
type = explod
trigger1 = time = 0
anim = 110
id = 110
pos = 10,-70
postype = p1
scale = .5,.5
sprpriority = 3
pausemovetime = 999999
supermovetime = 999999
bindtime = -1

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 0, vel]
type = velset
trigger1 = anim = 101+var(0)
x = 0

[State 181, EnvColor]
type = Bgpalfx
trigger1 = time = [0,2]
time = 1
invertall = 1
add = 205,205,205
;color = 0
ignorehitpause = 1

[State 181, EnvColor]
type = Bgpalfx
trigger1 = time = [2,18]
time = 1
invertall = 1
add = 128,0,0
;color = 0
ignorehitpause = 1

[State 181, EnvColor]
type = Bgpalfx
trigger1 = time = [18,20]
time = 1
invertall = 1
add = 205,205,205
;color = 0
ignorehitpause = 1

[state 3000]
type = null;pause
trigger1 = time = [2,18]
trigger1 = time%2
time = 1
movetime = 99999

[State 702, helper]
type = helper
trigger1 = time = 0
helpertype = normal
name = "blood"
id = 905
pos = 10,-80
postype = p1
keyctrl = 0
sprpriority = 3
stateno = 905
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 101, 3]
type = ChangeState
trigger1 = time = 20
value = 901
;------------------------------------------------------------------------------------------
;停止
[Statedef 901]
type = S
physics = S
anim = 901+var(49)
ctrl = 0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 100, 1]
type = VelSet
trigger1 = animtime = 0
x = 0

[State 220, Position]
type = null;CtrlSet
trigger1 = Time = 7
value = 1

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = NoWalk
flag2 = NoAutoTurn

[State 101, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;血
[Statedef 905]
type    = A
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 918
sprpriority = 2
facep2 = 1

[State 0, vel]
type = veladd
trigger1 = time <= 15
x = .9

[State 0, vel]
type = velset
trigger1 = time = 15
x = 15

[State 200, 音を鳴らす]
type = null;PlaySnd
trigger1 = Time = 1
value = 200, 0

[State 200, ヒット定義]
type = HitDef
trigger1 = !time
attr = S, NA
damage = 0*fvar(1), 0
animtype = hard
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 8
getpower = ifelse(helper(8500),fvar(8)=0,50,50*1.1)
givepower = 20
sparkno = s917
guard.sparkno = s917
sparkxy = -10, -10
hitsound = s1, 0
guardsound = s1, 5
ground.type = High
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -2
airguard.velocity = -2,-.8
air.type = High
air.velocity = -2,-4
;air.velocity = -2,ifelse(var(40)<30,-3+(var(40)*0.2),ifelse((var(40)*0.2)<0,0,(var(40)*0.2)))
air.hittime = 26
fall = 0
fall.recover = 0
air.fall = 0
guard.kill = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
;p2facing = 1

[State 200, ステート変更]
type = destroyself
trigger1 = AnimTime = 0
;===========================================================================
; 必殺技
;===========================================================================
;---------------------------------------------------------------------------
;被ダメ時スタンド消去(スタンド被ダメ)
[Statedef 9500]
type = U
movetype = H
physics = N
ctrl = 0
anim = 9500
velset = 0,0
sprpriority = -1

[State -2, エフェクトを消す];挑発KQ腕
type = RemoveExplod
trigger1 = root,stateno != 195
ID = 9198

[State 230, 2]
type = assertspecial
triggerall = root,var(49) = 10000
trigger1 = 1
flag = invisible

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[state 301, ]
type=null;parentvarset
trigger1 = !time 
var(54) = 0

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, stopsnd]
type = stopsnd
trigger1 = time = 1
channel = 0

[State 0, end]
type = changestate
trigger1 = HitShakeOver
value = 9520
;---------------------------------------------------------------------------
;被ダメ時スタンド消去2
[Statedef 9520]
type = U
movetype = H
physics = N
ctrl = 0
anim = 9501
velset = 0,0
sprpriority = -1

[State 230, 2]
type = assertspecial
triggerall = root,var(49) = 10000
trigger1 = 1
flag = invisible

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, vel]
type = veladd
trigger1 = 1
y = GetHitVar(yaccel)

[State 0, hitvel]
type = null;hitvelset
trigger1 = prevstateno = 9500
trigger1 = !time
x = 1
y = 1

[State 0, hitvel]
type = null;velset
trigger1 = prevstateno = 9505
trigger1 = !time
x = -2
y = -4

[State 0, pos]
type = posfreeze
trigger1 = time >= 4

[State 0, scale]
type = angledraw
trigger1 = time < 12
scale = (const(size.xscale)-(.08*time)),(const(size.yscale)+(.03*time))

;[State 0, scale]
;type = angledraw
;trigger1 = time < 12
;scale = (const(size.xscale)+(.04*time)),(const(size.yscale)-(.075*time))

[State 0, anim]
type = changeanim
trigger1 = time = 12
value = 36400

[State 230, 2]
type = destroyself
triggerall = !time
trigger1 = prevstateno = 10099

[State 191, 3]
type = PlaySnd
triggerall = root,var(49) = 0
trigger1 = time = 10
value = 6,6

[State 0, 円]
type = explod
triggerall = root,var(49) = 0
trigger1 = time = 5
anim = 866
id = 867
pos = 0,-80
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .508,.645
pausemovetime = 999999
supermovetime = 999999

[State 0, end]
type = destroyself
trigger1 = HitOver && time >= 12
;ｽﾀﾝﾄﾞ被ダメでｽﾀﾝﾄﾞ消滅のとき、本体もダメージ受ける
;---------------------------------------------------------------------------
; 食らい(スタンド)
[Statedef 1020]
type    = U
movetype= H
physics = N
ctrl = 0
velset = 0,0
anim = 1020
sprpriority = 0

[State -2, エフェクトを消す];挑発KQ腕
type = RemoveExplod
trigger1 = !time
ID = 9198

[State 230, 2]
type = statetypeset
trigger1 = root,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = root,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = root,statetype = A
statetype = A
ignorehitpause = 1

[State 16500]
type = ParentVarSet
trigger1 = time = 0
v = 11
value = GetHitVar(damage)

[State 210, 音を鳴らす]
type = PlaySnd
trigger1 = time = 20
value = 100, 1

[State 0, scale]
type = angledraw
trigger1 = time > 20
scale = (const(size.xscale)-(.08*(time-20))),(const(size.yscale)+(.06*(time-20)))

[State 0, 円]
type = null;explod
trigger1 = !animtime
anim = 866
id = 867
pos = 0,-80
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .508,.645
pausemovetime = 999999
supermovetime = 999999

[State 16500]
type = DestroySelf
trigger1 = time = 32
trigger2 = root,var(49) = 10000
trigger2 = !time
trigger3 = numhelper(1001) > 1
ignorhitpause = 1
;-------------------------------------------------------------------
;ｽﾀﾝﾄﾞ被ダメでｽﾀﾝﾄﾞ消滅のとき、本体もダメージ受ける
[Statedef 16502];立ち
type    = S
movetype= H
physics = S
velset = -2,0
anim = 5000

[State 0]
type = LifeAdd
trigger1 = time = 0
value = -var(11)
absolute = 1 ;指定した値が増減されます。省略時0で、相手の防御力が考慮される

[State 0];リセット
type = VarSet
trigger1 = time = 0
var(11) = 0

[State 0, なにぃっ]
type = PlaySnd
trigger1 = time = 0
value = 5,1
channel = 0

[State -2]
type = ChangeState
trigger1 = time= 20
value = 0
ctrl = 1

[State -2]
type = ChangeState
trigger1 = !alive
value = 5050
ctrl = 0
;-------------------------------
[Statedef 16503];しゃがみ
type    = C
movetype= H
physics = S
velset = -2,0
anim = 5020

[State 0]
type = LifeAdd
trigger1 = time = 0
value = -var(11)
absolute = 1

[State 0];リセット
type = VarSet
trigger1 = time = 0
var(11) = 0

[State 0, なにぃっ]
type = PlaySnd
trigger1 = time = 0
value = 5,1
channel = 0

[State -2]
type = ChangeState
trigger1 = time= 20
value = 11
ctrl = 1

[State -2]
type = ChangeState
trigger1 = !alive
value = 5050
ctrl = 0
;-------------------------------
[Statedef 16504];空中
type    = A
movetype= H
physics = A
velset = -2,0
anim = 5050

[state 3000]
type = nothitby
trigger1 = 1
value = SCA

[State 0]
type = LifeAdd
trigger1 = time = 0
value = -var(11)
absolute = 1

[State 0];リセット
type = VarSet
trigger1 = time = 0
var(11) = 0

[State 0, なにぃっ]
type = PlaySnd
trigger1 = time = 0
value = 5,1
channel = 0

[State -2]
type = ChangeState
trigger1 = Vel Y > 0    ;下方に移動している場合、正の値
trigger1 = Pos Y >= -10 ;地面を0、下方向を正、上方向を負
value = 5100;地面に激突

[State -2]
type = ChangeState
trigger1 = !alive
value = 5050
ctrl = 0
;---------------------------------------------------------------------------
;時は再び刻み始める！
[Statedef 1000]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 1000, 0
channel = 0

[State 1000, 7]
type = Helper
triggerall = var(49) = 0
triggerall = !time
trigger1 = !numhelper(1001)
trigger2 = helper(1001),stateno = 1102
trigger3 = helper(1001),stateno = 206 || helper(1001),stateno = 216 || helper(1001),stateno = 226
trigger4 = helper(1001),stateno = 406 || helper(1001),stateno = 416 || helper(1001),stateno = 426
trigger5 = numhelper(1001) < 2
trigger5 = helper(1001),stateno = 417 ||helper(1001),stateno = 418
helpertype = normal
name = "king crimson"
stateno = 1001
id = 1001
pos = 0, 0
postype = p1
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00

[State 1000, 7]
type = Helper
trigger1 = time = 46
helpertype = normal
name = "efect"
stateno = 1004
id = 1004
pos = 25, -90
postype = p1
ownpal = 1
facing = 1
size.xscale = 0.5
size.yscale = 0.5

[State 1000, 音を鳴らす]
type = varset
trigger1 = time = 46
v = 27
value = 1

[State 901, Throw]
type = attackdist
trigger1 = 1
value = 0

[State 1000, ステート変更];⑨
type = ChangeState
trigger1 = var(59)<=0
trigger1 = time >= 16
trigger1 = command != "hold_x"
trigger2 = time = 46
value = 1005
;---------------------------------------------------------------------------
;MAX溜めエフェクト
[Statedef 1004]
type = S
ctrl = 0
anim = 1004
velset = 0,0
sprpriority = -1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, scale]
type = angledraw
trigger1 = time >= 0
scale = .5+(time)*.09,.5+(time)*.09

[State 0, scale]
type = Trans
trigger1 = time >= 0
trans = addalpha
alpha = 256+(time)*-32,256

[State 200, 音を鳴らす]
type = null;PlaySnd
trigger1 = animelem =  2
value = 6,5

[State 181, 無敵]
type = destroyself
trigger1 = time = 8
;---------------------------------------------------------------------------
;時は再び刻み始める！　発射
[Statedef 1005]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1005
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす]
type = null;PlaySnd
trigger1 = animelem = 1
value = 1100, 0
channel = 0

[State 901, Throw]
type = attackdist
trigger1 = 1
value = 0

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;時は再び刻み始める！ KC(スタンド)
[Statedef 1001]
type    = S
movetype= I
physics = S
poweradd= 0
ctrl = 0
anim = 1001
sprpriority = 0
facep2 = 1

[State 1065, 3]
type = bindtoparent
trigger1 = 1
pos = -10,-15
time = 1
ignorehitpause = 1

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = time = 0
trigger1 = facing != parent,facing

[State 301,]
type = NotHitBy
trigger1 = 1   
value = SCA    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 3
value = 1, 13

[State 0, 円]
type = explod
trigger1 = movehit
triggerall = numexplod(864) = 0 
anim = 864
id = 864
pos = 0,-40
postype = p2
ownpal = 1
shadow = 0,0,0
scale = .616,.85;.308,.425
pausemovetime = 999999
supermovetime = 999999
sprpriority = 3
persistent=0
ignorhitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 1
ignorehitpause = 1

[State 230, 2];プッツン時スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno = 3090
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1005
value = 1006
;---------------------------------------------------------------------------
;時は再び刻み始める！ KC(スタンド) 攻撃
[Statedef 1006]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
anim = 1006
sprpriority = 0
facep2 = 1

[State -2, 補正適用]
type=null;attackmulset
trigger1=!root,var(31)
value=ifelse(root,life <= 300,ifelse(p2movetype=A,1.2*2,1.2),ifelse(p2movetype=A,2,1))

[State -2, 補正適用]
type=null;attackmulset
trigger1=root,var(31)
value=ifelse(root,life <= 300,ifelse(p2movetype=A,1.8*2,1.8),ifelse(p2movetype=A,3,1.5))

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = root,var(28) = 0
trigger1 = numtarget
trigger2 = root,var(28) = 1
trigger2 = movehit
value = 60
persistent = 0

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = time = 0
trigger1 = facing != parent,facing

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 1010, 移動速度]
type = VelSet
trigger1 = root,var(27) = 0
trigger1 = !time
x = 6

[State 1010, 移動速度]
type = VelSet
trigger1 = root,var(27) = 1
trigger1 = !time
x = 48

[State 1010, 移動速度]
type = VelSet
triggerall = root,var(27) = 1
trigger1 = time = 3
trigger2 = movehit
trigger2 = p2bodydist x = [-20,20]
x = 2
persistent = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 1, 12

[State 0, 円]
type = explod
trigger1 = movehit
triggerall = numexplod(864) = 0 
anim = 864
id = 864
pos = 0,-80
postype = p2
ownpal = 1
shadow = 0,0,0
scale = .616,.85;.308,.425
pausemovetime = 999999
supermovetime = 999999
sprpriority = 3
persistent=0
ignorhitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 0
trigger1 = root,var(28) = 0
trigger1 = time = 0
attr = S, NA
damage = 55*root,fvar(1),14
animtype = Light
guardflag = M
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 0;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -1*const(size.xscale)
guard.velocity = -8
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12
fall = 0
fall.recover = 0
air.fall = 1
p2stateno = 1070
p2facing = 1
guard.kill = 0

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 0
trigger1 = root,var(28) = 1
trigger1 = time = 0
attr = S, NA
damage = 55*root,fvar(1),10
animtype = Light
guardflag = M
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 0;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -4*const(size.xscale),-6
air.type = High
air.velocity = -4,ifelse(root,var(40)<30,-6+(root,var(40)*0.3),ifelse((root,var(40)*0.8)<0,0,(root,var(40)*0.8)))
air.hittime = 12
fall = 1
fall.recover = 0
air.fall = 1
p2facing = 1
guard.kill = 0

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 1
trigger1 = root,var(28) = 0
trigger1 = time = 0
attr = S, NA
damage = 80*root,fvar(1),14
animtype = Light
guardflag = 
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 0;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -1*const(size.xscale)
guard.velocity = -8
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12
fall = 0
fall.recover = 0
air.fall = 1
p2stateno = 1070
p2facing = 1
guard.kill = 0

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 1
trigger1 = root,var(28) = 1
trigger1 = time = 0
attr = S, NA
damage = 80*root,fvar(1),10
animtype = Light
guardflag = 
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 80;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -4*const(size.xscale),-6
air.type = High
air.velocity = -4,ifelse(root,var(40)<30,-6+(root,var(40)*0.4),ifelse((root,var(40)*0.8)<0,0,(root,var(40)*0.8)))
air.hittime = 12
fall = 1
fall.recover = 0
air.fall = 1
p2facing = 1
guard.kill = 0

[State 0, var]
type = parentvarset
trigger1 = movehit
var(28) = 1

[State 230, 2]
type = changestate
triggerall = helper(1001),stateno != 418
trigger1 = numtarget
trigger1 = target,statetype = A
trigger1 = animtime = 0
value = 418

[State 0, shake]
type = envshake
trigger1 = movehit
time = 8
freq = 90
ampl = -7
phase = 0
persistent = 0
ignorhitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 1
ignorehitpause = 1

[State 230, 2];プッツン時スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno = 3090
ignorehitpause = 1

[State 230, 2]
type = null;changestate
trigger1 = root,stateno = 700
value = 1103
ignorehitpause = 1

[State 1000, 7]
type = Helper
trigger1 = numtarget
trigger1 = numhelper(1045) = 0
helpertype = normal
name = "marker"
stateno = 1045
id = 1045
pos = 0, 0
postype = p2
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00

[State 230, 2]
type = changestate
trigger1 = !animtime
value = 1102
;---------------------------------------------------------------------------
;時は再び刻み始める！M
[Statedef 1010]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1010
ctrl = 0
sprpriority = 2

[State 901, Throw]
type = attackdist
trigger1 = 1
value = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 1000, 0
channel = 0

[State 1000, 7]
type = Helper
triggerall = var(49) = 0
triggerall = !time
trigger1 = !numhelper(1001)
trigger2 = helper(1001),stateno = 1102
trigger3 = helper(1001),stateno = 206 || helper(1001),stateno = 216 || helper(1001),stateno = 226
trigger4 = helper(1001),stateno = 406 || helper(1001),stateno = 416 || helper(1001),stateno = 426
trigger5 = numhelper(1001) < 2
trigger5 = helper(1001),stateno = 417 ||helper(1001),stateno = 418
helpertype = normal
name = "king crimson"
stateno = 1011
id = 1001
pos = 0, 0
postype = p1
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00

[State 1000, 7]
type = Helper
trigger1 = time = 52
helpertype = normal
name = "efect"
stateno = 1004
id = 1004
pos = 25, -90
postype = p1
ownpal = 1
facing = 1
size.xscale = 0.5
size.yscale = 0.5

[State 1000, 音を鳴らす]
type = varset
trigger1 = time = 52
v = 27
value = 1

[State 1000, ステート変更];⑨
type = ChangeState
trigger1 = var(59)<=0
trigger1 = time >= 22
trigger1 = command != "hold_y"
trigger2 = var(59)<=0
trigger2 = time = 52
trigger3 = var(59)>0
trigger3 = time >= 22
value = 1015
;---------------------------------------------------------------------------
;時は再び刻み始める！　発射
[Statedef 1015]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1015
ctrl = 0
sprpriority = 2

[State 901, Throw]
type = attackdist
trigger1 = 1
value = 0

[State 1000, 音を鳴らす]
type = null;PlaySnd
trigger1 = animelem = 1
value = 1100, 0
channel = 0

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;時は再び刻み始める！ KC(スタンド)
[Statedef 1011]
type    = S
movetype= I
physics = S
poweradd= 0
ctrl = 0
anim = 1011
sprpriority = 0
facep2 = 1

[State 1065, 3]
type = bindtoparent
trigger1 = 1
pos = -10,-15
time = 1
ignorehitpause = 1

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = time = 0
trigger1 = facing != parent,facing

[State 301,]
type = NotHitBy
trigger1 = 1   
value = SCA    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 3
value = 1, 13

[State 0, 円]
type = explod
trigger1 = movehit
triggerall = numexplod(864) = 0 
anim = 864
id = 864
pos = 0,-40
postype = p2
ownpal = 1
shadow = 0,0,0
scale = .616,.85;.308,.425
pausemovetime = 999999
supermovetime = 999999
sprpriority = 3
persistent=0
ignorhitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 1
ignorehitpause = 1

[State 230, 2];プッツン時スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno = 3090
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1015
value = 1016
;---------------------------------------------------------------------------
;時は再び刻み始める！ KC(スタンド) 攻撃
[Statedef 1016]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
anim = 1016
sprpriority = 0
facep2 = 1

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = root,var(28) = 0
trigger1 = numtarget
trigger2 = root,var(28) = 1
trigger2 = movehit
value = 60
persistent = 0

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = time = 0
trigger1 = facing != parent,facing

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 1010, 移動速度]
type = VelSet
trigger1 = root,var(27) = 0
trigger1 = !time
x = 48

[State 1010, 移動速度]
type = VelSet
triggerall = root,var(27) = 0
trigger1 = time = 3
trigger2 = !movehit
trigger2 = p2bodydist x = [-20,20]
x = 2
persistent = 0

[State 1010, 移動速度]
type = VelSet
trigger1 = root,var(27) = 1
trigger1 = !time
x = 60

[State 1010, 移動速度]
type = VelSet
triggerall = root,var(27) = 1
trigger1 = time = 3
trigger2 = !movehit
trigger2 = p2bodydist x = [-20,20]
x = 2
persistent = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 1, 12

[State 0, 円]
type = explod
trigger1 = movehit
triggerall = numexplod(864) = 0 
anim = 864
id = 864
pos = 0,-80
postype = p2
ownpal = 1
shadow = 0,0,0
scale = .616,.85;.308,.425
pausemovetime = 999999
supermovetime = 999999
sprpriority = 3
persistent=0
ignorhitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 0
trigger1 = root,var(28) = 0
trigger1 = time = 0
attr = S, NA
damage = 50*root,fvar(1),14
animtype = Light
guardflag = M
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 0;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -1*const(size.xscale)
guard.velocity = -8
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12
fall = 0
fall.recover = 0
air.fall = 1
p2stateno = 1070
p2facing = 1
guard.kill = 0

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 0
trigger1 = root,var(28) = 1
trigger1 = time = 0
attr = S, NA
damage = 50*root,fvar(1),10
animtype = Light
guardflag = M
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 0;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -4*const(size.xscale),-6
air.type = High
air.velocity = -4,ifelse(root,var(40)<30,-6+(root,var(40)*0.4),ifelse((root,var(40)*0.8)<0,0,(root,var(40)*0.8)))
air.hittime = 12
fall = 1
fall.recover = 0
air.fall = 1
p2facing = 1
guard.kill = 0

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 1
trigger1 = root,var(28) = 0
trigger1 = time = 0
attr = S, NA
damage = 80*root,fvar(1),14
animtype = Light
guardflag = 
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 0;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -1*const(size.xscale)
guard.velocity = -8
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12
fall = 0
fall.recover = 0
air.fall = 1
p2stateno = 1070
p2facing = 1
guard.kill = 0

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 1
trigger1 = root,var(28) = 1
trigger1 = time = 0
attr = S, NA
damage = 80*root,fvar(1),10
animtype = Light
guardflag = 
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 0;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -4*const(size.xscale),-6
air.type = High
air.velocity = -4,ifelse(root,var(40)<30,-6+(root,var(40)*0.4),ifelse((root,var(40)*0.8)<0,0,(root,var(40)*0.8)))
air.hittime = 12
fall = 1
fall.recover = 0
air.fall = 1
p2facing = 1
guard.kill = 0

[State 0, shake]
type = envshake
trigger1 = movehit
time = 8
freq = 90
ampl = -7
phase = 0
persistent = 0
ignorhitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, var]
type = parentvarset
trigger1 = movehit
var(28) = 1

[State 230, 2]
type = changestate
triggerall = helper(1001),stateno != 418
trigger1 = numtarget
trigger1 = target,statetype = A
trigger1 = animtime = 0
value = 418

[State 230, 2];プッツン時スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno = 3090
ignorehitpause = 1

[State 230, 2]
type = null;changestate
trigger1 = root,stateno = 700
value = 1103
ignorehitpause = 1

[State 1000, 7]
type = Helper
trigger1 = numtarget
trigger1 = numhelper(1045) = 0
helpertype = normal
name = "marker"
stateno = 1045
id = 1045
pos = 0, 0
postype = p2
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00

[State 230, 2]
type = changestate
trigger1 = !animtime
value = 1102
;---------------------------------------------------------------------------
;時は再び刻み始める！H
[Statedef 1030]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1030
ctrl = 0
sprpriority = 2

[State 901, Throw]
type = attackdist
trigger1 = 1
value = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 1000, 0
channel = 0

[State 1000, 7]
type = Helper
triggerall = var(49) = 0
triggerall = !time
trigger1 = !numhelper(1001)
trigger2 = helper(1001),stateno = 1102
trigger3 = helper(1001),stateno = 206 || helper(1001),stateno = 216 || helper(1001),stateno = 226
trigger4 = helper(1001),stateno = 406 || helper(1001),stateno = 416 || helper(1001),stateno = 426
trigger5 = numhelper(1001) < 2
trigger5 = helper(1001),stateno = 417 ||helper(1001),stateno = 418
helpertype = normal
name = "king crimson"
stateno = 1031
id = 1001
pos = 0, 0
postype = p1
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00

[State 1000, 7]
type = Helper
trigger1 = time = 56
helpertype = normal
name = "efect"
stateno = 1004
id = 1004
pos = 25, -90
postype = p1
ownpal = 1
facing = 1
size.xscale = 0.5
size.yscale = 0.5

[State 1000, 音を鳴らす]
type = varset
trigger1 = time = 56
v = 27
value = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = time >= 26
trigger1 = command != "hold_z"
trigger2 = time = 56
value = 1035
;---------------------------------------------------------------------------
;時は再び刻み始める！　発射
[Statedef 1035]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1035
ctrl = 0
sprpriority = 2

[State 901, Throw]
type = attackdist
trigger1 = 1
value = 0

[State 1000, 音を鳴らす]
type = null;PlaySnd
trigger1 = animelem = 1
value = 1100, 0
channel = 0

[State 1000, ステート変更]
type = null;ChangeState
trigger1 = AnimTime = 0
value = 100

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;時は再び刻み始める！ KC(スタンド)
[Statedef 1031]
type    = S
movetype= I
physics = S
poweradd= 0
ctrl = 0
anim = 1031
sprpriority = 0
facep2 = 1

[State 1065, 3]
type = bindtoparent
trigger1 = 1
pos = -10,-15
time = 1
ignorehitpause = 1

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = time = 0
trigger1 = facing != parent,facing

[State 301,]
type = NotHitBy
trigger1 = 1   
value = SCA    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 3
value = 1, 13

[State 0, 円]
type = explod
trigger1 = movehit
triggerall = numexplod(864) = 0 
anim = 864
id = 864
pos = 0,-40
postype = p2
ownpal = 1
shadow = 0,0,0
scale = .616,.85;.308,.425
pausemovetime = 999999
supermovetime = 999999
sprpriority = 3
persistent=0
ignorhitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 1
ignorehitpause = 1

[State 230, 2];プッツン時スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno = 3090
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1035
value = 1036
;---------------------------------------------------------------------------
;時は再び刻み始める！ KC(スタンド) 攻撃
[Statedef 1036]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
anim = 1036
sprpriority = 0
facep2 = 1

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = root,var(28) = 0
trigger1 = numtarget
trigger2 = root,var(28) = 1
trigger2 = movehit
value = 60
persistent = 0

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = time = 0
trigger1 = facing != parent,facing

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 1010, 移動速度]
type = VelSet
trigger1 = root,var(27) = 0
trigger1 = !time
x = 60

[State 1010, 移動速度]
type = VelSet
triggerall = root,var(27) = 0
trigger1 = time = 3
trigger2 = !movehit
trigger2 = p2bodydist x = [-20,20]
x = 2
persistent = 0

[State 1010, 移動速度]
type = VelSet
trigger1 = root,var(27) = 1
trigger1 = !time
x = 80

[State 1010, 移動速度]
type = VelSet
triggerall = root,var(27) = 1
trigger1 = time = 3
trigger2 = !movehit
trigger2 = p2bodydist x = [-20,20]
x = 2
persistent = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 1, 12

[State 0, 円]
type = explod
trigger1 = movehit
triggerall = numexplod(864) = 0 
anim = 864
id = 864
pos = 0,-80
postype = p2
ownpal = 1
shadow = 0,0,0
scale = .616,.85;.308,.425
pausemovetime = 999999
supermovetime = 999999
sprpriority = 3
persistent=0
ignorhitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 0
trigger1 = root,var(28) = 0
trigger1 = time = 0
attr = S, NA
damage = 50*root,fvar(1),14
animtype = Light
guardflag = M
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 0;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -1*const(size.xscale)
guard.velocity = -8
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12
fall = 0
fall.recover = 0
air.fall = 1
p2stateno = 1070
p2facing = 1
guard.kill = 0

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 0
trigger1 = root,var(28) = 1
trigger1 = time = 0
attr = S, NA
damage = 50*root,fvar(1),10
animtype = Light
guardflag = M
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 0;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -4*const(size.xscale),-6
air.type = High
air.velocity = -4,ifelse(root,var(40)<30,-6+(root,var(40)*0.4),ifelse((root,var(40)*0.8)<0,0,(root,var(40)*0.8)))
air.hittime = 12
fall = 1
fall.recover = 0
air.fall = 1
p2facing = 1
guard.kill = 0

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 1
trigger1 = root,var(28) = 0
trigger1 = time = 0
attr = S, NA
damage = 80*root,fvar(1),14
animtype = Light
guardflag = 
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 0;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -1*const(size.xscale)
guard.velocity = -8
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12
fall = 0
fall.recover = 0
air.fall = 1
p2stateno = 1070
p2facing = 1
guard.kill = 0

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 1
trigger1 = root,var(28) = 1
trigger1 = time = 0
attr = S, NA
damage = 80*root,fvar(1),10
animtype = Light
guardflag = 
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 0;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -4*const(size.xscale),-6
air.type = High
air.velocity = -4,ifelse(root,var(40)<30,-6+(root,var(40)*0.4),ifelse((root,var(40)*0.8)<0,0,(root,var(40)*0.8)))
air.hittime = 12
fall = 1
fall.recover = 0
air.fall = 1
p2facing = 1
guard.kill = 0

[State 0, shake]
type = envshake
trigger1 = movehit
time = 8
freq = 90
ampl = -7
phase = 0
persistent = 0
ignorhitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, var]
type = parentvarset
trigger1 = movehit
var(28) = 1

[State 230, 2]
type = changestate
triggerall = helper(1001),stateno != 418
trigger1 = numtarget
trigger1 = target,statetype = A
trigger1 = animtime = 0
value = 418

[State 230, 2];プッツン時スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno = 3090
ignorehitpause = 1

[State 230, 2]
type = null;changestate
trigger1 = root,stateno = 700
value = 1103
ignorehitpause = 1

[State 1000, 7]
type = Helper
trigger1 = numtarget
trigger1 = numhelper(1045) = 0
helpertype = normal
name = "marker"
stateno = 1045
id = 1045
pos = 0, 0
postype = p2
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00

[State 230, 2]
type = changestate
trigger1 = !animtime
value = 1102
;---------------------------------------------------------------------------
;時は再び刻み始める！EX
[Statedef 1050]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1050
ctrl = 0
sprpriority = 2
poweradd = ifelse(var(31),-250,-500);-500

[State 5070, 3]
type = nothitby
trigger1 = time = [0,18]
value = SCA

[State 901, Throw]
type = attackdist
trigger1 = 1
value = 0

[State 730, Flash]
type = palfx
trigger1 = time < 46
time = 1
add = 150 + ceil(sin(time / 2.0 * pi) * 150), 150 + ceil(sin(time / 2.0 * pi) * 150), 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 1000, 0
channel = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 6, 15

[State 1000, 7]
type = Helper
triggerall = var(49) = 0
triggerall = !time
trigger1 = !numhelper(1001)
trigger2 = helper(1001),stateno = 1102
trigger3 = helper(1001),stateno = 206 || helper(1001),stateno = 216 || helper(1001),stateno = 226
trigger4 = helper(1001),stateno = 406 || helper(1001),stateno = 416 || helper(1001),stateno = 426
trigger5 = numhelper(1001) < 2
trigger5 = helper(1001),stateno = 417 ||helper(1001),stateno = 418
helpertype = normal
name = "king crimson"
stateno = 1051
id = 1001
pos = 0, 0
postype = p1
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00

[State 1000, 7]
type = Helper
trigger1 = time = 46
helpertype = normal
name = "efect"
stateno = 1004
id = 1004
pos = 25, -90
postype = p1
ownpal = 1
facing = 1
size.xscale = 0.5
size.yscale = 0.5

[State 1000, 音を鳴らす]
type = varset
trigger1 = time = 46
v = 27
value = 1

[State 1000, ステート変更];⑨
type = ChangeState
trigger1 = var(59)<=0
trigger1 = time >= 16
trigger1 = command != "hold_a"
trigger2 = var(59)<=0
trigger2 = time = 46
trigger3 = var(59)>0
trigger3 = time >= 16
value = 1055
;---------------------------------------------------------------------------
;時は再び刻み始める！　発射
[Statedef 1055]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1055
ctrl = 0
sprpriority = 2

[State 5070, 3]
type = nothitby
trigger1 = time = [0,6]
value = SCA

[State 901, Throw]
type = attackdist
trigger1 = 1
value = 0

[State 1000, 音を鳴らす]
type = null;PlaySnd
trigger1 = animelem = 1
value = 1100, 0
channel = 0

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;時は再び刻み始める！ KC(スタンド)
[Statedef 1051]
type    = S
movetype= I
physics = S
poweradd= 0
ctrl = 0
anim = 1051
sprpriority = 0
facep2 = 1

[State 730, Flash]
type = palfx
trigger1 = time < 46
time = 1
add = 150 + ceil(sin(time / 2.0 * pi) * 150), 150 + ceil(sin(time / 2.0 * pi) * 150), 0

[State 1065, 3]
type = bindtoparent
trigger1 = 1
pos = -10,-15
time = 1
ignorehitpause = 1

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = time = 0
trigger1 = facing != parent,facing

[State 301,]
type = NotHitBy
trigger1 = 1   
value = SCA    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 3
value = 1, 13

[State 0, 円]
type = explod
trigger1 = movehit
triggerall = numexplod(864) = 0 
anim = 864
id = 864
pos = 0,-40
postype = p2
ownpal = 1
shadow = 0,0,0
scale = .616,.85;.308,.425
pausemovetime = 999999
supermovetime = 999999
sprpriority = 3
persistent=0
ignorhitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 1
ignorehitpause = 1

[State 230, 2];プッツン時スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno = 3090
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1055
value = 1056
;---------------------------------------------------------------------------
;時は再び刻み始める！ KC(スタンド) 攻撃
[Statedef 1056]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
anim = 1056
sprpriority = 0
facep2 = 1

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = time = 0
trigger1 = facing != parent,facing

[State 5070, 3]
type = nothitby
trigger1 = time = [0,6]
value = SCA

[State 301,]
type = NotHitBy
trigger1 = time > 6
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 1010, 移動速度]
type = VelSet
trigger1 = root,var(27) = 0
trigger1 = !time
x = 60

[State 1010, 移動速度]
type = VelSet
triggerall = root,var(27) = 0
trigger1 = time = 3
trigger2 = !movehit
trigger2 = p2bodydist x = [-20,20]
x = 2
persistent = 0

[State 1010, 移動速度]
type = VelSet
trigger1 = root,var(27) = 1
trigger1 = !time
x = 80

[State 1010, 移動速度]
type = VelSet
triggerall = root,var(27) = 1
trigger1 = time = 3
trigger2 = !movehit
trigger2 = p2bodydist x = [-20,20]
x = 2
persistent = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 1, 12

[State 0, 円]
type = explod
trigger1 = movehit
triggerall = numexplod(864) = 0 
anim = 864
id = 864
pos = 0,-80
postype = p2
ownpal = 1
shadow = 0,0,0
scale = .616,.85;.308,.425
pausemovetime = 999999
supermovetime = 999999
sprpriority = 3
persistent=0
ignorhitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 0
trigger1 = root,var(28) = 0
trigger1 = time = 0
attr = S, NA
damage = 80*root,fvar(1),18
animtype = Light
guardflag = M
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 0;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -1*const(size.xscale)
guard.velocity = -8
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12
fall = 0
fall.recover = 0
air.fall = 1
p2stateno = 1070
p2facing = 1
guard.kill = 0

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 0
trigger1 = root,var(28) = 1
trigger1 = time = 0
attr = S, NA
damage = 80*root,fvar(1),18
animtype = Light
guardflag = M
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 0;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -4*const(size.xscale),-6
air.type = High
air.velocity = -4,ifelse(root,var(40)<30,-6+(root,var(40)*0.4),ifelse((root,var(40)*0.8)<0,0,(root,var(40)*0.8)))
air.hittime = 12
fall = 1
fall.recover = 0
air.fall = 1
p2facing = 1
guard.kill = 0

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 1
trigger1 = root,var(28) = 0
trigger1 = time = 0
attr = S, NA
damage = 120*root,fvar(1),22
animtype = Light
guardflag = 
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 0;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -1*const(size.xscale)
guard.velocity = -8
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12
fall = 0
fall.recover = 0
air.fall = 1
p2stateno = 1070
p2facing = 1
guard.kill = 0

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 1
trigger1 = root,var(28) = 1
trigger1 = time = 0
attr = S, NA
damage = 120*root,fvar(1),22
animtype = Light
guardflag = 
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 0;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -4*const(size.xscale),-6
air.type = High
air.velocity = -4,ifelse(root,var(40)<30,-6+(root,var(40)*0.4),ifelse((root,var(40)*0.8)<0,0,(root,var(40)*0.8)))
air.hittime = 12
fall = 1
fall.recover = 0
air.fall = 1
p2facing = 1
guard.kill = 0

[State 0, var]
type = parentvarset
trigger1 = movehit
var(28) = 1

[State 230, 2]
type = changestate
triggerall = helper(1001),stateno != 418
trigger1 = numtarget
trigger1 = target,statetype = A
trigger1 = animtime = 0
value = 418

[State 0, shake]
type = envshake
trigger1 = movehit
time = 15
freq = 90
ampl = -15
phase = 0
persistent = 0
ignorhitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 1
ignorehitpause = 1

[State 230, 2];プッツン時スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno = 3090
ignorehitpause = 1

[State 230, 2]
type = null;changestate
trigger1 = root,stateno = 700
value = 1103
ignorehitpause = 1

[State 1000, 7]
type = Helper
trigger1 = numtarget
trigger1 = numhelper(1045) = 0
helpertype = normal
name = "marker"
stateno = 1045
id = 1045
pos = 0, 0
postype = p2
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00

[State 230, 2]
type = changestate
trigger1 = !animtime
value = 1102
;---------------------------------------------------------------------------
;KC(スタンド) 待機
[Statedef 1040]
type    = S
movetype= A
physics = S
anim = 29999
sprpriority = 0

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = invisible
ignorehitpause = 1

[State 301,]
type = NotHitBy
trigger1 = 1   
value = SCA    
time = 1

[State 230, 2]
type = destroyself
trigger1 = !numtarget
trigger2 = root,stateno = [1000,1030]
ignorehitpause = 1
;---------------------------------------------------------------------------
;マーカー
[Statedef 1045]
type    = S
movetype= I
physics = S
anim = 29999
sprpriority = 0

[State 1027, 位置]
type = PosSet
trigger1 = 1
x = enemynear,pos x 
y = enemynear,pos y 

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = invisible
ignorehitpause = 1

[State 301,]
type = NotHitBy
trigger1 = 1   
value = SCA    
time = 1

[State 230, 2]
type = destroyself
trigger1 = !parent,numtarget
trigger1 = !root,numtarget
trigger1 = enemynear,movetype != H
ignorehitpause = 1
;---------------------------------------------------------------------------
;崩れ落ちる相手
[Statedef 1070]
type    = S
movetype= H
physics = S
velset = 0,0
sprpriority = 0

[State 901, Ctrl]
type = ChangeState
trigger1 = !time
trigger1 = pos y < 0
value = 1075

[State 210, 2]
type = PosSet
trigger1 = !time
y = 0

[State 1060, 2]
type = changeanim2
trigger1 = !time
value = 1070

[State 1060, 2]
type = null;changeanim
trigger1 = SelfAnimExist(5950)
trigger1 = !time
value = 5950

[State 2500, ScreenBound]
type = screenbound
trigger1 = 1
value = 1
movecamera = 30,10

[State 00]
type = null;lifeadd
trigger1 = time = 90
value = -150

[State 901, Ctrl]
type = null;SelfState
trigger1 = !animtime
value = 0
ctrl = 1

[State 901, Ctrl]
type = SelfState
trigger1 = !animtime
value = 5100
;---------------------------------------------------------------------------
;吹っ飛ぶ相手
[Statedef 1075]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 0

[State 210, 2]
type = velSet
trigger1 = time = [0,15]
x = 0
y = 0

[State 210, 2]
type = velSet
trigger1 = time = 15
x = -4
y = -6

[State 210, 2]
type = veladd
trigger1 = time >= 15
y = .42

[State 1060, 2]
type = changeanim
trigger1 = time < 15
value = 5050

[State 1060, 2]
type = changeanim
trigger1 = SelfAnimExist(5052)
trigger1 = !time
value = 5052

[State 2500, ScreenBound]
type = screenbound
trigger1 = 1
value = 1
movecamera = 30,10

[State 901, Ctrl]
type = ChangeState
trigger1 = time > 20
trigger1 = pos y > -10
value = 10427
;---------------------------------------------------------------------------
;俺を良く見ろ!
[Statedef 1400]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1400
ctrl = 0
sprpriority = 2

[state 3000]
type = nothitby
trigger1 = time = 0
value = SCA
time = 4

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = 1400, 0
channel = 0

[State 1000, 7]
type = null;Helper
trigger1 = Time = 0
helpertype = normal
name = "throw helper"
stateno = 1403
id = 1403
pos = 0, 0
postype = p1
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00
ignorhitpause = 1

[State 1000, 7]
type = Helper
triggerall = !time
trigger1 = !numhelper(1001)
trigger2 = helper(1001),stateno = 1102
trigger3 = helper(1001),stateno = 206 || helper(1001),stateno = 216 || helper(1001),stateno = 226
trigger4 = helper(1001),stateno = 406 || helper(1001),stateno = 416 || helper(1001),stateno = 426
trigger5 = numhelper(1001) < 2
trigger5 = helper(1001),stateno = 417 ||helper(1001),stateno = 418
helpertype = normal
name = "king crimson"
stateno = 1430
id = 1001
pos = 0, 0
postype = p1
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00
ignorhitpause = 1

[State 900, 1]
type = HitDef
trigger1 = animelem = 5
attr = S, ST
hitflag = M-
priority = 3, Miss    
sparkno = -1
p1facing = 1
p1stateno = 1401
p2facing = 1
p2stateno = 1450
guard.dist = 0
getpower = 0
givepower = 0
air.fall = 1
fall = 1
fall.recover = 0
hitonce = 1
numhits = 0
envshake.time = 10
envshake.freq = 40
envshake.ampl = -4
id = 800

[State 900, 1]
type = HitDef
trigger1 = animelem = 6
attr = S, SA
hitflag = M
priority = 3, Miss    
sparkno = -1
p1facing = 1
p1stateno = 1401
p2facing = 1
p2stateno = 1450
guard.dist = 0
getpower = 0
givepower = 0
air.fall = 1
fall = 1
fall.recover = 0
hitonce = 0
numhits = 0
envshake.time = 10
envshake.freq = 40
envshake.ampl = -4
id = 1400

[State 901, Throw]
type = attackdist
trigger1 = 1
value = 0

[State 1000, ステート変更]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;俺を良く見ろ!投げ判定ヘルパー
[Statedef 1403]
type    = S
movetype= A
physics = S
velset = 0,0
anim = ifelse(root,stateno=1460,1463,1403);1403
ctrl = 0
sprpriority = 0

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = invisible
ignorehitpause = 1

[State 1065, 3]
type = bindtoparent
trigger1 = 1
pos = 0,0
time = 1
ignorehitpause = 1

[state 3000]
type = nothitby
trigger1 = 1
value = SCA

[State 900, 1]
type = null;HitDef
trigger1 = root,stateno = 1400 || root,stateno = 1460
trigger1 = !root,numtarget(1400)
trigger1 = !time
attr = S, ST
hitflag = M-
priority = 3, Miss    
sparkno = -1
p2facing = 1
p2stateno = 1480
guard.dist = 0
getpower = 0
givepower = 0
air.fall = 1
fall = 1
fall.recover = 0
hitonce = 1
numhits = 0
envshake.time = 10
envshake.freq = 40
envshake.ampl = -4
id = 800

[State 901, Throw]
type = attackdist
trigger1 = 1
value = 0

[State 1000, ステート変更]
type = destroyself
trigger1 = root,stateno != 1400
trigger1 = root,stateno != 1460
ignorhitpause = 1
;---------------------------------------------------------------------------
;捕獲された相手
[Statedef 1480]
type = S
movetype = H
physics = S
ctrl = 0
velset = 0,0

[State 1060, 2]
type = changeanim2
trigger1 = !time
value = 1480
ignorhitpause = 1

[State 210, 2]
type = destroyself
trigger1 = ishelper
trigger1 = !time

[State 0, hitby]
type = null;nothitby
trigger1 = 1
value = SCA

[State 3000, ステート変更]
type = selfState
trigger1 = time = 10
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;俺を良く見ろ! HIT
[Statedef 1401]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1401
ctrl = 0
sprpriority = 2

[State 230, 2]
type = playerpush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 3001, Width]
type = Width
trigger1 = time = 0
edge = 100,0

[State 901,1]
type = targetBind
trigger1 = !time
pos = 100, 0
postype = P1
time = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = 1, 9

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = 1401, 0
channel = 0

[State 1000, 7]
type = null;Helper
trigger1 = Time = 0
;trigger1 = numhelper(1001) = 0
helpertype = normal
name = "king crimson"
stateno = 1430
id = 1400
pos = 0, 0
postype = p1
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00
ignorhitpause = 1

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = Time = 22
value = ifelse(helper(8500),fvar(8)=0,20,20*1.1)
persistent = 0

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = Time = 28
value = ifelse(helper(8500),fvar(8)=0,20,20*1.1)
persistent = 0

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = Time = 34
value = ifelse(helper(8500),fvar(8)=0,20,20*1.1)
persistent = 0

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = Time = 40
value = ifelse(helper(8500),fvar(8)=0,20,20*1.1)
persistent = 0

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = Time = 71
value = ifelse(helper(8500),fvar(8)=0,100,100*1.1)
persistent = 0

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = Time = 22
trigger2 = Time = 28
trigger3 = Time = 34
trigger4 = Time = 40
value = ifelse(life > 300,-9*fvar(1),-9*fvar(1)*1.1)
kill = 0

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = !var(31)
trigger1 = Time = 71
value = ifelse(life > 300,-74*fvar(1),-74*fvar(1)*1.1)

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = var(31)
trigger1 = Time = 71
value = ifelse(life > 300,-129*fvar(1),-129*fvar(1)*1.1)

[State 215]
type = HitAdd
trigger1 = Time = 22
trigger2 = Time = 28
trigger3 = Time = 34
trigger4 = Time = 40
trigger5 = Time = 71
value = 1

[State 10820, ]
type = Explod
trigger1 = Time = 22
facing = 1
postype = p2
pos = 20,-90
anim = 810
id = 810
sprpriority = 4
ownpal = 1
pausemovetime = 999999
supermovetime = 999999

[State 10820, ]
type = Explod
trigger1 = Time = 28
facing = 1
postype = p2
pos = -30,-90
anim = 810
id = 810
sprpriority = 4
ownpal = 1
pausemovetime = 999999
supermovetime = 999999

[State 10820, ]
type = Explod
trigger1 = Time = 34
facing = 1
postype = p2
pos = 5,-90
anim = 810
id = 810
sprpriority = 4
ownpal = 1
pausemovetime = 999999
supermovetime = 999999

[State 10820, ]
type = Explod
trigger1 = Time = 40
facing = 1
postype = p2
pos = -40,-90
anim = 810
id = 810
sprpriority = 4
ownpal = 1
pausemovetime = 999999
supermovetime = 999999

[State 10820, ]
type = Explod
trigger1 = numexplod(830) = 0
trigger1 = Time = 71
facing = 1                 ;キャラと同じ向きに表示（デフォ
postype = p2
pos = 0,-40
anim = 830
id = 830
sprpriority = 4
ownpal = 1
pausemovetime = 999999
supermovetime = 999999

[State 0, 円]
type = explod
trigger1 = Time = 71
triggerall = numexplod(864) = 0 
anim = 864
id = 864
pos = 0,-80
postype = p2
ownpal = 1
shadow = 0,0,0
scale = .616,.85;.308,.425
pausemovetime = 999999
supermovetime = 999999
sprpriority = 3
persistent=0
ignorhitpause = 1

[State 4200,01]
type = Pause
trigger1 = Time = 71
moveTime = 16
Time = 16
ctrl = 0
anim = -1
;darken = 0

[State 0, shake]
type = envshake
trigger1 = Time = 71
time = 16
freq = 90
ampl = -7
phase = 0
persistent = 0
ignorhitpause = 1

[state 3000]
type = nothitby
trigger1 = 1
value = SCA

[State 1000, ステート変更]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;俺を良く見ろ!KC
[Statedef 1430]
type    = S
movetype= I
physics = S
velset = 0,0
anim = 1430
ctrl = 0
sprpriority = 2

[State 1065, 3]
type = bindtoparent
trigger1 = 1
pos = 20,0
time = 1
ignorehitpause = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 20
value = 1, 10

[State 901, Throw]
type = attackdist
trigger1 = 1
value = 0

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 230, 2];プッツン時スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno = 3090
ignorehitpause = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = root,stateno = 1401
value = 1431

[State 1000, ステート変更]
type = ChangeState
trigger1 = !animtime
value = 1102
;---------------------------------------------------------------------------
;俺を良く見ろ!KC成功
[Statedef 1431]
type    = S
movetype= I
physics = S
velset = 0,0
anim = 1431
ctrl = 0
sprpriority = 2

[State 1065, 3]
type = bindtoparent
trigger1 = 1
pos = 20,0
time = 1
ignorehitpause = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 22
value = 1410, 0

[State 901, Throw]
type = attackdist
trigger1 = 1
value = 0

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 1000, ステート変更]
type = Changeanim
trigger1 = anim = 1431
trigger1 = !animtime
value = 1432

[State 1000, ステート変更]
type = Changeanim
trigger1 = anim = 1432
trigger1 = !animtime
value = 1433

[state 3000]
type = nothitby
trigger1 = 1
value = SCA

[State 230, 2];プッツン時スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno = 3090
ignorehitpause = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = !animtime
value = 1102
;---------------------------------------------------------------------------
;俺を良く見ろ! 相手
[Statedef 1450]
type    = S
movetype= H
physics = N
velset = 0,0
ctrl = 0
sprpriority = 2

[State 230, 2]
type = statetypeset
trigger1 = pos y < 0
statetype = A
ignorehitpause = 1

[State 1060, 2]
type = changeanim2
trigger1 = time = 0
value = 1450
ignorhitpause = 1

[State 230, 2]
type = playerpush
trigger1 = time = [0,85]
value = 0
ignorehitpause = 1

[state 3000]
type = nothitby
trigger1 = time = [0,85]
value = SCA

[State 1000, 速度]
type = velset
trigger1 = time = [10,26]
x = -.1
y = 0

[State 1000, 速度]
type = velset
trigger1 = time = 27
x = 0
y = -6

[State 1000, 速度]
type = veladd
trigger1 = time = [36,73]
x = 0
y = .3

[State 1000, 速度]
type = velset
trigger1 = time = 74
x = -2
y = -14

[State 1000, 速度]
type = veladd
trigger1 = time > 74
x = 0
y = .6

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = Time = 22
value = 10
persistent = 0

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = Time = 28
value = 10
persistent = 0

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = Time = 34
value = 10
persistent = 0

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = Time = 40
value = 10
persistent = 0

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = Time = 72
value = 50
persistent = 0

[State 810, ステート変更]
type = ChangeState
trigger1 = time > 84
trigger1 = Pos Y >= -1
value = 10427
;---------------------------------------------------------------------------
;俺を良く見ろ!EX
[Statedef 1460]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1460
ctrl = 0
sprpriority = 2
poweradd = ifelse(var(31),-250,-500);-500

[State 1000, 7]
type = Helper
trigger1 = Time = 0
helpertype = normal
name = "throw helper"
stateno = 1403
id = 1403
pos = 0, 0
postype = p1
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00
ignorhitpause = 1

[State 810, HitBy]
type = NotHitBy
trigger1 = var(31)
trigger1 = time = [0,30]
value = SCA

[State 730, Flash]
type = palfx
trigger1 = time < 28
time = 1
add = 150 + ceil(sin(time / 2.0 * pi) * 150), 150 + ceil(sin(time / 2.0 * pi) * 150), 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 6, 15

[state 3000]
type = nothitby
trigger1 = time = 0
value = SCA
time = 4

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = 1400, 0
channel = 0

[State 1000, 7]
type = Helper
triggerall = !time
trigger1 = !numhelper(1001)
trigger2 = helper(1001),stateno = 1102
trigger3 = helper(1001),stateno = 206 || helper(1001),stateno = 216 || helper(1001),stateno = 226
trigger4 = helper(1001),stateno = 406 || helper(1001),stateno = 416 || helper(1001),stateno = 426
trigger5 = numhelper(1001) < 2
trigger5 = helper(1001),stateno = 417 ||helper(1001),stateno = 418
helpertype = normal
name = "king crimson"
stateno = 1470
id = 1001
pos = 0, 0
postype = p1
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00
ignorhitpause = 1

[State 900, 1]
type = HitDef
trigger1 = animelem = 5
attr = S, ST
hitflag = M-
priority = 3, Miss    
sparkno = -1
p1facing = 1
p1stateno = 1461
p2facing = 1
p2stateno = 1450
guard.dist = 0
getpower = 0
givepower = 0
air.fall = 1
fall = 1
fall.recover = 0
hitonce = 1
numhits = 0
envshake.time = 10
envshake.freq = 40
envshake.ampl = -4
id = 1400

[State 900, 1]
type = HitDef
trigger1 = animelem = 6
attr = S, SA
hitflag = M
priority = 3, Miss    
sparkno = -1
p1facing = 1
p1stateno = 1461
p2facing = 1
p2stateno = 1450
guard.dist = 0
getpower = 0
givepower = 0
air.fall = 1
fall = 1
fall.recover = 0
hitonce = 1
numhits = 0
envshake.time = 10
envshake.freq = 40
envshake.ampl = -4
id = 1400

[State 901, Throw]
type = attackdist
trigger1 = 1
value = 0

[State 1000, ステート変更]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;俺を良く見ろ!EX HIT
[Statedef 1461]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1461
ctrl = 0
sprpriority = 2

[State 230, 2]
type = playerpush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 3001, Width]
type = Width
trigger1 = time = 0
edge = 100,0

[State 901,1]
type = targetBind
trigger1 = !time
pos = 100, 0
postype = P1
time = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = 1, 9

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = 1401, 0
channel = 0

[State 1000, 7]
type = null;Helper
trigger1 = Time = 0
;trigger1 = numhelper(1001) = 0
helpertype = normal
name = "king crimson"
stateno = 1460
id = 1001
pos = 0, 0
postype = p1
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00
ignorhitpause = 1

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = Time = 22
value = ifelse(helper(8500),fvar(8)=0,0,0*1.1)
persistent = 0

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = Time = 28
value = ifelse(helper(8500),fvar(8)=0,0,0*1.1)
persistent = 0

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = Time = 34
value = ifelse(helper(8500),fvar(8)=0,0,0*1.1)
persistent = 0

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = Time = 40
value = ifelse(helper(8500),fvar(8)=0,0,0*1.1)
persistent = 0

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = Time = 71
value = ifelse(helper(8500),fvar(8)=0,0,0*1.1)
persistent = 0

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = Time = 22
trigger2 = Time = 28
trigger3 = Time = 34
trigger4 = Time = 40
value = ifelse(life > 300,-9*fvar(1),-9*fvar(1)*1.1)
kill = 0

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = Time = 71
value = ifelse(life > 300,-74*fvar(1),-74*fvar(1)*1.1)

[State 215]
type = HitAdd
trigger1 = Time = 22
trigger2 = Time = 28
trigger3 = Time = 34
trigger4 = Time = 40
trigger5 = Time = 71
value = 1

[State 10820, ]
type = Explod
trigger1 = Time = 22
facing = 1
postype = p2
pos = 20,-90
anim = 810
id = 810
sprpriority = 4
ownpal = 1
pausemovetime = 999999
supermovetime = 999999

[State 10820, ]
type = Explod
trigger1 = Time = 28
facing = 1
postype = p2
pos = -30,-90
anim = 810
id = 810
sprpriority = 4
ownpal = 1
pausemovetime = 999999
supermovetime = 999999

[State 10820, ]
type = Explod
trigger1 = Time = 34
facing = 1
postype = p2
pos = 5,-90
anim = 810
id = 810
sprpriority = 4
ownpal = 1
pausemovetime = 999999
supermovetime = 999999

[State 10820, ]
type = Explod
trigger1 = Time = 40
facing = 1
postype = p2
pos = -40,-90
anim = 810
id = 810
sprpriority = 4
ownpal = 1
pausemovetime = 999999
supermovetime = 999999

[State 10820, ]
type = Explod
trigger1 = numexplod(830) = 0
trigger1 = Time = 71
facing = 1                 ;キャラと同じ向きに表示（デフォ
postype = p2
pos = 0,-40
anim = 830
id = 830
sprpriority = 4
ownpal = 1
pausemovetime = 999999
supermovetime = 999999

[State 0, 円]
type = explod
trigger1 = Time = 71
triggerall = numexplod(864) = 0 
anim = 864
id = 864
pos = 0,-80
postype = p2
ownpal = 1
shadow = 0,0,0
scale = .616,.85;.308,.425
pausemovetime = 999999
supermovetime = 999999
sprpriority = 3
persistent=0
ignorhitpause = 1

[State 4200,01]
type = Pause
trigger1 = Time = 71
moveTime = 16
Time = 16
ctrl = 0
anim = -1
;darken = 0

[State 0, shake]
type = envshake
trigger1 = Time = 71
time = 16
freq = 90
ampl = -7
phase = 0
persistent = 0
ignorhitpause = 1

[state 3000]
type = nothitby
trigger1 = 1
value = SCA

[State 1000, ステート変更]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;俺を良く見ろ!EXKC
[Statedef 1470]
type    = S
movetype= I
physics = S
velset = 0,0
anim = 1470
ctrl = 0
sprpriority = 2

[State 730, Flash]
type = palfx
trigger1 = time < 28
time = 1
add = 150 + ceil(sin(time / 2.0 * pi) * 150), 150 + ceil(sin(time / 2.0 * pi) * 150), 0

[State 1065, 3]
type = bindtoparent
trigger1 = 1
pos = 50,0
time = 1
ignorehitpause = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 20
value = 1, 10

[State 901, Throw]
type = attackdist
trigger1 = 1
value = 0

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 230, 2];プッツン時スタンド消去
type = destroyself
trigger1 = root,stateno = 700
ignorehitpause = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = root,stateno = 1461
value = 1471

[State 1000, ステート変更]
type = ChangeState
trigger1 = !animtime
value = 1102
;---------------------------------------------------------------------------
;俺を良く見ろ!EXKC成功
[Statedef 1471]
type    = S
movetype= I
physics = S
velset = 0,0
anim = 1431
ctrl = 0
sprpriority = 2

[State 1065, 3]
type = bindtoparent
trigger1 = 1
pos = 50,0
time = 1
ignorehitpause = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 22
value = 1410, 0

[State 901, Throw]
type = attackdist
trigger1 = 1
value = 0

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 1000, ステート変更]
type = Changeanim
trigger1 = anim = 1431
trigger1 = !animtime
value = 1432

[State 1000, ステート変更]
type = Changeanim
trigger1 = anim = 1432
trigger1 = !animtime
value = 1433

[state 3000]
type = nothitby
trigger1 = 1
value = SCA

[State 230, 2];プッツン時スタンド消去
type = destroyself
trigger1 = root,stateno = 700
ignorehitpause = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = !animtime
value = 1102
;---------------------------------------------------------------------------
;A時は再び刻み始める！
[Statedef 1500]
type    = A
movetype= A
physics = S
velset = 0,0
anim = 1500
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 1000, 0
channel = 0

[State 1000, 7]
type = Helper
triggerall = var(49) = 0
trigger1 = Time = 0
;trigger1 = numhelper(1001) = 0
helpertype = normal
name = "king crimson"
stateno = 1501
id = 1001
pos = 0, 0
postype = p1
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00

[State 1000, 音を鳴らす]
type = varset
trigger1 = time = 46
v = 27
value = 1

[State 1000, 7]
type = Helper
trigger1 = time = 46
helpertype = normal
name = "efect"
stateno = 1004
id = 1004
pos = 25, -90
postype = p1
ownpal = 1
facing = 1
size.xscale = 0.5
size.yscale = 0.5

[State 901, Throw]
type = attackdist
trigger1 = 1
value = 0

[State 1000, 速度]
type = velset
trigger1 = time = [0,31]
x = 0
y = 0.15

[State 1000, 速度]
type = null;veladd
trigger1 = time > 31
x = 0
y = 0.4

[State 1000, ステート変更];⑨
type = ChangeState
triggerall = var(59)<=0
trigger1 = time >= 16
trigger1 = command != "hold_x"
trigger2 = time = 46
value = 1505

[State 1000, ステート変更]
type = ChangeState
trigger1 = Pos Y > 0
value = 52
;---------------------------------------------------------------------------
;A時は再び刻み始める！　発射
[Statedef 1505]
type    = A
movetype= A
physics = S
velset = 0,0
anim = 1505
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす]
type = null;PlaySnd
trigger1 = animelem = 1
value = 1100, 0
channel = 0

[State 901, Throw]
type = attackdist
trigger1 = 1
value = 0

[State 1000, 速度]
type = veladd
trigger1 = time > 20
x = 0
y = 0.4

[State 1000, ステート変更]
type = ChangeState
trigger1 = Pos Y > 0
value = 52

[State 1000, ステート変更]
type = null;ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;A時は再び刻み始める！ KC(スタンド)
[Statedef 1501]
type    = A
movetype= I
physics = S
poweradd= 0
ctrl = 0
anim = 1501
sprpriority = 0
facep2 = 1

[State 1065, 3]
type = bindtoparent
trigger1 = 1
pos = -10,-15
time = 1
ignorehitpause = 1

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = time = 0
trigger1 = facing != parent,facing

[State 301,]
type = NotHitBy
trigger1 = 1   
value = SCA    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 3
value = 1, 13

[State 0, 円]
type = explod
trigger1 = movehit
triggerall = numexplod(864) = 0 
anim = 864
id = 864
pos = 50,-80
postype = p1
ownpal = 1
shadow = 0,0,0
scale = .616,.85;.308,.425
pausemovetime = 999999
supermovetime = 999999
sprpriority = 3
persistent=0
ignorhitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 1
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno != [1500,1599]
value = 1102

[State 230, 2];プッツン時スタンド消去
type = destroyself
trigger1 = root,stateno = 700
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1505
value = 1506
;---------------------------------------------------------------------------
;A時は再び刻み始める！ KC(スタンド) 攻撃
[Statedef 1506]
type    = A
movetype= A
physics = S
poweradd= 0
ctrl = 0
anim = 1506
sprpriority = 0
facep2 = 1

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = root,var(28) = 0
trigger1 = numtarget
trigger2 = root,var(28) = 1
trigger2 = movehit
value = 60
persistent = 0

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = time = 0
trigger1 = facing != parent,facing

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 1010, 移動速度]
type = VelSet
trigger1 = root,var(27) = 0
trigger1 = !time
x = 6

[State 1010, 移動速度]
type = VelSet
trigger1 = root,var(27) = 1
trigger1 = !time
x = 48

[State 1010, 移動速度]
type = VelSet
triggerall = root,var(27) = 1
trigger1 = time = 3
trigger2 = movehit
trigger2 = p2bodydist x = [-20,20]
x = 2
persistent = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 1, 12

[State 0, 円]
type = explod
trigger1 = movehit
triggerall = numexplod(864) = 0 
anim = 864
id = 864
pos = 55,-77
postype = p1
ownpal = 1
shadow = 0,0,0
scale = .616,.85;.308,.425
pausemovetime = 999999
supermovetime = 999999
sprpriority = 3
persistent=0
ignorhitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 0
trigger1 = root,var(28) = 0
trigger1 = time = 0
attr = S, NA
damage = 55*root,fvar(1),14
animtype = Light
guardflag = M
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 0;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -1*const(size.xscale)
guard.velocity = -8
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12
fall = 0
fall.recover = 0
air.fall = 1
p2stateno = 1070

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 0
trigger1 = root,var(28) = 1
trigger1 = time = 0
attr = S, NA
damage = 55*root,fvar(1),10
animtype = Light
guardflag = M
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 0;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -4*const(size.xscale),-6
air.type = High
air.velocity = -4,ifelse(root,var(40)<30,-6.5+(root,var(40)*0.2),ifelse((root,var(40)*0.2)<0,0,(root,var(40)*0.2)))
air.hittime = 12
fall = 1
fall.recover = 0
air.fall = 1

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 1
trigger1 = root,var(28) = 0
trigger1 = time = 0
attr = S, NA
damage = 80*root,fvar(1),14
animtype = Light
guardflag = 
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 0;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -1*const(size.xscale)
guard.velocity = -8
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12
fall = 0
fall.recover = 0
air.fall = 1
p2stateno = 1070

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 1
trigger1 = root,var(28) = 1
trigger1 = time = 0
attr = S, NA
damage = 0*root,fvar(1),10
animtype = Light
guardflag = 
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 80;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -4*const(size.xscale),-6
air.type = High
air.velocity = -4,ifelse(root,var(40)<30,-6.5+(root,var(40)*0.2),ifelse((root,var(40)*0.2)<0,0,(root,var(40)*0.2)))
;air.velocity = -4*const(size.xscale),-6
air.hittime = 12
fall = 1
fall.recover = 0
air.fall = 1

[State 0, shake]
type = envshake
trigger1 = movehit
time = 8
freq = 90
ampl = -7
phase = 0
persistent = 0
ignorhitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 1
ignorehitpause = 1

[State 230, 2];プッツン時スタンド消去
type = destroyself
trigger1 = root,stateno = 700
ignorehitpause = 1

[State 230, 2]
type = null;changestate
trigger1 = root,stateno = 700
value = 1103
ignorehitpause = 1

[State 1000, 7]
type = Helper
trigger1 = numtarget
trigger1 = numhelper(1045) = 0
helpertype = normal
name = "marker"
stateno = 1045
id = 1045
pos = 0, 0
postype = p2
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00

[State 230, 2]
type = changestate
trigger1 = !animtime
value = 1102
;---------------------------------------------------------------------------
;AM時は再び刻み始める！
[Statedef 1510]
type    = A
movetype= A
physics = S
velset = 0,0
anim = 1510
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 1000, 0
channel = 0

[State 1000, 7]
type = Helper
triggerall = var(49) = 0
trigger1 = Time = 0
;trigger1 = numhelper(1001) = 0
helpertype = normal
name = "king crimson"
stateno = 1511
id = 1001
pos = 0, 0
postype = p1
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00

[State 1000, 音を鳴らす]
type = varset
trigger1 = time = 52
v = 27
value = 1

[State 1000, 7]
type = Helper
trigger1 = time = 52
helpertype = normal
name = "efect"
stateno = 1004
id = 1004
pos = 25, -90
postype = p1
ownpal = 1
facing = 1
size.xscale = 0.5
size.yscale = 0.5

[State 901, Throw]
type = attackdist
trigger1 = 1
value = 0

[State 1000, 速度]
type = velset
trigger1 = time = [0,36]
x = 0
y = 0.15

[State 1000, ステート変更];⑨
type = ChangeState
triggerall = var(59)<=0
trigger1 = time >= 22
trigger1 = command != "hold_y"
trigger2 = time = 52
value = 1515

[State 1000, ステート変更]
type = ChangeState
trigger1 = Pos Y > 0
value = 52
;---------------------------------------------------------------------------
;AM時は再び刻み始める！　発射
[Statedef 1515]
type    = A
movetype= A
physics = S
velset = 0,0
anim = 1515
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす]
type = null;PlaySnd
trigger1 = animelem = 1
value = 1100, 0
channel = 0

[State 901, Throw]
type = attackdist
trigger1 = 1
value = 0

[State 1000, 速度]
type = veladd
trigger1 = time > 20
x = 0
y = 0.4

[State 1000, ステート変更]
type = ChangeState
trigger1 = Pos Y > 0
value = 52

[State 1000, ステート変更]
type = null;ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;AN時は再び刻み始める！ KC(スタンド)
[Statedef 1511]
type    = A
movetype= I
physics = S
poweradd= 0
ctrl = 0
anim = 1511
sprpriority = 0
facep2 = 1

[State 1065, 3]
type = bindtoparent
trigger1 = 1
pos = -10,-15
time = 1
ignorehitpause = 1

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = time = 0
trigger1 = facing != parent,facing

[State 301,]
type = NotHitBy
trigger1 = 1   
value = SCA    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 3
value = 1, 13

[State 0, 円]
type = explod
trigger1 = movehit
triggerall = numexplod(864) = 0 
anim = 864
id = 864
pos = 50,-80
postype = p1
ownpal = 1
shadow = 0,0,0
scale = .616,.85;.308,.425
pausemovetime = 999999
supermovetime = 999999
sprpriority = 3
persistent=0
ignorhitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 1
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno != [1500,1599]
value = 1102

[State 230, 2];プッツン時スタンド消去
type = destroyself
trigger1 = root,stateno = 700
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1515
value = 1516
;---------------------------------------------------------------------------
;AM時は再び刻み始める！ KC(スタンド) 攻撃
[Statedef 1516]
type    = A
movetype= A
physics = S
poweradd= 0
ctrl = 0
anim = 1006
sprpriority = 0
facep2 = 1

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = root,var(28) = 0
trigger1 = numtarget
trigger2 = root,var(28) = 1
trigger2 = movehit
value = 60
persistent = 0

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = time = 0
trigger1 = facing != parent,facing

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 1010, 移動速度]
type = VelSet
trigger1 = root,var(27) = 0
trigger1 = !time
x = 48

[State 1010, 移動速度]
type = VelSet
triggerall = root,var(27) = 0
trigger1 = time = 3
trigger2 = !movehit
trigger2 = p2bodydist x = [-20,20]
x = 2
persistent = 0

[State 1010, 移動速度]
type = VelSet
trigger1 = root,var(27) = 1
trigger1 = !time
x = 60

[State 1010, 移動速度]
type = VelSet
triggerall = root,var(27) = 1
trigger1 = time = 3
trigger2 = !movehit
trigger2 = p2bodydist x = [-20,20]
x = 2
persistent = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 1, 12

[State 0, 円]
type = explod
trigger1 = movehit
triggerall = numexplod(864) = 0 
anim = 864
id = 864
pos = 55,-77
postype = p1
ownpal = 1
shadow = 0,0,0
scale = .616,.85;.308,.425
pausemovetime = 999999
supermovetime = 999999
sprpriority = 3
persistent=0
ignorhitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 0
trigger1 = root,var(28) = 0
trigger1 = time = 0
attr = S, NA
damage = 55*root,fvar(1),14
animtype = Light
guardflag = M
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 0;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -1*const(size.xscale)
guard.velocity = -8
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12
fall = 0
fall.recover = 0
air.fall = 1
p2stateno = 1070

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 0
trigger1 = root,var(28) = 1
trigger1 = time = 0
attr = S, NA
damage = 55*root,fvar(1),10
animtype = Light
guardflag = M
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 0;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -4*const(size.xscale),-6
air.type = High
air.velocity = -4,ifelse(root,var(40)<30,-6.5+(root,var(40)*0.2),ifelse((root,var(40)*0.2)<0,0,(root,var(40)*0.2)))
air.hittime = 12
fall = 1
fall.recover = 0
air.fall = 1

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 1
trigger1 = root,var(28) = 0
trigger1 = time = 0
attr = S, NA
damage = 80*root,fvar(1),14
animtype = Light
guardflag = 
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 0;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -1*const(size.xscale)
guard.velocity = -8
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12
fall = 0
fall.recover = 0
air.fall = 1
p2stateno = 1070

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 1
trigger1 = root,var(28) = 1
trigger1 = time = 0
attr = S, NA
damage = 0*root,fvar(1),10
animtype = Light
guardflag = 
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 80;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -4*const(size.xscale),-6
air.type = High
air.velocity = -4,ifelse(root,var(40)<30,-6.5+(root,var(40)*0.2),ifelse((root,var(40)*0.2)<0,0,(root,var(40)*0.2)))
;air.velocity = -4*const(size.xscale),-6
air.hittime = 12
fall = 1
fall.recover = 0
air.fall = 1

[State 0, shake]
type = envshake
trigger1 = movehit
time = 8
freq = 90
ampl = -7
phase = 0
persistent = 0
ignorhitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 1
ignorehitpause = 1

[State 230, 2];プッツン時スタンド消去
type = destroyself
trigger1 = root,stateno = 700
ignorehitpause = 1

[State 230, 2]
type = null;changestate
trigger1 = root,stateno = 700
value = 1103
ignorehitpause = 1

[State 1000, 7]
type = Helper
trigger1 = numtarget
trigger1 = numhelper(1045) = 0
helpertype = normal
name = "marker"
stateno = 1045
id = 1045
pos = 0, 0
postype = p2
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00

[State 230, 2]
type = changestate
trigger1 = !animtime
value = 1102
;---------------------------------------------------------------------------
;AH時は再び刻み始める！
[Statedef 1530]
type    = A
movetype= A
physics = S
velset = 0,0
anim = 1530
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 1000, 0
channel = 0

[State 1000, 7]
type = Helper
triggerall = var(49) = 0
trigger1 = Time = 0
;trigger1 = numhelper(1001) = 0
helpertype = normal
name = "king crimson"
stateno = 1531
id = 1001
pos = 0, 0
postype = p1
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00

[State 1000, 音を鳴らす]
type = varset
trigger1 = time = 56
v = 27
value = 1

[State 1000, 7]
type = Helper
trigger1 = time = 56
helpertype = normal
name = "efect"
stateno = 1004
id = 1004
pos = 25, -90
postype = p1
ownpal = 1
facing = 1
size.xscale = 0.5
size.yscale = 0.5

[State 901, Throw]
type = attackdist
trigger1 = 1
value = 0

[State 1000, 速度]
type = velset
trigger1 = time = [0,36]
x = 0
y = 0.15

[State 1000, ステート変更];⑨
type = ChangeState
triggerall = var(59)<=0
trigger1 = time >= 26
trigger1 = command != "hold_z"
trigger2 = time = 56
value = 1535

[State 1000, ステート変更]
type = ChangeState
trigger1 = Pos Y > 0
value = 52
;---------------------------------------------------------------------------
;AH時は再び刻み始める！　発射
[Statedef 1535]
type    = A
movetype= A
physics = S
velset = 0,0
anim = 1535
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす]
type = null;PlaySnd
trigger1 = animelem = 1
value = 1100, 0
channel = 0

[State 901, Throw]
type = attackdist
trigger1 = 1
value = 0

[State 1000, 速度]
type = veladd
trigger1 = time > 20
x = 0
y = 0.4

[State 1000, ステート変更]
type = ChangeState
trigger1 = Pos Y > 0
value = 52

[State 1000, ステート変更]
type = null;ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;AH時は再び刻み始める！ KC(スタンド)
[Statedef 1531]
type    = A
movetype= I
physics = S
poweradd= 0
ctrl = 0
anim = 1531
sprpriority = 0
facep2 = 1

[State 1065, 3]
type = bindtoparent
trigger1 = 1
pos = -10,-15
time = 1
ignorehitpause = 1

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = time = 0
trigger1 = facing != parent,facing

[State 301,]
type = NotHitBy
trigger1 = 1   
value = SCA    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 3
value = 1, 13

[State 0, 円]
type = explod
trigger1 = movehit
triggerall = numexplod(864) = 0 
anim = 864
id = 864
pos = 50,-80
postype = p1
ownpal = 1
shadow = 0,0,0
scale = .616,.85;.308,.425
pausemovetime = 999999
supermovetime = 999999
sprpriority = 3
persistent=0
ignorhitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 1
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno != [1500,1599]
value = 1102

[State 230, 2];プッツン時スタンド消去
type = destroyself
trigger1 = root,stateno = 700
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1535
value = 1536

[State 230, 2]
type = null;changestate
trigger1 = !animtime
value = 1536
;---------------------------------------------------------------------------
;AH時は再び刻み始める！ KC(スタンド) 攻撃
[Statedef 1536]
type    = A
movetype= A
physics = S
poweradd= 0
ctrl = 0
anim = 1536
sprpriority = 0
facep2 = 1

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = root,var(28) = 0
trigger1 = numtarget
trigger2 = root,var(28) = 1
trigger2 = movehit
value = 60
persistent = 0

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = time = 0
trigger1 = facing != parent,facing

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 1010, 移動速度]
type = VelSet
trigger1 = root,var(27) = 0
trigger1 = !time
x = 60

[State 1010, 移動速度]
type = VelSet
triggerall = root,var(27) = 0
trigger1 = time = 3
trigger2 = !movehit
trigger2 = p2bodydist x = [-20,20]
x = 2
persistent = 0

[State 1010, 移動速度]
type = VelSet
trigger1 = root,var(27) = 1
trigger1 = !time
x = 80

[State 1010, 移動速度]
type = VelSet
triggerall = root,var(27) = 1
trigger1 = time = 3
trigger2 = !movehit
trigger2 = p2bodydist x = [-20,20]
x = 2
persistent = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 1, 12

[State 0, 円]
type = explod
trigger1 = movehit
triggerall = numexplod(864) = 0 
anim = 864
id = 864
pos = 55,-77
postype = p1
ownpal = 1
shadow = 0,0,0
scale = .616,.85;.308,.425
pausemovetime = 999999
supermovetime = 999999
sprpriority = 3
persistent=0
ignorhitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 0
trigger1 = root,var(28) = 0
trigger1 = time = 0
attr = S, NA
damage = 55*root,fvar(1),14
animtype = Light
guardflag = M
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 0;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -1*const(size.xscale)
guard.velocity = -8
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12
fall = 0
fall.recover = 0
air.fall = 1
p2stateno = 1070

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 0
trigger1 = root,var(28) = 1
trigger1 = time = 0
attr = S, NA
damage = 55*root,fvar(1),10
animtype = Light
guardflag = M
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 0;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -4*const(size.xscale),-6
air.type = High
air.velocity = -4,ifelse(root,var(40)<30,-6.5+(root,var(40)*0.2),ifelse((root,var(40)*0.2)<0,0,(root,var(40)*0.2)))
air.hittime = 12
fall = 1
fall.recover = 0
air.fall = 1

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 1
trigger1 = root,var(28) = 0
trigger1 = time = 0
attr = S, NA
damage = 80*root,fvar(1),14
animtype = Light
guardflag = 
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 0;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -1*const(size.xscale)
guard.velocity = -8
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12
fall = 0
fall.recover = 0
air.fall = 1
p2stateno = 1070

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 1
trigger1 = root,var(28) = 1
trigger1 = time = 0
attr = S, NA
damage = 0*root,fvar(1),10
animtype = Light
guardflag = 
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 80;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -4*const(size.xscale),-6
air.type = High
air.velocity = -4,ifelse(root,var(40)<30,-6.5+(root,var(40)*0.2),ifelse((root,var(40)*0.2)<0,0,(root,var(40)*0.2)))
;air.velocity = -4*const(size.xscale),-6
air.hittime = 12
fall = 1
fall.recover = 0
air.fall = 1

[State 0, shake]
type = envshake
trigger1 = movehit
time = 8
freq = 90
ampl = -7
phase = 0
persistent = 0
ignorhitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 1
ignorehitpause = 1

[State 230, 2];プッツン時スタンド消去
type = destroyself
trigger1 = root,stateno = 700
ignorehitpause = 1

[State 230, 2]
type = null;changestate
trigger1 = root,stateno = 700
value = 1103
ignorehitpause = 1

[State 1000, 7]
type = Helper
trigger1 = numtarget
trigger1 = numhelper(1045) = 0
helpertype = normal
name = "marker"
stateno = 1045
id = 1045
pos = 0, 0
postype = p2
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00

[State 230, 2]
type = changestate
trigger1 = !animtime
value = 1102
;---------------------------------------------------------------------------
;AEX時は再び刻み始める！
[Statedef 1550]
type    = A
movetype= A
physics = S
velset = 0,0
anim = 1550
ctrl = 0
sprpriority = 2
poweradd = ifelse(var(31),-250,-500);-500

[State 5070, 3]
type = nothitby
trigger1 = time = [0,18]
value = SCA

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 1000, 0
channel = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 6, 15

[State 1000, 7]
type = Helper
triggerall = var(49) = 0
trigger1 = Time = 0
;trigger1 = numhelper(1001) = 0
helpertype = normal
name = "king crimson"
stateno = 1551
id = 1001
pos = 0, 0
postype = p1
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00

[State 1000, 音を鳴らす]
type = varset
trigger1 = time = 46
v = 27
value = 1

[State 1000, 7]
type = Helper
trigger1 = time = 46
helpertype = normal
name = "efect"
stateno = 1004
id = 1004
pos = 25, -90
postype = p1
ownpal = 1
facing = 1
size.xscale = 0.5
size.yscale = 0.5

[State 901, Throw]
type = attackdist
trigger1 = 1
value = 0

[State 1000, 速度]
type = velset
trigger1 = time = [0,31]
x = 0
y = 0.15

[State 730, Flash]
type = palfx
trigger1 = 1;time < 16
time = 1
add = 150 + ceil(sin(time / 2.0 * pi) * 150), 150 + ceil(sin(time / 2.0 * pi) * 150), 0

[State 1000, ステート変更];⑨
type = ChangeState
triggerall = var(59)<=0
trigger1 = time >= 16
trigger1 = command != "hold_a"
trigger2 = time = 46
value = 1555

[State 1000, ステート変更]
type = ChangeState
trigger1 = Pos Y > 0
value = 52
;---------------------------------------------------------------------------
;AEX時は再び刻み始める！　発射
[Statedef 1555]
type    = A
movetype= A
physics = S
velset = 0,0
anim = 1555
ctrl = 0
sprpriority = 2

[State 5070, 3]
type = nothitby
trigger1 = time = [0,6]
value = SCA

[State 1000, 音を鳴らす]
type = null;PlaySnd
trigger1 = animelem = 1
value = 1100, 0
channel = 0

[State 1000, 速度]
type = veladd
trigger1 = time > 20
x = 0
y = 0.4

[State 901, Throw]
type = attackdist
trigger1 = 1
value = 0

[State 1000, ステート変更]
type = ChangeState
trigger1 = Pos Y > 0
value = 52
;---------------------------------------------------------------------------
;AEX時は再び刻み始める！ KC(スタンド)
[Statedef 1551]
type    = A
movetype= I
physics = S
poweradd= 0
ctrl = 0
anim = 1501
sprpriority = 0
facep2 = 1

[State 730, Flash]
type = palfx
trigger1 = time < 46
time = 1
add = 150 + ceil(sin(time / 2.0 * pi) * 150), 150 + ceil(sin(time / 2.0 * pi) * 150), 0

[State 1065, 3]
type = bindtoparent
trigger1 = 1
pos = -10,-15
time = 1
ignorehitpause = 1

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = time = 0
trigger1 = facing != parent,facing

[State 301,]
type = NotHitBy
trigger1 = 1   
value = SCA    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 3
value = 1, 13

[State 0, 円]
type = explod
trigger1 = movehit
triggerall = numexplod(864) = 0 
anim = 864
id = 864
pos = 50,-80
postype = p1
ownpal = 1
shadow = 0,0,0
scale = .616,.85;.308,.425
pausemovetime = 999999
supermovetime = 999999
sprpriority = 3
persistent=0
ignorhitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 1
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno != [1500,1599]
value = 1102

[State 230, 2];プッツン時スタンド消去
type = destroyself
trigger1 = root,stateno = 700
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1555
value = 1556
;---------------------------------------------------------------------------
;AEX時は再び刻み始める！ KC(スタンド) 攻撃
[Statedef 1556]
type    = A
movetype= A
physics = S
poweradd= 0
ctrl = 0
anim = 1556
sprpriority = 0
facep2 = 1

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = root,var(28) = 0
trigger1 = numtarget
trigger2 = root,var(28) = 1
trigger2 = movehit
value = 0
persistent = 0

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = time = 0
trigger1 = facing != parent,facing

[State 5070, 3]
type = nothitby
trigger1 = time = [0,6]
value = SCA

[State 301,]
type = NotHitBy
trigger1 = time > 6
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 1010, 移動速度]
type = VelSet
trigger1 = root,var(27) = 0
trigger1 = !time
x = 60

[State 1010, 移動速度]
type = VelSet
triggerall = root,var(27) = 0
trigger1 = time = 3
trigger2 = !movehit
trigger2 = p2bodydist x = [-20,20]
x = 2
persistent = 0

[State 1010, 移動速度]
type = VelSet
trigger1 = root,var(27) = 1
trigger1 = !time
x = 80

[State 1010, 移動速度]
type = VelSet
triggerall = root,var(27) = 1
trigger1 = time = 3
trigger2 = !movehit
trigger2 = p2bodydist x = [-20,20]
x = 2
persistent = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 1, 12

[State 0, 円]
type = explod
trigger1 = movehit
triggerall = numexplod(864) = 0 
anim = 864
id = 864
pos = 55,-77
postype = p1
ownpal = 1
shadow = 0,0,0
scale = .616,.85;.308,.425
pausemovetime = 999999
supermovetime = 999999
sprpriority = 3
persistent=0
ignorhitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 0
trigger1 = root,var(28) = 0
trigger1 = time = 0
attr = S, NA
damage = 55*root,fvar(1),14
animtype = Light
guardflag = M
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 0;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -1*const(size.xscale)
guard.velocity = -8
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12
fall = 0
fall.recover = 0
air.fall = 1
p2stateno = 1070

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 0
trigger1 = root,var(28) = 1
trigger1 = time = 0
attr = S, NA
damage = 55*root,fvar(1),10
animtype = Light
guardflag = M
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 0;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -4*const(size.xscale),-6
air.type = High
air.velocity = -4,ifelse(root,var(40)<30,-6.5+(root,var(40)*0.2),ifelse((root,var(40)*0.2)<0,0,(root,var(40)*0.2)))
air.hittime = 12
fall = 1
fall.recover = 0
air.fall = 1

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 1
trigger1 = root,var(28) = 0
trigger1 = time = 0
attr = S, NA
damage = 80*root,fvar(1),14
animtype = Light
guardflag = 
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 0;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -1*const(size.xscale)
guard.velocity = -8
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12
fall = 0
fall.recover = 0
air.fall = 1
p2stateno = 1070

[State 200, 1]
type = HitDef
trigger1 = root,var(27) = 1
trigger1 = root,var(28) = 1
trigger1 = time = 0
attr = S, NA
damage = 0*root,fvar(1),10
animtype = Light
guardflag = 
hitflag = MAF
priority = 2, Hit
pausetime = 0, 15
getpower = 80;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -4*const(size.xscale),-6
air.type = High
air.velocity = -4,ifelse(root,var(40)<30,-6.5+(root,var(40)*0.2),ifelse((root,var(40)*0.2)<0,0,(root,var(40)*0.2)))
;air.velocity = -4*const(size.xscale),-6
air.hittime = 12
fall = 1
fall.recover = 0
air.fall = 1

[State 0, shake]
type = envshake
trigger1 = movehit
time = 8
freq = 90
ampl = -7
phase = 0
persistent = 0
ignorhitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 1
ignorehitpause = 1

[State 230, 2];プッツン時スタンド消去
type = destroyself
trigger1 = root,stateno = 700
ignorehitpause = 1

[State 230, 2]
type = null;changestate
trigger1 = root,stateno = 700
value = 1103
ignorehitpause = 1

[State 1000, 7]
type = Helper
trigger1 = numtarget
trigger1 = numhelper(1045) = 0
helpertype = normal
name = "marker"
stateno = 1045
id = 1045
pos = 0, 0
postype = p2
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00

[State 230, 2]
type = changestate
trigger1 = !animtime
value = 1102
;---------------------------------------------------------------------------
;トドメだッ！
[Statedef 1100]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1100
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 1100, 0
channel = 0

[State 1000, 7]
type = Helper
triggerall = var(49) = 0
triggerall = !time
trigger1 = !numhelper(1001)
trigger2 = helper(1001),stateno = 1102
trigger3 = helper(1001),stateno = 206 || helper(1001),stateno = 216 || helper(1001),stateno = 226
trigger4 = helper(1001),stateno = 406 || helper(1001),stateno = 416 || helper(1001),stateno = 426
trigger5 = numhelper(1001) < 2
trigger5 = helper(1001),stateno = 417 ||helper(1001),stateno = 418
helpertype = normal
name = "king crimson"
stateno = 1101
id = 1001
pos = 20, 0
postype = p1
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00
;ignorehitpause = 1
;persistent = 0

[State 200, 1]
type = HitDef
trigger1 = var(29) = 0
trigger1 = time = 0
attr = S, NA
damage = 70*fvar(1),14
animtype = Light
guardflag = H
hitflag = MAF
priority = 2, Hit
pausetime = 15, 15
getpower = 65;ifelse(helper(8500),fvar(8)=0,65,65*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -25
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -1*const(size.xscale)
guard.velocity = -8
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12
fall = 1
fall.recover = 0
air.fall = 1
p2stateno = 10425
guard.kill = 0

[State 200, 1]
type = HitDef
trigger1 = var(29) = 1
trigger1 = time = 0
attr = S, NA
damage = 70*fvar(1),10
animtype = Light
guardflag = 
hitflag = MAF
priority = 2, Hit
pausetime = 15, 15
getpower = 65;ifelse(helper(8500),fvar(8)=0,65,65*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -25
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -8*const(size.xscale)
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12
fall = 1
fall.recover = 0
air.fall = 1
guard.kill = 0

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;KC(スタンド)
[Statedef 1101]
type    = S
movetype= I
physics = S
poweradd= 0
ctrl = 0
anim = 1101
sprpriority = 0
facep2 = 1

[State 1065, 3]
type = bindtoparent
trigger1 = 1
pos = 0,-10
time = 1
ignorehitpause = 1

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = time = 0
trigger1 = facing != parent,facing

[State 301,]
type = NotHitBy
trigger1 = 1   
value = SCA    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 1010, 移動速度]
type = null;VelSet
trigger1 = time = 28
x = 4

[State 0, shake]
type = envshake
trigger1 = time = 25
time = 8
freq = 90
ampl = -7
phase = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 3
value = 1, 13

[State 0, 円]
type = explod
trigger1 = movehit
triggerall = numexplod(864) = 0 
anim = 864
id = 864
pos = 0,-40
postype = p2
ownpal = 1
shadow = 0,0,0
scale = .616,.85;.308,.425
pausemovetime = 999999
supermovetime = 999999
sprpriority = 3
persistent=0
ignorhitpause = 1

[State 0, 衝撃波]
type = explod
trigger1 = time = 25
anim = 916
id = 916
pos = 72,-5
postype = p1
ownpal = 1
shadow = 0,0,0
scale = .4,.4
pausemovetime = 999999
supermovetime = 999999
sprpriority = 3
persistent=0

[State 0, 衝撃波B]
type = explod
trigger1 = time = 25
anim = 877
id = 877
pos = 70,0
postype = p1
ownpal = 1
shadow = 0,0,0
scale = .8,.8
pausemovetime = 999999
supermovetime = 999999
sprpriority = 3
persistent=0

[State -2,***]
type = null;sprpriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 1
ignorehitpause = 1

[State 230, 2]
type = screenbound
trigger1 = 1
value = 1

[State 230, 2]
type = nothitby
trigger1 = time >= 100
value = SCA
time = -1

[State 230, 2];プッツン時スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno = 3090
ignorehitpause = 1

[State 230, 2]
type = null;changestate
trigger1 = root,stateno = 700
value = 1103
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = animtime = 0
value = 1102
;---------------------------------------------------------------------------
;KC(スタンド) 待機
[Statedef 1103]
type    = S
movetype= A
physics = S
anim = 29999
sprpriority = 0

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = invisible
ignorehitpause = 1

[State 301,]
type = NotHitBy
trigger1 = 1   
value = SCA    
time = 1

[State 230, 2]
type = destroyself
trigger1 = !numtarget
trigger2 = root,stateno = [1100,1120]
ignorehitpause = 1
;---------------------------------------------------------------------------
; 終了（弱）(スタンド)
[Statedef 1102]
type    = S
movetype= I
physics = S
poweradd= 0
ctrl = 0
velset = 0,0
anim = 1102
sprpriority = 0

[State 230, 2]
type = changeanim
trigger1 = !time
trigger1 = prevstateno =[400,499]
value = 402

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = invisible

[State 1000, 5]
type = null;explod
trigger1 = prevstateno != [400,499]
trigger1 = time = 0
anim = 1102
id = 1002
pos = 0,0
postype = p1
sprpriority = 0
bindtime = -1
removeongethit = 1
scale = const(size.xscale),const(size.yscale)
pausemovetime = parent,var(14) * 9999999999999

[State 1000, 5]
type = null;explod
trigger1 = prevstateno = [400,499]
trigger1 = time = 0
anim = 402
id = 1002
pos = 0,0
postype = p1
sprpriority = 0
bindtime = -1
removeongethit = 1
scale = const(size.xscale),const(size.yscale)
pausemovetime = parent,var(14) * 9999999999999

[State 1000, 3]
type = null;ModifyExplod
trigger1 = time >= 2
ID = 1002
scale = 1-time/11.5 , 1+time/11.5
pausemovetime = parent,var(14) * 9999999999999

[State 191, 3]
type = PlaySnd
trigger1 = !time
value = 100,1

[State 0, 線]
type = explod
trigger1 = time = 0
anim = 1103
id = 1103
pos = 0,ifelse(anim=402,-40,-80)
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .8,.8
pausemovetime = 999999
supermovetime = 999999

[State 0, 円]
type = explod
trigger1 = !time
anim = 866
id = 867
pos = 0,ifelse(anim=402,-40,-80)
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .508,.645
pausemovetime = 999999
supermovetime = 999999

[State 230, 2]
type = null;changestate
trigger1 = animtime = 0
value = 1103

[State 230, 2]
type = null;changestate
trigger1 = numtarget
trigger1 = prevstateno = [1000,1039]
trigger1 = animtime = 0
value = 1040

[State 230, 2]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,stateno = 3000
trigger3 = root,stateno = 3300
;---------------------------------------------------------------------------
;トドメだッ！H
[Statedef 1120]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1120
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 1100, 0
channel = 0

[State 1000, 7]
type = Helper
triggerall = var(49) = 0
triggerall = !time
trigger1 = !numhelper(1001)
trigger2 = helper(1001),stateno = 1102
trigger3 = helper(1001),stateno = 206 || helper(1001),stateno = 216 || helper(1001),stateno = 226
trigger4 = helper(1001),stateno = 406 || helper(1001),stateno = 416 || helper(1001),stateno = 426
trigger5 = numhelper(1001) < 2
trigger5 = helper(1001),stateno = 417 ||helper(1001),stateno = 418
helpertype = normal
name = "king crimson"
stateno = 1121
id = 1001
pos = 20, 0
postype = p1
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00

[State 200, 1]
type = HitDef
trigger1 = var(29) = 0
trigger1 = time = 0
attr = S, NA
damage = 50*fvar(1),8
animtype = Light
guardflag = H
hitflag = MAFD
priority = 2, Hit
pausetime = 15, 15
getpower = 65;ifelse(helper(8500),fvar(8)=0,65,65*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -25
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -1*const(size.xscale)
guard.velocity = -8
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12
fall = 1
fall.recover = 0
air.fall = 1
p2stateno = 10425
guard.kill = 0

[State 200, 1]
type = HitDef
trigger1 = var(29) = 1
trigger1 = time = 0
attr = S, NA
damage = 50*fvar(1),10
animtype = Light
guardflag = 
hitflag = MAFD
priority = 2, Hit
pausetime = 15, 15
getpower = 65;ifelse(helper(8500),fvar(8)=0,65,65*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -25
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -8*const(size.xscale)
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12
fall = 1
fall.recover = 0
air.fall = 1
guard.kill = 0

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;KC(スタンド)
[Statedef 1121]
type    = S
movetype= I
physics = S
poweradd= 0
ctrl = 0
anim = 1121
sprpriority = 0
facep2 = 1

[State 1065, 3]
type = bindtoparent
trigger1 = 1
pos = 0,-10
time = 1
ignorehitpause = 1

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = time = 0
trigger1 = facing != parent,facing

[State 301,]
type = NotHitBy
trigger1 = 1   
value = SCA    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 1010, 移動速度]
type = null;VelSet
trigger1 = time = 28
x = 4

[State 0, shake]
type = envshake
trigger1 = time = 31
time = 8
freq = 90
ampl = -7
phase = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 3
value = 1, 13

[State 0, 円]
type = explod
trigger1 = movehit
triggerall = numexplod(864) = 0 
anim = 864
id = 864
pos = 0,-40
postype = p2
ownpal = 1
shadow = 0,0,0
scale = .616,.85;.308,.425
pausemovetime = 999999
supermovetime = 999999
sprpriority = 3
persistent=0
ignorhitpause = 1

[State 0, 衝撃波]
type = explod
trigger1 = time = 31
anim = 916
id = 916
pos = 72,-5
postype = p1
ownpal = 1
shadow = 0,0,0
scale = .4,.4
pausemovetime = 999999
supermovetime = 999999
sprpriority = 3
persistent=0

[State 0, 衝撃波B]
type = explod
trigger1 = time = 31
anim = 877
id = 877
pos = 70,0
postype = p1
ownpal = 1
shadow = 0,0,0
scale = .8,.8
pausemovetime = 999999
supermovetime = 999999
sprpriority = 3
persistent=0

[State -2,***]
type = null;sprpriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 1
ignorehitpause = 1

[State 230, 2]
type = screenbound
trigger1 = 1
value = 1

[State 230, 2]
type = nothitby
trigger1 = time >= 100
value = SCA
time = -1

[State 230, 2];プッツン時スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno = 3090
ignorehitpause = 1

[State 230, 2]
type = null;changestate
trigger1 = root,stateno = 700
value = 1103
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = animtime = 0
value = 1102
;---------------------------------------------------------------------------
;トドメだッ！EX
[Statedef 1150]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1150
ctrl = 0
sprpriority = 2
poweradd = ifelse(var(31),-250,-500);-500

[State 901, Throw]
type = attackdist
trigger1 = 1
value = 0

[State 730, Flash]
type = palfx
trigger1 = time < 28
time = 1
add = 150 + ceil(sin(time / 2.0 * pi) * 150), 150 + ceil(sin(time / 2.0 * pi) * 150), 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 1100, 0
channel = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 6, 15

[State 1000, 7]
type = Helper
triggerall = var(49) = 0
triggerall = !time
trigger1 = !numhelper(1001)
trigger2 = helper(1001),stateno = 1102
trigger3 = helper(1001),stateno = 206 || helper(1001),stateno = 216 || helper(1001),stateno = 226
trigger4 = helper(1001),stateno = 406 || helper(1001),stateno = 416 || helper(1001),stateno = 426
trigger5 = numhelper(1001) < 2
trigger5 = helper(1001),stateno = 417 ||helper(1001),stateno = 418
helpertype = normal
name = "king crimson"
stateno = 1151
id = 1001
pos = 20, 0
postype = p1
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00

[State 200, 1]
type = HitDef
trigger1 = var(29) = 0
trigger1 = time = 0
attr = S, NA
damage = 150*fvar(1),10
animtype = Light
guardflag = 
hitflag = MAFD
priority = 2, Hit
pausetime = 15, 15
getpower = 0;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -1*const(size.xscale)
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12
fall = 1
fall.recover = 0
air.fall = 1
p2stateno = 10425
guard.kill = 0

[State 200, 1]
type = HitDef
trigger1 = var(29) = 1
trigger1 = time = 0
attr = S, NA
damage = 150*fvar(1),10
animtype = Light
guardflag = 
hitflag = MAFD
priority = 2, Hit
pausetime = 15, 15
getpower = 0;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -66
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -1*const(size.xscale)
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12
fall = 1
fall.recover = 0
air.fall = 1
guard.kill = 0

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;KC(スタンド)
[Statedef 1151]
type    = S
movetype= I
physics = S
poweradd= 0
ctrl = 0
anim = 1151
sprpriority = 0
facep2 = 1

[State 730, Flash]
type = palfx
trigger1 = time < 28
time = 1
add = 150 + ceil(sin(time / 2.0 * pi) * 150), 150 + ceil(sin(time / 2.0 * pi) * 150), 0

[State 1065, 3]
type = bindtoparent
trigger1 = 1
pos = 10,-10
time = 1
ignorehitpause = 1

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = time = 0
trigger1 = facing != parent,facing

[State 301,]
type = NotHitBy
trigger1 = 1   
value = SCA    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 0, shake]
type = envshake
trigger1 = time = 32
time = 15
freq = 90
ampl = -15
phase = 0

[State 200, 1]
type = null;HitDef
trigger1 = root,var(29) = 0
trigger1 = time = 0
attr = S, NA
damage = 180, 180
animtype = Light
guardflag = 
hitflag = MAFD
priority = 2, Hit
pausetime = 15, 15
getpower = 200;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -80
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -1*const(size.xscale)
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12
fall = 1
fall.recover = 0
air.fall = 1
p2stateno = 10425
guard.kill = 0

[State 200, 1]
type = null;HitDef
trigger1 = root,var(29) = 1
trigger1 = time = 0
attr = S, NA
damage = 180, 180
animtype = Light
guardflag = 
hitflag = MAFD
priority = 2, Hit
pausetime = 15, 15
getpower = 200;ifelse(helper(8500),fvar(8)=0,100,100*1.1)
givepower = 40
sparkno = s830
guard.sparkno = s840
sparkxy = -10, -66
hitsound = s1, 3
guardsound = s1,5
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
guard.hittime  = 12
ground.velocity = -1*const(size.xscale)
air.type = High
air.velocity = -2.5*const(size.xscale),0
air.hittime = 12
fall = 1
fall.recover = 0
air.fall = 1
guard.kill = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 3
value = 1, 13

[State 0, 円]
type = explod
trigger1 = movehit
triggerall = numexplod(864) = 0 
anim = 864
id = 864
pos = 0,-40
postype = p2
ownpal = 1
shadow = 0,0,0
scale = .616,.85;.308,.425
pausemovetime = 999999
supermovetime = 999999
sprpriority = 3
persistent=0
ignorhitpause = 1

[State 0, 衝撃波]
type = explod
trigger1 = time = 32
anim = 916
id = 916
pos = 73,-5
postype = p1
ownpal = 1
shadow = 0,0,0
scale = .5,.5
pausemovetime = 999999
supermovetime = 999999
sprpriority = 3
persistent=0

[State 0, 衝撃波B]
type = explod
trigger1 = time = 32
anim = 877
id = 877
pos = 70,0
postype = p1
ownpal = 1
shadow = 0,0,0
scale = 1.0,1.0
pausemovetime = 999999
supermovetime = 999999
sprpriority = 3
persistent=0

[State -2,***]
type = null;sprpriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 1
ignorehitpause = 1

[State 230, 2]
type = screenbound
trigger1 = 1
value = 1

[State 230, 2]
type = nothitby
trigger1 = time >= 100
value = SCA
time = -1

[State 230, 2];プッツン時スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno = 3090
ignorehitpause = 1

[State 230, 2]
type = null;changestate
trigger1 = root,stateno = 700
value = 1103
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = animtime = 0
value = 1102
;---------------------------------------------------------------------------
;『時間を消し去って』飛び越えさせた…！！
[Statedef 1200]
type    = S
movetype= A
physics = S	
velset = 0,0
anim = 1200
ctrl = 0
sprpriority = 2

[State 4200,03]
type = Poweradd
trigger1 = !Time
value = ifelse(var(31),0,ifelse(var(30),0,-250))

[State 950]
type = HitBy
trigger1 = time = [0,114]
value = SCA,AT

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 1200, 0
channel = 0

[State 3200]
type = StateTypeSet
trigger1 = enemy,movetype = A
movetype = A

[State 1009, 受け止め定義]
type = ReversalDef
trigger1 = AnimElem = 4
reversal.attr = SAC, AA,AP
pausetime     = 0,0
numhits       = 0
sparkno       = s810
sparkxy       = 6500,0
P1StateNo     = 1201
P2StateNo     = 1230
id = 1230
ignorhitpause = 1

[State 901, Throw]
type = attackdist
trigger1 = 1
value = 0

[State 1000, 7]
type = Helper
triggerall = var(49) = 0
triggerall = !time
trigger1 = !numhelper(1001)
trigger2 = helper(1001),stateno = 1102
trigger3 = helper(1001),stateno = 206 || helper(1001),stateno = 216 || helper(1001),stateno = 226
trigger4 = helper(1001),stateno = 406 || helper(1001),stateno = 416 || helper(1001),stateno = 426
trigger5 = numhelper(1001) < 2
trigger5 = helper(1001),stateno = 417 ||helper(1001),stateno = 418
helpertype = normal
name = "king crimson"
stateno = 1202
id = 1001
pos = 20, 0
postype = p1
ownpal = 1
facing = 1
size.xscale = .883
size.yscale = 1.00

[State 1200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;『時間を消し去って』飛び越えさせた…！！ 成功
[Statedef 1201]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1201
ctrl = 0
sprpriority = 2

[State 301,対象捕獲]
type = Helper
trigger1 = !time
trigger1 = !numhelper(14330)
helpertype = normal
name = "hokaku"
stateno = 14330
id = 14330
pos = 0, 0
postype = p1
ownpal = 1
facing = -1
pausemovetime = 999999
supermovetime = 999999
ignorhitpause = 0

[State 0, shake]
type = envshake
trigger1 = time = 0
time = 15
freq = 90
ampl = -15
phase = 0

[State 400, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = 1201, 0
channel = 0

[State 400, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = 1, 14

[State 200, 1]
type = HitDef
trigger1 = time < 5
attr = S, ST
damage = 0, 0
animtype = Light
guardflag = 
hitflag = MAF
priority = 2, Hit
pausetime = 0, 0
sparkno = -1
guard.sparkno = -1
sparkxy = -10, -76
hitsound   = -1
guardsound = -1
ground.type = High
ground.slidetime = 0
ground.hittime  = 0
guard.hittime  = 0
ground.velocity = 0*const(size.xscale)
air.type = High
air.velocity = 0*const(size.xscale),0
air.hittime = 0
affectteam = B
id = 1230
numhits = 0
ignorhitpause = 1

[State 810, 掴んだ相手のステート変更]
type = TargetState
;trigger1 = !time
trigger1 = numtarget
value = 1230

[State 3000, 残像]
type = null;AfterImage
trigger1 = AnimElem = 5, 1
time = 2
length = 10
FrameGap = 3
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = 1,1,1
trans = add1

[State 3000, 残像表示時間]
type = null;AfterImageTime
trigger1 = AnimElemTime(5) >= 1 && Time < 35
time = 2

[State 1000, 7]
type = Helper
triggerall = numhelper(1205) = 0
trigger1 = !time
helpertype = normal
name = "anten"
stateno = 1205
id = 1205
pos = 0, 0
postype = p1
ownpal = 1
facing = 1
pausemovetime = 999999
supermovetime = 999999

[State 0,dooon]
type = explod
triggerall = numexplod(1290) = 0
trigger1 = !time
trigger1 = facing = 1
anim = 1290
id = 1290
pos = -15,-60
postype = p1
ownpal = 1
shadow = 0,0,0
scale = .5,.5
pausemovetime = 999999
supermovetime = 999999
sprpriority = 8
removetime = 48
facing = 1
persistent=0
ignorhitpause = 1

[State 0,dooon]
type = explod
triggerall = numexplod(1290) = 0
trigger1 = !time
trigger1 = facing = -1
anim = 1290
id = 1290
pos = -15,-60
postype = p1
ownpal = 1
shadow = 0,0,0
scale = .5,.5
pausemovetime = 999999
supermovetime = 999999
sprpriority = 8
removetime = 48
facing = -1
persistent=0
ignorhitpause = 1

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 702, すり抜け]
type = null;PlayerPush
trigger1 = Time > 8
value = 0

[State 1200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;projectile受け止め
[Statedef 1280]
type     = A
movetype = I
physics  = N
juggle   = 1
ctrl     = 0
anim     = 1280
poweradd = 0
sprpriority = 6

[State 950]
type = NotHitBy
trigger1 = 1
value = ,AT

[State 950]
type = ReversalDef
trigger1 = root,var(14) <= 0
reversal.attr = SCA,AA,AP
attr = S,HT
p1stateno = 961

[State 950]
type = HitOverride
trigger1 = root,var(14) <= 0
attr = SCA,AP,AA,AT
slot = 1
stateno = 961
time = 1
forceair = 0

[State 950]
type = BindToRoot
trigger1 = 1
time = 1
facing = 1

[State 950]
type = DestroySelf
trigger1 = root,stateno != 1200
;---------------------------------------------------------------------------
;捕獲された相手
[Statedef 14030]
type = S
movetype = H
physics = S
ctrl = 0
velset = 0,0

[State 210, 2]
type = destroyself
trigger1 = ishelper
trigger1 = !time

[State 0, hitby]
type = nothitby
trigger1 = 1
value = SCA

[State 3000, ステート変更]
type = selfState
trigger1 = time = 1
value = 0
ctrl = 1
;===========================================================================
;対象捕獲用ヘルパー
[Statedef 14330]
type = A
movetype = A
physics = N
ctrl = 0
anim = 14330

[State 0, reversal]
type = reversaldef
trigger1 = (time%3) = 0
reversal.attr = SCA,AA,AP,AT
pausetime = 0,0
sparkno = -1
hitsound = -1
numhits = 0
hitonce = 0
p2stateno = 14030

[State 0, hit]
type = hitdef
trigger1 = (time%3) = 1
attr = SCA,HT
priority = 1,Miss
affectteam = B
hitflag = MAFD
guardflag = -1
sparkno = -1
hitsound = -1
numhits = 0
hitonce = 0
p2stateno = 14030
fall = 1

[State 0, hit]
type = hitdef
trigger1 = (time%3) = 2
attr = SCA,HA
priority = 1,Miss
affectteam = B
hitflag = MAFD
guardflag = -1
sparkno = -1
hitsound = -1
numhits = 0
hitonce = 0
p2stateno = 14030
fall = 1

[State 0, end]
type = DestroySelf
trigger1 = root,stateno != 1201
trigger1 = root,stateno != 6666
;---------------------------------------------------------------------------
;『時間を消し去って』飛び越えさせた…！！ KC(スタンド)
[Statedef 1202]
type    = S
movetype= I
physics = S
poweradd= 0
ctrl = 0
anim = 1202
sprpriority = 0
facep2 = 1

[State 1065, 3]
type = bindtoparent
trigger1 = 1
pos = 10,0
time = 1
ignorehitpause = 1

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = time = 0
trigger1 = facing != parent,facing

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 1
ignorehitpause = 1

[State 230, 2];プッツン時スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno = 3090
ignorehitpause = 1

[State 230, 2]
type = changeanim
trigger1 = anim = 1202
trigger1 = root,stateno = 1201
value = 1203

[State 230, 2]
type = changestate
trigger1 = animtime = 0
value = 1102;1204
;---------------------------------------------------------------------------
;『時間を消し去って』飛び越えさせた…！！ KC 終了
[Statedef 1204]
type    = S
movetype= I
physics = S
poweradd= 0
ctrl = 0
velset = 0,0
anim = 1204
sprpriority = 0

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = invisible

[State 1000, 5]
type = explod
trigger1 = time = 0
trigger1 = root,stateno = 1201
anim = 1205
id = 1002
pos = 0,0
postype = p1
sprpriority = 0
bindtime = -1
removeongethit = 1
scale = const(size.xscale),const(size.yscale)
pausemovetime = parent,var(14) * 9999999999999

[State 1000, 5]
type = explod
trigger1 = time = 0
trigger1 = root,stateno != 1201
anim = 1204
id = 1002
pos = 0,0
postype = p1
sprpriority = 0
bindtime = -1
removeongethit = 1
scale = const(size.xscale),const(size.yscale)
pausemovetime = parent,var(14) * 9999999999999

[State 1000, 3]
type = ModifyExplod
trigger1 = time >= 2
ID = 1002
scale = 1-time/11.5 , 1+time/11.5
pausemovetime = parent,var(14) * 9999999999999

[State 191, 3]
type = PlaySnd
trigger1 = animtime = 0
value = 100,1

[State 0, 円]
type = explod
trigger1 = !time
anim = 866
id = 867
pos = 0,-80
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .508,.645
pausemovetime = 999999
supermovetime = 999999

[State 230, 2]
type = changestate
trigger1 = animtime = 0
value = 1103

[State 230, 2]
type = destroyself
trigger1 = animtime = 0
;---------------------------------------------------------------------------
;時飛ばしヘルパー
[Statedef 1205]
type = S
movetype = A
physics = S
anim = 29999
ctrl = 0

[State 181, EnvColor]
type = Bgpalfx
trigger1 = stateno = 1205
trigger1 = time = [0,5]
time = 1
invertall = 1
add = 205,205,205
;color = 0
ignorehitpause = 1

[State 181, EnvColor]
type = Bgpalfx
triggerall = !root,var(38)
trigger1 = stateno = 1205
trigger1 = time = [5,175]
time = 1
invertall = 1
add = 128,0,0
;color = 0
ignorehitpause = 1

[State 181, EnvColor]
type = Bgpalfx
trigger1 = stateno = 1205
trigger1 = time = [175,180]
time = 1
invertall = 1
add = 205,205,205
;color = 0
ignorehitpause = 1

[State 0,dooon]
type = explod
triggerall = numexplod(1258) = 0
trigger1 = root,var(38) = 1
trigger1 = time = 5
anim = 1258
id = 1258
pos = 0,0
postype = back
ownpal = 1
scale = 1,.25
pausemovetime = 999999
supermovetime = 999999
sprpriority = -8
removetime = -1
bindtime = -1
persistent=0
ignorhitpause = 1

[State 0,dooon]
type = explod
triggerall = numexplod(930) = 0
trigger1 = root,var(38) = 1
trigger1 = time = 5
anim = 930
id = 930
pos = 160,200
postype = back
ownpal = 1
scale = .8,.5
pausemovetime = 999999
supermovetime = 999999
sprpriority = -5
removetime = -1
bindtime = 1
persistent=0
ignorhitpause = 1

[State 6000, 0]
type = RemoveExplod
triggerall = root,var(38) = 1
trigger1 = time = 180
trigger2 = root,stateno != 1201
trigger2 = root,movetype = A
trigger3 = root,numtarget = 0
trigger3 = time > 20
ID = 930

[State 6000, 0]
type = RemoveExplod
triggerall = root,var(38) = 1
trigger1 = time = 180
trigger2 = root,stateno != 1201
trigger2 = root,movetype = A
trigger3 = root,numtarget = 0
trigger3 = time > 20
ID = 1258

[State 1540, 1]
type = destroyself
trigger1 = time = 180
trigger2 = root,stateno != 1201
trigger2 = root,movetype = A
trigger3 = root,numtarget = 0
trigger3 = time > 20
;---------------------------------------------------------------------------
;時飛ばしヘルパー2
[Statedef 1206]
type = S
movetype = A
physics = S
anim = 9999
ctrl = 0

[State 3002,1]
type = AllPalfx
triggerall = 1
trigger1 = root,stateno = 3502
trigger2 = root,stateno = 13502
add = var(4),var(4),var(4)
sinadd = 10, 10, 10
time = 1
supermove = 1
ignorehitpause = 1

[State 1540, 1]
type = varadd
trigger1 = time <= 40
var(4) = 2
supermove = 1
persistent = 1

[State 1540, 1]
type = changestate
triggerall = time > 40
trigger1 = root,stateno != 3502 && root,stateno != 13502
trigger2 = root,movetype = H
value = 3586

[State 1540, 1]
type = changestate
triggerall = time > 40
trigger1 = root,stateno != 3502 && root,stateno != 13502
trigger2 = root,movetype = H
value = 3586

[Statedef 3586]
type = A
movetype = I
physics = N
anim = 9999
ctrl = 0
sprpriority = 2

[State 3002,1]
type = AllPalfx
trigger1 = 1
add = var(4),var(4),var(4)
sinadd = 10, 10, 10
time = 1
supermove = 1
ignorehitpause = 1

[State 1540, 1]
type = varadd
trigger1 = time >= 0
var(4) = -7
supermove = 1
persistent = 1

[State 1020, Blink Yellow]
type = allPalFX
trigger1 = var(4) >= 7
time = 3
add = 255,255,255

[State 1540, 1]
type = destroyself
trigger1 = var(4) >= 7
;---------------------------------------------------------------------------
;時飛ばされた相手
[Statedef 1230]
type    = S
movetype= H
physics = N
velset = 0,0

[State 230, 2]
type = playerpush
trigger1 = 1
value = 0

[State 210, 2]
type = destroyself
trigger1 = ishelper
trigger1 = !time

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 5070, 3]
type = nothitby
trigger1 = 1
value = SCA

[State 5070, 1]
type = ChangeAnim
triggerall = anim != 0
trigger1 = !animtime
trigger2 = time = 0
value = 0

[State 5070, 2]
type = SelfState
trigger1 = !alive
value = 5150

[State 5070, 2]
type = SelfState
trigger1 = time = 180
trigger2 = enemynear,Authorname = "amarimono"
trigger2 = enemynear,Name = "s_diavolo"
trigger2 = enemynear,movetype = A
trigger2 = enemynear,stateno != 1201
trigger2 = enemynear,stateno != 6666
trigger3 = partner,Authorname = "amarimono"
trigger3 = partner,Name = "s_diavolo"
trigger3 = partner,movetype = A
trigger3 = partner,stateno != 1201
trigger3 = partner,stateno != 6666
trigger4 = time > 50
trigger4 = enemynear,movetype = A
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;おかえり
[Statedef 1231]
type    = S
movetype= H
physics = N
velset = 0,0

[State 5070, 2]
type = SelfState
trigger1 = time = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;能動的時間跳躍
[Statedef 6666]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1600
ctrl = 0
sprpriority = 2

[State 301,対象捕獲]
type = Helper
trigger1 = !time
trigger1 = !numhelper(14330)
helpertype = normal
name = "hokaku"
stateno = 14330
id = 14330
pos = 0, 0
postype = p1
ownpal = 1
facing = -1
pausemovetime = 999999
supermovetime = 999999
ignorhitpause = 0

[State 3000, ゲージ増加]
type = PowerAdd
triggerall = time = 0
trigger1 = prevstateno != [5000,5019]
value = ifelse(var(31),-500,-1000)

[State 3000, ゲージ増加]
type = PowerAdd
triggerall = time = 0
trigger1 = prevstateno = [5000,5019]
value = ifelse(var(31),-500,-1500);-1500

[State 0, shake]
type = envshake
trigger1 = time = 0
time = 15
freq = 90
ampl = -15
phase = 0

[State 400, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = 6666, 0
channel = 0

[State 400, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = 1, 14

[State 200, 1]
type = HitDef
trigger1 = time = 5
attr = S, ST
damage = 0, 0
animtype = Light
guardflag = 
hitflag = MAF
priority = 2, Hit
pausetime = 0, 0
sparkno = -1
guard.sparkno = -1
sparkxy = -10, -76
hitsound   = -1
guardsound = -1
ground.type = High
ground.slidetime = 0
ground.hittime  = 0
guard.hittime  = 0
ground.velocity = 0*const(size.xscale)
air.type = High
air.velocity = 0*const(size.xscale),0
air.hittime = 0
affectteam = B
id = 1230
numhits = 0
ignorhitpause = 1

[State 810, 掴んだ相手のステート変更]
type = TargetState
;trigger1 = !time
trigger1 = numtarget
value = 1230

[State 3000, 残像]
type = null;AfterImage
trigger1 = AnimElem = 5, 1
time = 2
length = 10
FrameGap = 3
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = 1,1,1
trans = add1

[State 3000, 残像表示時間]
type = null;AfterImageTime
trigger1 = AnimElemTime(5) >= 1 && Time < 35
time = 2

[State 1000, 7]
type = Helper
triggerall = numhelper(1205) = 0
trigger1 = !time
helpertype = normal
name = "anten"
stateno = 6667
id = 1205
pos = 0, 0
postype = p1
ownpal = 1
facing = 1
pausemovetime = 999999
supermovetime = 999999

[State 0,dooon]
type = explod
triggerall = numexplod(1290) = 0
trigger1 = !time
trigger1 = facing = 1
anim = 1290
id = 1290
pos = -15,-60
postype = p1
ownpal = 1
shadow = 0,0,0
scale = .5,.5
pausemovetime = 999999
supermovetime = 999999
sprpriority = 8
removetime = 48
facing = 1
persistent=0
ignorhitpause = 1

[State 0,dooon]
type = explod
triggerall = numexplod(1290) = 0
trigger1 = !time
trigger1 = facing = -1
anim = 1290
id = 1290
pos = -15,-60
postype = p1
ownpal = 1
shadow = 0,0,0
scale = .5,.5
pausemovetime = 999999
supermovetime = 999999
sprpriority = 8
removetime = 48
facing = -1
persistent=0
ignorhitpause = 1

[State 2500, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 702, すり抜け]
type = null;PlayerPush
trigger1 = Time > 8
value = 0

[State 1200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;時飛ばしヘルパー
[Statedef 6667]
type = S
movetype = A
physics = S
anim = 29999
ctrl = 0

[State 181, EnvColor]
type = Bgpalfx
trigger1 = time = [0,5]
time = 1
invertall = 1
add = 205,205,205
;color = 0
ignorehitpause = 1

[State 181, EnvColor]
type = Bgpalfx
triggerall = !root,var(38)
trigger1 = time = [5,175]
time = 1
invertall = 1
add = 128,0,0
;color = 0
ignorehitpause = 1

[State 181, EnvColor]
type = Bgpalfx
trigger1 = time = [175,180]
time = 1
invertall = 1
add = 205,205,205
;color = 0
ignorehitpause = 1

[State 0,dooon]
type = explod
triggerall = numexplod(1258) = 0
trigger1 = root,var(38) = 1
trigger1 = time = 5
anim = 1258
id = 1258
pos = 0,0
postype = back
ownpal = 1
scale = 1,.25
pausemovetime = 999999
supermovetime = 999999
sprpriority = -8
removetime = -1
bindtime = -1
persistent=0
ignorhitpause = 1

[State 0,dooon]
type = explod
triggerall = numexplod(930) = 0
trigger1 = root,var(38) = 1
trigger1 = time = 5
anim = 930
id = 930
pos = 160,200
postype = back
ownpal = 1
scale = .8,.5
pausemovetime = 999999
supermovetime = 999999
sprpriority = -5
removetime = -1
bindtime = 1
persistent=0
ignorhitpause = 1

[State 6000, 0]
type = RemoveExplod
triggerall = root,var(38) = 1
trigger1 = time = 180
trigger2 = root,stateno != 6666
trigger2 = root,movetype = A
trigger3 = root,numtarget = 0
trigger3 = time > 20
ID = 930

[State 6000, 0]
type = RemoveExplod
triggerall = root,var(38) = 1
trigger1 = time = 180
trigger2 = root,stateno != 6666
trigger2 = root,movetype = A
trigger3 = root,numtarget = 0
trigger3 = time > 20
ID = 1258

[State 1540, 1]
type = destroyself
trigger1 = time = 180
trigger2 = root,stateno != 6666
trigger2 = root,movetype = A
trigger3 = root,numtarget = 0
trigger3 = time > 20
;---------------------------------------------------------------------------
;ダッシュ投げ 準備
[Statedef 1790]
type    = S
physics = N
movetype= I
anim = 1790
sprpriority = 1
ctrl = 0
velset = 0,0

[State 101, 3]
type = ChangeState
trigger1 = !animtime
value = 1700
ctrl = 0
;---------------------------------------------------------------------------
;ダッシュ投げEX 準備
[Statedef 1795]
type    = S
physics = N
movetype= I
anim = 1790
sprpriority = 1
ctrl = 0
velset = 0,0

[State 730, Flash]
type = palfx
trigger1 = time < 28
time = 1
add = 150 + ceil(sin(time / 2.0 * pi) * 150), 150 + ceil(sin(time / 2.0 * pi) * 150), 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 6, 15

[State 101, 3]
type = ChangeState
trigger1 = !animtime
value = 1750
ctrl = 0
;---------------------------------------------------------------------------
;ダッシュ投げ
[Statedef 1700]
type    = S
physics = N
movetype= A
anim = 1700
sprpriority = 1
ctrl = 0

[State 52, 3 s]
type = PlaySnd
trigger1 = animelem = 3
value = 22, 0
channel = 1

[State 52, 3 s]
type = PlaySnd
trigger1 = animelem = 7
value = 22, 1
channel = 1

[State 901, Throw]
type = null;attackdist
trigger1 = 1
value = 0

[State 1027, Sound]
type = PlaySnd
trigger1 = !time
value = 1700,0
channel = 0

[state 0, helper]
type = helper
trigger1 = time = 0
helpertype = normal
name = "stand"
stateno = 1705
id = 1001
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 0.833
size.yscale = 1

[State 900, 1]
type = HitDef
;triggerall = P2movetype != H
trigger1 = !time
attr = S, SA
hitflag = MAF;M-
guardflag = M
pausetime = 0, 0
guard.pausetime = 12, 12
priority = 3, Miss    
sparkno = -1
sparkxy = 10,-60
guard.sparkno = s840
p1facing = 1
p1stateno = 1702
p2facing = 1
p2stateno = 1760
guard.dist = 50
ground.velocity = -5
guard.velocity = -5
guard.slidetime = 11
guard.hittime = 11
getpower = ifelse(helper(8500),fvar(8)=0,70,70*1.1)
givepower = 70
air.fall = 0
fall = 0
fall.recover = 0
hitonce = 1
hitsound = s1, 9
guardsound = s1, 5
numhits = 0
envshake.time = 10
envshake.freq = 40
envshake.ampl = -4
id = 1700

[State 0, target]
type = null;targetstate
trigger1 = movehit
value = 1760
ignorhitpause = 1

[State 0, scale]
type = angledraw
trigger1 = 1
scale = 1.05,1

[State 100, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.fwd.x)

[State 100, 3] 
type = AssertSpecial
trigger1 = 1
flag = NoWalk          ;Prevent run from canceling into walk
flag2 = NoAutoTurn     ;Prevent from turning

[State 101, 3]
type = ChangeState
trigger1 = !animtime
trigger2 = moveguarded
value = 1701
ctrl = 0
;---------------------------------------------------------------------------
;ダッシュ投げSTOP
[Statedef 1701]
type    = S
physics = N
anim = 1701
sprpriority = 1
ctrl = 0
velset = 0,0

[State 101, 3]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;腹パン
[Statedef 1702]
type    = S
movetype= A
physics = N
;anim = 1702
velset = 0,0
sprpriority = 2

[State 0, anim]
type = changeanim
trigger1 = time = [0,12]
value = anim
elem = animelemno(0)

[State 101, 3]
type = Changeanim
trigger1 = time = 13
value = 1702

[State 0, explod]
type = explod
trigger1 = time = 8
anim = 1780
id = 1780
pos = -80,-70
postype = p1
scale = .5,.5
sprpriority = 4
pausemovetime = 999999
supermovetime = 999999
bindtime = 1
facing = 1

[State 4100, Pos]
type=posadd
trigger1= time = 12
x=p2dist x+20

[State 100, 2]
type = turn
trigger1= time = 12

[State 181, EnvColor]
type = Bgpalfx
trigger1 = time = [0,17]
time = 1
invertall = 1
add = 128,0,0
;color = 0
ignorehitpause = 1

[State 3001, Width]
type = Width
trigger1 = time = 12
edge = 100,0

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 17
value = 1,15
;channel = 0

[State 52, 3 s]
type = PlaySnd
trigger1 = Time = 12
value = 1, 14

[State 901,1]
type = targetBind
trigger1 = !var(49) && time = 12
pos = 70, 0;-80
postype = P1
time = 1

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = !var(31)
trigger1 = time = 17
value = ifelse(helper(8500),fvar(8)=0,-80,-80*1.1)

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = var(31)
trigger1 = time = 17
value = ifelse(helper(8500),fvar(8)=0,-110,-110*1.1)

[State 230, 2]
type = playerpush
trigger1 = 1
value = 0

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 101, 3]
type = ChangeState
trigger1 = !animtime
value = 1703
;---------------------------------------------------------------------------
;投げ成功
[Statedef 1703]
type    = S
movetype= A
physics = N
anim = 1703
velset = 0,0
sprpriority = 2

[State 810, 掴んだ相手のステート変更]
type = TargetState
trigger1 = !time
trigger1 = numtarget
value = 1761

[State 810, 掴んだ相手の向き変更]
type = TargetFacing
trigger1 = time = 0
value = -1
ID = 1700

[State 901,1]
type = targetBind
trigger1 = !time
pos = 70, -10
postype = P1
time = 1

[State 901,1]
type = null;targetBind
trigger1 = time = 38
pos = 110, -10
postype = P1
time = 1

[State 1027, Sound]
type = PlaySnd
;trigger1 = numhelper(1001)=1
trigger1 = time = 13
value = 1,18

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 12
value = 1703,0
channel = 0

[state 3000]
type = pause
trigger1 = time = 16
time = 16
movetime = 0

[State 10820, ]
type = Explod
trigger1 = numexplod(830) = 0
trigger1 = Time = 14
facing = 1                 ;キャラと同じ向きに表示（デフォ
postype = p1
pos = 100,-80
anim = 830
id = 830
sprpriority = 4
ownpal = 1
pausemovetime = 999999
supermovetime = 999999

[State 0, 円]
type = explod
trigger1 = time = 16
triggerall = numexplod(864) = 0 
anim = 864
id = 864
pos = 0,-80
postype = p2
ownpal = 1
shadow = 0,0,0
scale = .616,.85;.308,.425
pausemovetime = 999999
supermovetime = 999999
sprpriority = 3
persistent=0
ignorhitpause = 1

[State 3001, Width]
type = Width
trigger1 = time = 0
edge = 100,0

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = !var(31)
trigger1 = time = 16
value = ifelse(helper(8500),fvar(8)=0,-40,-40*1.1)

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = var(31)
trigger1 = time = 16
value = ifelse(helper(8500),fvar(8)=0,-60,-60*1.1)

[State 215]
type = HitAdd
trigger1 = Time = 16
value = 1

[State 0, shake]
type = envshake
trigger1 = time = 16
time = 15
freq = 90
ampl = -7
phase = 0
persistent = 0
ignorhitpause = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 0

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, pos]
type = null;playsnd
trigger1 = AnimTime = 0
value = 810,1
channel = 0

[State 810, ステート変更]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;ダッシュスタンド
[Statedef 1705]
type = S
movetype = A
physics = N
ctrl = 0
anim = 1705
sprpriority = 1

[State 0, anim]
type = changeanim
trigger1 = root,var(39)
trigger1 = root,movecontact
value = anim
elem = animelemno(0)

[State 0, var]
trigger1 != root,movecontact
type = parentvarset
trigger1 = 1
var(39) = 1

[State 730, Flash]
type = palfx
trigger1 = root,stateno = 1750
trigger1 = time < 28
time = 1
add = 150 + ceil(sin(time / 2.0 * pi) * 150), 150 + ceil(sin(time / 2.0 * pi) * 150), 0

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 30,-10

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 230, 2];プッツン時スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno = 3090
trigger3 = root,stateno != [1700, 1753]
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1702
value = 1706

[State 230, 2]
type = changestate
trigger1 = animtime = 0
trigger2 = time = 32
trigger3 = root,stateno = 1701
value = 1102
;---------------------------------------------------------------------------
;腹パンスタンド
[Statedef 1706]
type = S
movetype = A
physics = N
ctrl = 0
anim = 1706
sprpriority = 1

[State 100, 2]
type = turn
trigger1= time = 12

[State 0, explod]
type = explod
trigger1 = time = 17
anim = 921
id = 921
pos = 45,-75
postype = p1
scale = 1,1
sprpriority = 3
;pausemovetime = 999999
;supermovetime = 999999
bindtime = -1

[state 0, helper]
type = helper
trigger1= time = 12
helpertype = normal
name = "hand"
stateno = 1770
id = 1770
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
;pausemovetime = 50
;supermovetime = 50
size.xscale = 0.833
size.yscale = 1

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 30,-10

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = root,stateno = 1703
value = 1707

[State 230, 2]
type = changestate
trigger1 = animtime = 0
trigger2 = root,stateno != 1702
value = 1102
;---------------------------------------------------------------------------
;ダッシュ投げEX
[Statedef 1750]
type    = S
physics = N
movetype= A
anim = 1700
sprpriority = 1
ctrl = 0
poweradd = -500

[State 730, Flash]
type = palfx
trigger1 = time < 28
time = 1
add = 150 + ceil(sin(time / 2.0 * pi) * 150), 150 + ceil(sin(time / 2.0 * pi) * 150), 0

[State 901, Throw]
type = null;attackdist
trigger1 = 1
value = 0

[State 1027, Sound]
type = PlaySnd
trigger1 = !time
value = 1700,0
channel = 0

[state 0, helper]
type = helper
trigger1 = time = 0
helpertype = normal
name = "stand"
stateno = 1705
id = 1001
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 0.833
size.yscale = 1

[State 900, 1]
type = HitDef
;triggerall = P2movetype != H
trigger1 = !time
attr = S, SA
hitflag = MAF;M-
;guardflag = M
pausetime = 0, 0
priority = 3, Miss    
sparkno = -1
p1facing = 1
p1stateno = 1702
p2facing = 1
p2stateno = 1760
guard.dist = 0
getpower = ifelse(helper(8500),fvar(8)=0,0,0*1.1)
givepower = 70
air.fall = 0
fall = 0
fall.recover = 0
hitonce = 1
hitsound = s1, 9
guardsound = s1, 5
numhits = 0
envshake.time = 10
envshake.freq = 40
envshake.ampl = -4
id = 1700

[State 0, target]
type = null;targetstate
trigger1 = movehit
value = 1760
ignorhitpause = 1

[State 0, scale]
type = angledraw
trigger1 = 1
scale = 1.05,1

[State 100, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.fwd.x)*1.5

[State 100, 3] 
type = AssertSpecial
trigger1 = 1
flag = NoWalk          ;Prevent run from canceling into walk
flag2 = NoAutoTurn     ;Prevent from turning

[State 101, 3]
type = ChangeState
trigger1 = !animtime
value = 1701
ctrl = 0
;---------------------------------------------------------------------------
;手
[Statedef 1770]
type    = S
movetype= A
physics = N
anim = 1770
velset = 0,0
sprpriority = 6

[State 0, btr]
type = bindtoparent
trigger1 = 1
pos = 0,0

[State 230, 2]
type = destroyself
trigger1 = parent,stateno != 1706
;---------------------------------------------------------------------------
;投げスタンド
[Statedef 1707]
type = S
movetype = A
physics = N
ctrl = 0
anim = 1707
sprpriority = 1

[State 100, 2]
type = turn
trigger1 = time = 0
trigger1 = facing != root,facing

[State 0, anim]
type = changeanim
trigger1 = root,var(39)
trigger1 = root,movecontact
value = anim
elem = animelemno(0)

[State 0, var]
trigger1 != root,movecontact
type = parentvarset
trigger1 = 1
var(39) = 1

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 30,-10

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, 円]
type = explod
trigger1 = animtime = -1
anim = 866
id = 867
pos = 0,-80
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .508,.645
pausemovetime = 999999
supermovetime = 999999

[State 230, 2];スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno = [200,220]
trigger3 = root,stateno = [400,420]
trigger4 = root,stateno = [1000,1050]
trigger5 = root,stateno = [1100,1150]
trigger6 = root,stateno = [1200,1250]
trigger7 = root,stateno = [1400,1460]
ignorehitpause = 1

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 230, 2]
type = destroyself
trigger1 = root,stateno != 1703

[State 230, 2]
type = changestate
trigger1 = animtime = 0
value = 1102
;---------------------------------------------------------------------------
;相手側
[Statedef 1760]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 3

[State 0, state]
type = offset
trigger1 = time > 12
y = -80

[State 100, 2]
type = turn
trigger1= !time

[State 2500, ScreenBound]
type = screenbound
trigger1 = 1
value = 1
movecamera = 30,10

[State 1060, 2]
type = changeanim2
trigger1 = time = 0
value = 1760

[state 3000]
type = nothitby
trigger1 = 1
value = SCA

[State 820, 4]
type = SelfState;キャラのコントロールを相手に返します。
trigger1 = time > 200
value = 5110
;---------------------------------------------------------------------------
;殴られる相手側
[Statedef 1761]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 3

[State 2500, ScreenBound]
type = screenbound
trigger1 = 1
value = 1
movecamera = 30,10

[State 1060, 2]
type = changeanim2
trigger1 = time = 0
value = 1761

[State 1060, 2]
type = changeanim
trigger1 = SelfAnimExist(5052)
trigger1 = time = 13
value = 5052

[State 1061, 2]
type = Velset
trigger1 = time = [13,18]
y = -1
x = -10

[State 1061, 2]
type = Veladd
trigger1 = time >= 18
y = .2

[State 1061, 2]
type = Velset
trigger1 = time > 36
trigger1 = Pos Y >= 0
y = 0
x = 0

[state 3000]
type = nothitby
trigger1 = 1
value = SCA

[State 810, ステート変更]
type = ChangeState
trigger1 = time > 16
trigger1 = Pos Y >= -1
value = 10427

[State 820, 4]
type = SelfState;キャラのコントロールを相手に返します。
trigger1 = time > 16
trigger1 = Pos Y >= 0
value = 5110
;===========================================================================
; 超必殺技
;===========================================================================
;---------------------------------------------------------------------------
; 最初のM.U.G.E.Nから存在するカンフーマンの超必殺技。
; 超必なので攻撃を当ててもゲージを増やさないようにする事に気を付けるだけで、
; 後は結構簡単な処理にまとめられてる。
; 超必時の暗転用の処理（SuperPause）にも刮目せよ！m9っ｀Д´)
;---------------------------------------------------------------------------
;えぴたふっ！
[Statedef 3000]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 3000
ctrl = 0
sprpriority = 2

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = time = 0
value = -1000

[state 0, helper]
type = helper
;trigger1 = !numhelper(1001) || helper(1001),stateno = 1102
trigger1 = time = 1
helpertype = normal
name = "stand"
stateno = 3040
id = 1001
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
pausemovetime = 50
supermovetime = 50
size.xscale = 0.833
size.yscale = 1

[State 0, ]
type = PlaySnd
trigger1 = animelem = 1
value = 4, 0

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 8
value = 3000,0
channel = 0

[State 3000, 残像]
type = AfterImage
trigger1 = AnimElem = 2, 1
time = 8
length = 5
FrameGap = 3
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = 1,1,1
trans = add1

[State 3000, 残像表示時間]
type = null;AfterImageTime
trigger1 = AnimElemTime(2) >= 1 && Time < 100
time = 2

[State 30]
type = null;NotHitBy  
trigger1 = numhelper(3003) = 1
value = SCA

[State 30]
type = HitBy  ;特定の攻撃以外食らわない
trigger1 = time = 0
value = SCA,NT,ST,HT
time = 60
;立ち、屈み、空中、通常なげ、必殺なげ、超必殺なげ

[State 4200,01]
type = Pause
trigger1 = Time = 0
moveTime = 50
Time = 50
ctrl = 0
anim = -1
;darken = 0

[State 4200,02]
type = BGPalfx
trigger1 = Time = 0
mul= 66,66,66
time = 50
ignorehitpause = 1

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "cutin"
;stateno = ifelse(facing = 1,23101,23102)
stateno = 23101
id = 3101
pos = -20,-40
postype = back
pausemovetime = 999999
supermovetime = 999999
size.xscale = .65
size.yscale = .65
facing = 1

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "line"
;stateno = ifelse(facing = 1,23101,23102)
stateno = 23105
id = 3105
pos = 350,-190;15
postype = right;left
pausemovetime = 999999
supermovetime = 999999
size.xscale = 0.5
size.yscale = 0.5
facing = 1

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "lineB"
;stateno = ifelse(facing = 1,23101,23102)
stateno = 23106
id = 3106
pos = -350,15;-190
postype = left;right
pausemovetime = 999999
supermovetime = 999999
size.xscale = 0.5
size.yscale = 0.5
facing = 1

[state 0, helper]
type = helper
trigger1 = time = 1
helpertype = normal
name = "count"
stateno = 3080
id = 3080
pos = 0,-999
postype = p1
pausemovetime = 50
supermovetime = 50
ownpal = 1
facing = 1
size.xscale = 1
size.yscale = 1

[State 3000, AI用];⑨
type = varset
trigger1 = var(59)>0
trigger1 = time = 1
var(55) = 1

[State 3000, ステート変更]
type = Ctrlset
trigger1 = time = 50
value = 1

[State 230, 2]
type = changestate
trigger1 = roundstate = 3
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;エピタフスタンド
[Statedef 3040]
type = S
movetype = I
physics = N
ctrl = 0
anim = 3040
sprpriority = 1

[State 100, 2]
type = turn
trigger1 = time = 0
trigger1 = facing != root,facing

[State 0, anim]
type = changeanim
trigger1 = root,var(39)
trigger1 = root,movecontact
value = anim
elem = animelemno(0)

[State 0, var]
trigger1 != root,movecontact
type = parentvarset
trigger1 = 1
var(39) = 1

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = -2,0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, 円]
type = explod
trigger1 = animtime = -1
anim = 866
id = 867
pos = 0,-80
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .508,.645
pausemovetime = 999999
supermovetime = 999999

[State 230, 2];スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno != 200
trigger2 = root,stateno = [200,220]
trigger3 = root,stateno = [400,420]
trigger4 = root,stateno = [1000,1050]
trigger5 = root,stateno = [1100,1150]
trigger6 = root,stateno = [1200,1250]
ignorehitpause = 1

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[state 0, helper]
type = helper
trigger1 = time = 0
helpertype = normal
name = "hand"
stateno = 3041
id = 3260
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
pausemovetime = 50
supermovetime = 50
size.xscale = 0.833
size.yscale = 1

[State 230, 2]
type = null;destroyself
trigger1 = root,stateno != 3000

[State 230, 2]
type = changestate
trigger1 = !animtime
value = 1102
;---------------------------------------------------------------------------
;手
[Statedef 3041]
type    = S
movetype= A
physics = N
anim = 3041
velset = 0,0
sprpriority = 4

[State 0, btr]
type = bindtoparent
trigger1 = 1
pos = 0,0

[State 230, 2]
type = destroyself
trigger1 = !animtime
trigger2 = numhelper(1001) = 0
;---------------------------------------------------------------------------
;エピタフカウント
[Statedef 3080]
type    = S
movetype= I
physics = S
velset = 0,0
anim = 3080
ctrl = 0
sprpriority = 6

[State 191, 特殊効果]
type = AssertSpecial
trigger1 = root,stateno = [3305,3307]
trigger2 = root,stateno = 3200
trigger3 = root,stateno = [3210,3220]
trigger4 = root,stateno = 3400
flag = invisible

[State 0, scale]
type = angledraw
trigger1 = time <= 10
scale = 1-time*.05,1-time*.05

[State 0, scale]
type = angledraw
trigger1 = time > 10
scale = .5,.5

[State 0, scale]
type = null;angledraw
trigger1 = time >= 640
scale = 0.5+(time-640)*0.05,0.5+(time-640)*0.05

[State 1010, BGcolor]
type = PalFX
trigger1 = !time
time = 9999
add = 248,112,224
mul = 256,256,256
sinadd = 224,80,176,40
invertall = 0
color = 256

[State 1065, 3]
type = bindtoparent
trigger1 = root,statetype != C
pos = -20,-100
time = 1
ignorehitpause = 1

[State 1065, 3]
type = bindtoparent
trigger1 = root,statetype = C
pos = -20,-50
time = 1
ignorehitpause = 1

[State 0, var]
type = parentvarset
;trigger1 = root,var(17) != 0
trigger1 = !root,var(26)
var(26) = 1

[State 0, var]
type = parentvarset
trigger1 = Time > 50
trigger1 = root,var(17) = 0
;trigger1 = Time = 650
var(26) = 2

[State 191, 特殊効果]
type = AssertSpecial
trigger1 = !root,var(37)
trigger2 = root,roundstate = 3
flag = invisible

[State 215　ヘルパー消滅]
type = DestroySelf
;trigger1 = Time = 650
trigger1 = Time > 50
trigger1 = root,var(17) = 0
trigger2 = root,roundstate = 3
;trigger3 = root,stateno = 3305
ignorhitpause = 1
;---------------------------------------------------------------------------
;暗転ヘルパー
[Statedef 3580]
type = S
movetype = A
physics = S
anim = 29999
ctrl = 0

[State 3002,1]
type = BGPalfx
triggerall = 1
trigger1 = root,stateno != 3502 && root,stateno != 13502
trigger2 = root,stateno = 3502 || root,stateno != 13502
trigger2 = time > 20
add = var(4),var(4),var(4)
sinadd = 10, 10, 10
time = 1
supermove = 1
ignorehitpause = 1

[State 1540, 1]
type = varadd
trigger1 = time <= 10
var(4) = -8
supermove = 1
persistent = 1

[State 1540, 1]
type = changestate
triggerall = time > 10
trigger1 = root,stateno != 3500 && root,stateno != 13500
trigger2 = root,movetype = H
value = 3581

[State 1540, 1]
type = changestate
triggerall = time > 10
trigger1 = root,stateno != 3500 && root,stateno != 13500
trigger2 = root,movetype = H
value = 3581
;---------------------------------------------------------------------------
[Statedef 3581]
type = A
movetype = I
physics = N
anim = 29999
ctrl = 0
sprpriority = 2

[State 3002,1]
type = BGPalfx
trigger1 = 1
add = var(4),var(4),var(4)
sinadd = 10, 10, 10
time = 1
supermove = 1
ignorehitpause = 1

[State 1540, 1]
type = varadd
trigger1 = time >= 0
var(4) = 7
supermove = 1
persistent = 1

[State 1540, 1]
type = destroyself
trigger1 = var(4) >= -7
;---------------------------------------------------------------------------
;えぴたふ終わり
[Statedef 3090]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 3090
ctrl = 0
sprpriority = 2

[State 181, 無敵]
type = NotHitBy
trigger1 = time = [0,120]
value = SCA
ignorhitpause = 1

[state 0, helper]
type = helper
;trigger1 = !numhelper(1001) || helper(1001),stateno = 1102
trigger1 = time = 1
helpertype = normal
name = "stand"
stateno = 3095
id = 1001
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
pausemovetime = 120
supermovetime = 120
size.xscale = 0.833
size.yscale = 1

[State 0, ]
type = PlaySnd
trigger1 = animelem = 1
value = 1, 30

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 0
value = 3090,0
channel = 0

[State 4200,01]
type = Pause
trigger1 = Time = 0
moveTime = 120
Time = 120
ctrl = 0
anim = -1
;darken = 0

[State 4200,02]
type = BGPalfx
trigger1 = Time = 0
mul= 99,99,99
time = 120
ignorehitpause = 1

[State 3000, AI用];⑨
type = varset
trigger1 = var(59)>0
trigger1 = time = 1
var(55) = 0

[State 0, var]
type = varset
trigger1 = 1
var(26) = 0

[State 230, 2]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;エピタフ終了時KC
[Statedef 3095]
type    = S
movetype= I
physics = S
ctrl = 0
anim = 3095
sprpriority = 3
facep2 = 1

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 30,0

[State 0, 円]
type = explod
trigger1 = !time
anim = 865
id = 867
pos = 0,-85
postype = p1
sprpriority = 4
ownpal = 1
shadow = 0,0,0
scale = .558,.715
pausemovetime = 999999
supermovetime = 999999

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = time = 0
trigger1 = facing != parent,facing

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 0, 円];腕
type = null;explod
trigger1 = time = 6
anim = 9198
id = 9198
pos = 0,0
postype = p1
sprpriority = 3
removetime = -1
ownpal = 1
shadow = 0,0,0
scale = .833,1
;pausemovetime = 999999
;supermovetime = 999999
persistent = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 6, 5

[State -2,***]
type = null;sprpriority
trigger1 = 1
value = 0
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 230, 2];スタンド消去
type = destroyself
trigger1 = root,stateno = 700
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = !animtime
value = 1102
;---------------------------------------------------------------------------
;拉致
[Statedef 3200]
type = S
ctrl = 0
anim = 3200
velset = 0,0
poweradd = -2000

[State 3000, 4]
type = Pause
trigger1 = !time
time = 50
movetime = 50
ignorehitpause = 1

[State 1000, 7]
type = Helper
triggerall = numhelper(3580) = 0
trigger1 = !time
helpertype = normal
name = "anten"
stateno = 3580
id = 3580
pos = 0, 0
postype = p1
ownpal = 1
facing = 1
pausemovetime = 999999
supermovetime = 999999

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 3200, 0
channel = 0
persistent = 0

[State 181, EnvColor]
type = Bgpalfx
trigger1 = time = [22,32]
time = 1
invertall = 1
add = 128,0,0
;color = 0
ignorehitpause = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 22
value = 1, 16

[State 1000, 速度]
type = velset
trigger1 = time = [0,34]
x = 1

[State 1000, 速度]
type = velset
trigger1 = time > 34
x = 0

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = null;AssertSpecial
trigger1 = numhelper(192)
trigger1 = time <= 114
trigger2 = time < 50
flag = invisible

[State 191, ステート変更];アニメーションが終われば「通常立ち」のステートに変更する
type = ChangeState
triggerall = var(59)<=0
trigger1 = time > 200
trigger2 = time > 95
trigger2 = command != "hold_x"
trigger2 = command != "hold_y"
trigger2 = command != "hold_z"
trigger2 = command != "hold_a"
value = 3201

[State 191, ステート変更];AI用⑨
type = ChangeState
triggerall = var(59)>0 && roundstate = 2
triggerall = enemynear,stateType != A
triggerall = enemynear,stateType != L
triggerall = enemynear,stateType = S
trigger1 = time > 200
trigger2 = time > 95
trigger2 = p2stateno = 52
trigger3 = time > 95
trigger3 = var(57) = 0 
trigger3 = enemynear,ctrl = 0
trigger4 = time > 95
trigger4 = enemynear,moveType = A
trigger4 = enemynear,facing = -1
value = 3201
;---------------------------------------------------------------------------
;拉致るぜ
[Statedef 3201]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 3201
sprpriority = 2

[State 810, HitBy]
type = NotHitBy
trigger1 = var(31)
value = SCA

[State 4100, Pos]
type=posadd
trigger1= time = 0
x=p2dist x+20

[State 5210, 2]
type = Turn
trigger1 = Time = 0
;trigger1 = p2dist X < -20

[State 181, EnvColor]
type = Bgpalfx
trigger1 = time = [0,10]
time = 1
invertall = 1
add = 128,0,0
;color = 0
ignorehitpause = 1

[State 0, pos]
type = null;playsnd
trigger1 = time = 1
value = 800,0
channel = 0

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 3
value = 0,5

[State 900, 1]
type = HitDef
;triggerall = P2movetype != H
triggerall = P2bodydist X = [-const(size.ground.front),60]
trigger1 = AnimElem = 3
attr = S, HA
hitflag = M
priority = 3, hit   
sparkno = -1
p1facing = 1
p1stateno = 3210
p2facing = 1
p2stateno = 3230
guard.dist = 0
getpower = ifelse(helper(8500),fvar(8)=0,80,80*1.1)
givepower = 40
air.fall = 1
fall = 1
fall.recover = 0
hitonce = 1
numhits = 0
envshake.time = 10
envshake.freq = 40
envshake.ampl = -4
id = 3200

[state 0, helper]
type = helper
trigger1 = time = 3
helpertype = normal
name = "stand"
stateno = 3205
id = 1001
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 0.833
size.yscale = 1

[State 10000, Assert]
type = AssertSpecial
trigger1 = numtarget(3200)
flag = nomusic
ignorehitpause = 1

[State 800, ステート変更]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;掴みスタンド
[Statedef 3205]
type = S
movetype = A
physics = N
ctrl = 0
anim = 3205
sprpriority = 1

[State 0, anim]
type = changeanim
trigger1 = root,var(39)
trigger1 = root,movecontact
value = anim
elem = animelemno(0)

[State 0, var]
trigger1 != root,movecontact
type = parentvarset
trigger1 = 1
var(39) = 1

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 30,-10

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, 円]
type = explod
trigger1 = animtime = -1
anim = 866
id = 867
pos = 0,-80
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .508,.645
pausemovetime = 999999
supermovetime = 999999

[State 230, 2];スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno != 200
trigger2 = root,stateno = [200,220]
trigger3 = root,stateno = [400,420]
trigger4 = root,stateno = [1000,1050]
trigger5 = root,stateno = [1100,1150]
trigger6 = root,stateno = [1200,1250]
ignorehitpause = 1

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 230, 2]
type = destroyself
trigger1 = root,stateno != [3200,3210]

[State 230, 2]
type = changestate
trigger1 = root,stateno = 3210
value = 3206

[State 230, 2]
type = changestate
trigger1 = animtime = 0
value = 1102
;---------------------------------------------------------------------------
;拉致るスタンド
[Statedef 3206]
type = S
movetype = A
physics = N
ctrl = 0
anim = 3206
sprpriority = 1

[State 100, 2]
type = turn
trigger1 = time = 0
trigger1 = facing != root,facing

[State 0, anim]
type = changeanim
trigger1 = root,var(39)
trigger1 = root,movecontact
value = anim
elem = animelemno(0)

[State 0, var]
trigger1 != root,movecontact
type = parentvarset
trigger1 = 1
var(39) = 1

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 30,-10

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, 円]
type = explod
trigger1 = animtime = -1
anim = 866
id = 867
pos = 0,-80
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .508,.645
pausemovetime = 999999
supermovetime = 999999

[State 230, 2];スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno != 200
trigger2 = root,stateno = [200,220]
trigger3 = root,stateno = [400,420]
trigger4 = root,stateno = [1000,1050]
trigger5 = root,stateno = [1100,1150]
trigger6 = root,stateno = [1200,1250]
ignorehitpause = 1

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[state 0, helper]
type = helper
trigger1 = time = 20
helpertype = normal
name = "hand"
stateno = 3260
id = 3260
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 0.833
size.yscale = 1

[State 230, 2]
type = destroyself
trigger1 = root,stateno != [3200,3210]

[State 230, 2]
type = destroyself
trigger1 = time = 40
;---------------------------------------------------------------------------
;手
[Statedef 3260]
type    = S
movetype= A
physics = N
anim = 3203
velset = 0,0
sprpriority = 4

[State 0, btr]
type = bindtoparent
trigger1 = 1
pos = 0,0

[State 230, 2]
type = destroyself
trigger1 = time = 20
trigger2 = numhelper(1001) = 0
;---------------------------------------------------------------------------
;拉致実行
[Statedef 3210]
type    = S
movetype= A
physics = N
anim = 3210
velset = 0,0
sprpriority = 2

[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = nomusic
ignorehitpause = 1

[State 901,1]
type = targetBind
trigger1 = time = [0,20]
pos = 75, 0
postype = P1
time = 1

[State 901,1]
type = targetBind
trigger1 = time = [20,110]
pos = 20, 0
postype = P1
time = 1

[State 901,1]
type = targetBind
trigger1 = time = [110,180]
pos = 100, -140
postype = P1
time = 1

[State 1027, Sound]
type = null;PlaySnd
trigger1 = numhelper(1001)=0
trigger1 = time = 38
value = 300,1

[State 1027, Sound]
type = null;PlaySnd
trigger1 = numhelper(1001)=1
trigger1 = time = 35
value = 1,18

[State 0, pos]
type = null;playsnd
trigger1 = time = 3
value = 810,0
channel = 0

[state 3000]
type = pause
trigger1 = time = 0
time = 15
movetime = 0

[State 20, 1]
type = VelSet
trigger1 = time = [20,24]
x = -8

[State 20, 1]
type = VelSet
trigger1 = time = 24
x = -4

[State 20, 1]
type = Veladd
trigger1 = time = [24,40]
x = .2

[State 20, 1]
type = VelSet
trigger1 = time >= 40
x = 0
[State 0, 円]
type = null;explod
trigger1 = time = 38
triggerall = numexplod(864) = 0 
anim = 864
id = 864
pos = 0,-80
postype = p2
ownpal = 1
shadow = 0,0,0
scale = .616,.85;.308,.425
pausemovetime = 999999
supermovetime = 999999
sprpriority = 3
persistent=0
ignorhitpause = 1

[State 3001, Width]
type = null;Width
trigger1 = time = 0
edge = 100,0

[State 901, Hurt]
type = null;TargetLifeAdd
trigger1 = time = 38
value = -120

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 0
value = 1,9
;channel = 0

[State 230, 2]
type = playerpush
trigger1 = 1
value = 0

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3002,1]
type = AllPalfx
trigger1 = time = [18,200]
add = time*-4,time*-4,time*-4
;sinadd = 10, 10, 10
time = 1
supermove = 1
ignorehitpause = 1

[State 1027, Sound]
type = null;PlaySnd
trigger1 = time = 60
value = 1,15

[State 230, 2]
type = assertspecial
trigger1 = time >= 40
flag = invisible

[State 20, 1]
type = VarSet
trigger1= power >= 1000
trigger1= time = [18,100]
trigger1= command = "c";"kill"
var(24) = 1

[State 810, ステート変更]
type = ChangeState
trigger1= var(24) = 1
trigger1= power >= 1000
trigger1= time = 100
value = 3400

[State 4100, Pos];輪切りにしようぜ
type = null;varset
trigger1= time = [18,100]
trigger1= command = "c";"kill"
var(24) = 1

[state 0, helper]
type = helper
trigger1= var(24) = 0
trigger1 = time = [60,200]
trigger1 = !numhelper(3290)
helpertype = normal
name = "blood"
stateno = 3290
id = 3290
pos = 0,-40
postype = p2
ownpal = 1
keyctrl = 0
pausemovetime = 0
supermovetime = 0
size.xscale = 1
size.yscale = 1

[State 810, ステート変更]
type = ChangeState
trigger1 = time > 200
value = 3220
;---------------------------------------------------------------------------
;お披露目
[Statedef 3220]
type    = S
movetype= A
physics = N
anim = 3220
velset = 0,0
sprpriority = 2

[State 181, EnvColor]
type = bgpalfx
trigger1 = time = [0,20]
time = 1
invertall = 1
add = 128,0,0
;color = 0
ignorehitpause = 1

[State 10000, Assert]
type = AssertSpecial
trigger1 = time = [0,20]
flag = nomusic
ignorehitpause = 1

[State 10000, Assert]
type = pause
trigger1 = time = [0,20]
ignorehitpause = 1

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 0
value = 3,6

[State 1027, Sound]
type = null;PlaySnd
trigger1 = time = 20
value = 3200,0
channel = 0

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = !var(31)
trigger1 = time = 0
value = ifelse(life < 301,-480*1.1,-480)

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = var(31)
trigger1 = time = 0
value = ifelse(life < 301,-720*1.1,-720)

[State 901,1]
type = targetBind
trigger1 = time < 100
pos = 100, -140
postype = P1
time = 1

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[state 0, helper]
type = helper
trigger1 = time = 0
helpertype = normal
name = "gate"
stateno = 3250
id = 3250
pos = 100,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = .9
size.yscale = .9

[state 0, helper]
type = null;helper
trigger1 = time < 100
trigger1 = !numhelper(3290)
helpertype = normal
name = "blood"
stateno = 3290
id = 3290
pos = 0,-40
postype = p2
ownpal = 1
keyctrl = 0
pausemovetime = 0
supermovetime = 0
size.xscale = 1
size.yscale = 1

[State 810, ステート変更]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;柵
[Statedef 3250]
type    = S
movetype= I
physics = N
anim = 3250
velset = 0,0
sprpriority = 0

[State 0, btr]
type = bindtoparent
trigger1 = !time
pos = 100,0

[State 0, 杭]
type = explod
trigger1 = !time
anim = 3251
id = 3251
pos = 0,0
postype = p1
sprpriority = 4
ownpal = 1
shadow = 0,0,0
removetime = -1
scale = .9,.9

[State 6000, 0]
type = RemoveExplod
triggerall = !root,WinKo
trigger1 = time = 100
ID = 3251

[State 0, scale]
type = Trans
triggerall = !root,WinKo
trigger1 = time >= 100
trans = addalpha
alpha = 256+(time-100)*-36,256

[state 0, helper]
type = helper
trigger1 = 1;time > 100 || root,winko
trigger1 = !numhelper(3290)
helpertype = normal
name = "blood"
stateno = 3290
id = 3290
pos = 0,-185
postype = p1
ownpal = 1
keyctrl = 0
pausemovetime = 0
supermovetime = 0
size.xscale = 1
size.yscale = 1

[State 230, 2]
type = destroyself
trigger1 = !root,WinKo
trigger1 = time = 120
trigger2 = root,stateno = 3400
;---------------------------------------------------------------------------
;拉致される相手側
[Statedef 3230]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[State 2500, ScreenBound]
type = screenbound
trigger1 = 1
value = 1
movecamera = 30,10

[State 1060, 2]
type = changeanim2
trigger1 = time = 0
value = 3230

[State 1060, 2]
type = changeanim2
trigger1 = time = 200
value = 3231

[State 1060, 2]
type = changeanim
trigger1 = SelfAnimExist(5052)
trigger1 = time = 42
value = 5052

[state 3000]
type = nothitby
trigger1 = 1
value = SCA

[State 1027, Sound]
type = null;PlaySnd
trigger1 = time = 200
value = 11,0

[State 230, 2]
type = assertspecial
trigger1 = time = [40,200]
flag = invisible

[State 1010, BGcolor]
type = PalFX
trigger1 = time = [200,300]
time = 1
add = 96,12,0
mul = 45,32,32
;sinadd = 224,80,176,40
invertall = 0
color = 256

[State 820, 4]
type = ChangeState
trigger1 = Lose
trigger1 = time = 300
value = 5150

[State 820, 4]
type = SelfState;キャラのコントロールを相手に返します。
trigger1 = !Lose
trigger1 = time = 300
value = 5050
;---------------------------------------------------------------------------
;血液
[Statedef 3290]
type    = S
movetype= I
physics = N
anim = 3290
velset = 0,0
sprpriority = 4

[State 200, ステート変更]
type = posset
trigger1 = !time
y = -180

[State 1000, ステート変更]
type = destroyself
trigger1= root,var(24) != 0

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 3291
;---------------------------------------------------------------------------
;血液2
[Statedef 3291]
type    = S
movetype= I
physics = N
anim = 3291
velset = 0,0
sprpriority = 4

[State 230, 2]
type = veladd
trigger1 = 1
y = 1

[State 1000, ステート変更]
type = destroyself
trigger1= root,var(24) != 0

[State 1000, ステート変更]
type = ChangeState
trigger1 = pos y > 0
value = 3292
;---------------------------------------------------------------------------
;血液3
[Statedef 3292]
type    = S
movetype= I
physics = N
anim = 3292
velset = 0,0
sprpriority = 4

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 0
value = 1,20

[State 1000, ステート変更]
type = destroyself
trigger1 = AnimTime = 0
;---------------------------------------------------------------------------
;美術品にしてやるよ
[Statedef 3400]
type    = S
movetype= A
physics = N
anim = 3400
velset = 0,0
sprpriority = 2
poweradd = -1000

[State 0, state]
type = posset
trigger1 = time = 0
x = 0

[State 220, 3]
type = TargetState
triggerall = !time
trigger1 = numtarget
value = 3430
ignorehitpause = 1

[State 0, 調理台]
type = explod
trigger1 = time = 0
anim = 3431
id = 3431
pos = 0,0
postype = p1
sprpriority = 0
removetime = 300
ownpal = 1
shadow = 0,0,0
scale = 1.0,1.0
pausemovetime = 999999
supermovetime = 999999

[State 0, 美術品]
type = explod
;trigger1 = !var(32)
trigger1 = time = 300
anim = ifelse(var(32),3440,3430);3430
id = 3430
pos = 80,0
postype = p1
sprpriority = 0
removetime = -1
ownpal = 1
shadow = 0,0,0
scale = 1.0,1.0
pausemovetime = 999999
supermovetime = 999999

[State 10000, Assert]
type = AssertSpecial
trigger1 = time = [0,320]
flag = nomusic
ignorehitpause = 1

[State 10000, Assert]
type = pause
trigger1 = time = [300,320]
ignorehitpause = 1

[State 1027, Sound]
type = null;PlaySnd
trigger1 = time = 300
value = 3,6

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 10
value = 3400,0
channel = 0

[State 901,1]
type = targetBind
trigger1 = time = [0,300]
pos = 0, -60
postype = P1
time = 1

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3002,1]
type = AllPalfx
trigger1 = time = [0,40]
trigger2 = time = [46,60]
trigger3 = time = [66,80]
trigger4 = time = [86,300]
add = -255,-255,-255
time = 1
supermove = 1
ignorehitpause = 1

[State 3002,1]
type = AllPalfx
trigger1 = time = [41,45]
trigger2 = time = [61,65]
trigger3 = time = [81,85]
add = 0,0,0
time = 1
supermove = 1
ignorehitpause = 1

[State 3002,1]
type = AllPalfx
trigger1 = time > 300
add = 0,0,0
time = 1
supermove = 1
ignorehitpause = 1

[State 181, EnvColor]
type = bgpalfx
trigger1 = time = [300,320]
time = 1
invertall = 1
add = 128,0,0
;color = 0
ignorehitpause = 1

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 20
trigger2 = time = 24
trigger3 = time = 28
value = 1,24

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 40
trigger2 = time = 70
trigger3 = time = 100
value = 1,25

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 150
trigger2 = time = 200
value = 1,26

[State 230, 2]
type = assertspecial
trigger1 = winko
trigger1 = time > 200
flag = invisible

[State 810, ステート変更]
type = ChangeState
trigger1 = winko
trigger1 = !animtime
value = 3401

[State 810, ステート変更]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;そして誰もいなくなった
[Statedef 3401]
type    = S
movetype= I
physics = S
anim = 36400
velset = 0,0

[State 183, win]
type=changestate
trigger1= prevstateno=3400 && time=100
value=180
ctrl=1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = invisible
;---------------------------------------------------------------------------
;輪切られる相手側
[Statedef 3430]
type    = S
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[State 0, state]
type = posset
trigger1 = time = 0
y = 0

[State 2500, ScreenBound]
type = null;screenbound
trigger1 = 1
value = 1
movecamera = 30,10

[State 1060, 2]
type = changeanim2
trigger1 = time = 0
value = 3435

[State 1060, 2]
type = null;changeanim
trigger1 = SelfAnimExist(5052)
trigger1 = time = 42
value = 5052

[State 230, 2]
type = assertspecial
trigger1 = time > 300
flag = invisible

[state 3000]
type = nothitby
trigger1 = 1
value = SCA

[State 1010, BGcolor]
type = PalFX
trigger1 = time = [51,71]
time = 1
add = 48,6,0
mul = 90,64,64
;sinadd = 224,80,176,40
invertall = 0
color = 256

[State 1010, BGcolor]
type = PalFX
trigger1 = time = [71,300]
time = 1
add = 96,12,0
mul = 45,32,32
;sinadd = 224,80,176,40
invertall = 0
color = 256

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 20
trigger2 = time = 50
trigger3 = time = 90
value = 11,0
channel = 0

[State 901, down]
type = Lifeset
trigger1 = time = 300
value = 0

[State 820, 4]
type = ChangeState
triggerall = time > 300
trigger1 = Lose
trigger2 = !alive
value = 5150

[State 820, 4]
type = SelfState;キャラのコントロールを相手に返します。
trigger1 = !Lose
trigger1 = time = 800
value = 5050
;---------------------------------------------------------------------------
;永遠の絶頂pre
[Statedef 3300]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 3300
ctrl = 0
sprpriority = 2

[State 901, Throw]
type = attackdist
trigger1 = 1
value = 0

[State 3000, ゲージ減少]
type = PowerAdd
trigger1 = time = 1
value = -2000

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 1
value = 3300,0
channel = 0

[State 1000, ステート変更]
type = Changeanim
trigger1 = anim = 3300
trigger1 = !animtime
value = 3301

[State 1000, ステート変更]
type = Changeanim
trigger1 = anim = 3301
trigger1 = time = 200
value = 3302

[state 0, helper]
type = helper
;trigger1 = !numhelper(1001) || helper(1001),stateno = 1102
trigger1 = time = 6
helpertype = normal
name = "stand"
stateno = 3340
id = 1001
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
pausemovetime = 50
supermovetime = 50
size.xscale = 0.833
size.yscale = 1

[State 4200,02]
type = BGPalfx
trigger1 = Time = 0
add= 66,66,66
time = 50
ignorehitpause = 1

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "cutin"
;stateno = ifelse(facing = 1,23101,23102)
stateno = 23103
id = 3101
pos = 80,-60
postype = back
pausemovetime = 999999
supermovetime = 999999
size.xscale = .65
size.yscale = .65
facing = 1

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "line"
;stateno = ifelse(facing = 1,23101,23102)
stateno = 23105
id = 3105
pos = 350,-190;15
postype = right;left
pausemovetime = 999999
supermovetime = 999999
size.xscale = 0.5
size.yscale = 0.5
facing = 1

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "lineB"
;stateno = ifelse(facing = 1,23101,23102)
stateno = 23106
id = 3106
pos = -350,15;-190
postype = left;right
pausemovetime = 999999
supermovetime = 999999
size.xscale = 0.5
size.yscale = 0.5
facing = 1

[State 4200,02]
type = null;BGPalfx
trigger1 = Time = 0
mul = 64,64,64
time = 80
ignorehitpause = 1

[State 30]
type = NotHitBy  ;特定の攻撃以外食らわない
trigger1 = time = [0,50]
value = SCA,NT,ST,HT
time = 60
;立ち、屈み、空中、通常なげ、必殺なげ、超必殺なげ

[State 30]
type = HitBy  ;特定の攻撃以外食らわない
trigger1 = time = 50
value = SCA,NT,ST,HT
time = 60
;立ち、屈み、空中、通常なげ、必殺なげ、超必殺なげ

[State 4200,01]
type = Pause
trigger1 = Time = 0
moveTime = 50
Time = 50
ctrl = 0
anim = -1
;darken = 0

[State 0, ]
type = PlaySnd
trigger1 = !time
value = 4, 4

[State 1035, 2]
type = ReversalDef
trigger1 = time > 50
attr = S, HA
reversal.attr = SCA, NA, SA, HA
pausetime = 1,1
sparkno = -1
sparkxy = 0,0
id = 3300
numhits = 0
;hitsound = S1,1

[State 220, 3]
type = TargetState
triggerall = numtarget(3300)
triggerall = !target,Ishelper
trigger1 = movehit
value = 3350
ignorehitpause = 1

[State 220, 3]
type = ChangeState
triggerall = numtarget(3300)
triggerall = !target,Ishelper
trigger1 = movehit
value = 3305
ignorehitpause = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = anim = 3302
trigger1 = !animtime
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;永遠の絶頂成功 下がる
[Statedef 3305]
type    = S
movetype= A
physics = N
velset = 0,0
anim = 3305
ctrl = 0
sprpriority = 2

[State 0, 円]
type = null;explod
trigger1 = time = 50
anim = 931
id = 931
pos = 160,120
postype = back
sprpriority = -2
bindtime = 1
ownpal = 1
shadow = 0,0,0
scale = 1,2
pausemovetime = 999999
supermovetime = 999999

[State 901,1]
type = targetBind
trigger1 = time = 0
pos = 120,0
postype = p1
time = 1

[State 0, ]
type = PlaySnd
trigger1 = !time
value = 1, 21

[State -2]
type = PalFX
trigger1 = !time
time = 30
add = 255,255,255
sinadd = 80,80,80,35
ignorehitpause = 1
persistent = 0

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "stand"
stateno = 3341
id = 1001
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
pausemovetime = 999999
supermovetime = 999999
size.xscale = 0.833
size.yscale = 1

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1= !time
trigger1 = p2dist X < 0

[State 1000, ステート変更]
type = pause
trigger1 = !time
time = 80
movetime = 80

[State 5210, 2] ;Turn if not facing opponent
type = velset
trigger1= time = [0,4]
x = -2

[State 5210, 2] ;Turn if not facing opponent
type = velset
trigger1= time = 4
x = -.5

[State 5210, 2] ;Turn if not facing opponent
type = veladd
trigger1= time = [5,20]
x = .01

[State 3002,1]
type = BGPalfx
trigger1 = time = [50,80]
add = (time-50)*-8,(time-50)*-8,(time-50)*-8
;sinadd = 10, 10, 10
time = 1
supermove = 1
ignorehitpause = 1

[State 3002,1]
type = Palfx
trigger1 = time = [50,80]
add = (time-50)*-8,(time-50)*-8,(time-50)*-8
;sinadd = 10, 10, 10
time = 1
supermove = 1
ignorehitpause = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = time = 80
value = 3306
;---------------------------------------------------------------------------
;永遠の絶頂成功 消えてしゃべくる
[Statedef 3306]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 3305
ctrl = 0
sprpriority = 3

[State 7740, loclcamera]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,floor(pos y)

[State 220, 3]
type = TargetState
trigger1 = !time
value = 3351
ignorehitpause = 1

[state 0, helper]
type = helper
trigger1 = time = 5
helpertype = normal
name = "do"
stateno = 3360
id = 3360
pos = 30,-50
postype = left
ownpal = 1
keyctrl = 0
pausemovetime = 0
supermovetime = 0
size.xscale = 1
size.yscale = 1

[state 0, helper]
type = helper
trigger1 = time = 10
helpertype = normal
name = "do"
stateno = 3360
id = 3360
pos = 80,-120
postype = left
ownpal = 1
keyctrl = 0
pausemovetime = 0
supermovetime = 0
size.xscale = 1
size.yscale = 1

[state 0, helper]
type = helper
trigger1 = time = 15
helpertype = normal
name = "do"
stateno = 3360
id = 3360
pos = 130,-90
postype = left
ownpal = 1
keyctrl = 0
pausemovetime = 0
supermovetime = 0
size.xscale = 1
size.yscale = 1

[state 0, helper]
type = helper
trigger1 = time = 20
helpertype = normal
name = "do"
stateno = 3360
id = 3360
pos = 180,-50
postype = left
ownpal = 1
keyctrl = 0
pausemovetime = 0
supermovetime = 0
size.xscale = 1
size.yscale = 1

[state 0, helper]
type = helper
trigger1 = time = 25
helpertype = normal
name = "do"
stateno = 3360
id = 3360
pos = 230,-140
postype = left
ownpal = 1
keyctrl = 0
pausemovetime = 0
supermovetime = 0
size.xscale = 1
size.yscale = 1

[state 0, helper]
type = helper
trigger1 = time = 30
helpertype = normal
name = "do"
stateno = 3360
id = 3360
pos = 290,-80
postype = left
ownpal = 1
keyctrl = 0
pausemovetime = 0
supermovetime = 0
size.xscale = 1
size.yscale = 1

[State 903, EnvShake]
type = EnvShake
trigger1 = time = 40
time = 40
ampl = -5
freq = 20

[State 903, EnvShake]
type = EnvShake
trigger1 = time = 80
time = 150
ampl = -5
freq = 30

[State 903, EnvShake]
type = EnvShake
trigger1 = time = 230
time = 20
ampl = -5
freq = 10

[State 0, ]
type = PlaySnd
trigger1 = !time
value = 1, 22

[State 0, ]
type = PlaySnd
trigger1 = !time
value = 3300, 1
channel = 0

[State 0, ]
type = PlaySnd
trigger1 = !time
value = 1, 28

[State 191, 2] 
type = AssertSpecial
trigger1 = 1
flag = invisible

[State 3002,1]
type = BGPalfx
trigger1 = 1
add = -255,-255,-255
;sinadd = 10, 10, 10
time = 1
supermove = 1
ignorehitpause = 1

[State 220, 3]
type = TargetState
trigger1 = time = 235
value = 3353
ignorehitpause = 1

[state 0, helper]
type = helper
trigger1 = time = 60
helpertype = normal
name = "cliff"
stateno = 3355
id = 3355
pos = 0,0
postype = left
ownpal = 1
keyctrl = 0
pausemovetime = 0
supermovetime = 0
size.xscale = 1
size.yscale = 1

[state 0, helper]
type = helper
trigger1 = time = 60
helpertype = normal
name = "place"
stateno = 3356
id = 3356
pos = 0,0
postype = p2
ownpal = 1
keyctrl = 0
pausemovetime = 0
supermovetime = 0
size.xscale = 1
size.yscale = 1

[state 0, helper]
type = helper
trigger1 = time = 60
helpertype = normal
name = "placeB"
stateno = 3385
id = 3356
pos = -40,0
postype = left
ownpal = 1
keyctrl = 0
pausemovetime = 0
supermovetime = 0
bindtime = 1
size.xscale = .8
size.yscale = 1

[state 0, helper]
type = helper
trigger1 = time = 60
helpertype = normal
name = "placeC"
stateno = 3386
id = 3356
pos = 200,0
postype = left
ownpal = 1
keyctrl = 0
pausemovetime = 0
supermovetime = 0
bindtime = 1
size.xscale = .6
size.yscale = 1

[state 0, helper]
type = helper
trigger1 = time = 60
helpertype = normal
name = "placeD"
stateno = 3387
id = 3356
pos = 40,0
postype = left
ownpal = 1
keyctrl = 0
pausemovetime = 0
supermovetime = 0
bindtime = 1
size.xscale = .6
size.yscale = 1

[state 0, helper]
type = helper
trigger1 = time = 60
helpertype = normal
name = "placeE"
stateno = 3388
id = 3356
pos = 100,0
postype = left
ownpal = 1
keyctrl = 0
pausemovetime = 0
supermovetime = 0
bindtime = 1
size.xscale = .6
size.yscale = 1

[State 0, explod];足場B
type = null;explod
trigger1 = time = 200
anim = 3356
id = 3356
pos = -112,0
postype = p2
scale = 1,1
sprpriority = 3
pausemovetime = 0
supermovetime = 0
bindtime = -1
removetime = 320
ownpal = 1

[state 0, helper]
type = helper
trigger1 = time = 0
helpertype = normal
name = "back"
stateno = 3358
id = 3358
pos = 0,0
postype = back
ownpal = 1
keyctrl = 0
pausemovetime = 0
supermovetime = 0
size.xscale = 1
size.yscale = 1

;バー非表示
[State 9000, Assert]
type = null;AssertSpecial
trigger1 = 1
flag = NoBarDisplay
ignorehitpause = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = time = 320
value = 3307
;---------------------------------------------------------------------------
;永遠の絶頂成功 出てきてチョップ
[Statedef 3307]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 3307
ctrl = 0
sprpriority = 3

[State 52, 3 s]
type = PlaySnd
trigger1 = Time = 0
value = 1, 6

[State 52, 3 s]
type = PlaySnd
trigger1 = Time = 30
value = 1, 29

[State 0, explod]
type = explod
trigger1 = time = 0
anim = 110
id = 110
pos = 20,-70
postype = p1
scale = .5,.5
sprpriority = 3
pausemovetime = 999999
supermovetime = 999999
bindtime = -1

[State 7740, loclcamera]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,floor(pos y)

[State 200, 7]
type = screenbound
trigger1 = 1
value = 0

[State 3002,1]
type = Palfx
trigger1 = time = [0,10]
add = -160+(time*16),-160+(time*16),-160+(time*16)
;sinadd = 10, 10, 10
time = 1
supermove = 1
ignorehitpause = 1

[State 0, ]
type = velset
trigger1 = time = [0,10]
x = 6

[State 0, ]
type = velset
trigger1 = time > 10
x = 0

[State 0, ]
type = PlaySnd
trigger1 = time = 40
value = 3300, 2
channel = 0

[State 4100, Pos]
type=posadd
trigger1= !time
x=p2dist x-140

[State 901,1]
type = null;targetBind
trigger1 = time = 1
pos = 140, 0
postype = P1
time = 1

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1= !time
trigger1 = p2dist X < 0

[State 220, 3]
type = Targetlifeadd
trigger1 = !var(31)
trigger1 = time = 105
value = ifelse(life < 301,-420*1.1,-420)

[State 220, 3]
type = Targetlifeadd
trigger1 = var(31)
trigger1 = time = 105
value = ifelse(life < 301,-630*1.1,-630)

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "stand"
stateno = 3342
id = 1001
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
pausemovetime = 999999
supermovetime = 999999
size.xscale = 0.833
size.yscale = 1

[State 0, 血]
type = explod
trigger1 = time = 105
anim = 921
id = 921
pos = -5,-70
postype = p2
sprpriority = 6
ownpal = 1
shadow = 0,0,0
scale = 1.5,2
pausemovetime = 999999
supermovetime = 999999

[State 0, 血B]
type = explod
trigger1 = time = 110
anim = 922
id = 922
pos = -5,-70
postype = p2
sprpriority = 6
ownpal = 1
shadow = 0,0,0
scale = 1.5,1.5
removetime = 60
pausemovetime = 999999
supermovetime = 999999

[State 0, 血C]
type = explod
trigger1 = time = 110
anim = 923
id = 923
pos = -5,-70
postype = p2
sprpriority = 6
ownpal = 1
shadow = 0,0,0
scale = 1.5,1.5
removetime = 60
pausemovetime = 999999
supermovetime = 999999

[State 903, EnvShake]
type = EnvShake
trigger1 = time = 105
time = 35
ampl = -24
freq = 80

[State 0, ]
type = PlaySnd
trigger1 = time = 105
value = 1, 11

[State 240, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 105
value = 1, 35

[State 0, ]
type = PlaySnd
trigger1 = time = 110
value = 1, 23

[State 0, ]
type = PlaySnd
trigger1 = time = 200
value = 3300, 3
channel = 0

[State 210, 画像表示優先度]
type = SprPriority
trigger1 = time = 165
value = 5

[State 220, 3]
type = TargetState
trigger1 = time = 200
value = 10425
ignorehitpause = 1

[State 3002,1]
type = BGPalfx
trigger1 = time = [0,200]
add = -255,-255,-255
;sinadd = 10, 10, 10
time = 1
supermove = 1
ignorehitpause = 1

[State 9000, Assert]
type = null;AssertSpecial
trigger1 = 1
flag = NoBarDisplay
ignorehitpause = 1

[State 3002,1]
type = AllPalfx
trigger1 = time = [130,200]
add = (time-130)*8,(time-130)*8,(time-130)*8
;sinadd = 10, 10, 10
time = 1
supermove = 1
ignorehitpause = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;永遠の絶頂 相手側1
[Statedef 3350]
type    = S
movetype= H
physics = N
velset = 0,0

[State 810, HitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2500, ScreenBound]
type = screenbound
trigger1 = 1
value = 1
movecamera = 1,0

[State 1061, 2]
type = Velset
trigger1 = 1
x = 0
y = 0

[State 230, 2]
type = playerpush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = anim = 12
statetype = S
;---------------------------------------------------------------------------
;永遠の絶頂 相手側2
[Statedef 3351]
type    = S
movetype= H
physics = N
sprpriority = 5

[State 7740, loclcamera]
type = posset
trigger1 = !time
trigger1 = facing = -1
x = 140

[State 7740, loclcamera]
type = posset
trigger1 = !time
trigger1 = facing = 1
x = -140

[State 810, HitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1061, 2]
type = Velset
trigger1 = 1
x = 0
y = 0

[State 230, 2]
type = playerpush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = anim = 12
statetype = S

[State 1060, 2]
type = changeanim2
trigger1 = time = 0
value = 3350

[State 0, state]
type = offset
trigger1 = facing = -1
trigger1 = time = [15,59]
trigger1 = time%2
x = -120

[State 0, state]
type = offset
trigger1 = facing = 1
trigger1 = time = [15,59]
trigger1 = time%2
x = 120

[State 0, state]
type = offset
trigger1 = time = [15,59]
trigger1 = time%2-1
x = 0

[State 0, state]
type = null;velset
trigger1 = time = [15,59]
x = 4

[State AfterImage]
type = AfterImage
trigger1 = Time = 15
time = 45
removetime = 1
length = 6
timegap = 1
;framegap = 3
palbright = 0,0,0
palcontrast = 256,256,256
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 0,0,0
;SprPriority = 3

[state -1]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 100, 2]
type = null;turn
trigger1 = time%2
trigger2 = time%2-1

[State 820, 4]
type = ChangeState;キャラのコントロールを相手に返します。
trigger1 = time > 60
value = 3352

[State 820, 4]
type = SelfState;キャラのコントロールを相手に返します。
trigger1 = time > 2000
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;永遠の絶頂 相手側3
[Statedef 3352]
type    = S
movetype= H
physics = N
sprpriority = 3

[State 810, HitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 52, Effect]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1061, 2]
type = Velset
trigger1 = !time
;trigger2 = time = 140
x = 0
y = 0

[State 1061, 2]
type = Velset
trigger1 = time = [10,40]
x = 0
y = -8

[State 1061, 2]
type = Velset
trigger1 = time = [40,225]
x = 0
y = 1.85

[State 1061, 2]
type = Velset
trigger1 = time > 225
x = 0
y = 0

[State 1061, 2]
type = posset
trigger1 = time > 225
y = 0

[State 0, state]
type = posadd
trigger1 = !time
x = 120

[State AfterImage]
type = null;AfterImage
trigger1 = !time
time = 0
removetime = 1
length = 6
timegap = 1
;framegap = 3
palbright = 0,0,0
palcontrast = 256,256,256
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 0,0,0

[State 100, 2]
type = turn
trigger1 = !time

[State 230, 2]
type = playerpush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, state]
type = null;statetypeset
trigger1 = anim = 12
statetype = S

[State 1060, 2]
type = null;changeanim2
trigger1 = time = 0
value = 3351

[State 1060, 2]
type = changeanim
trigger1 = time = 0
value = 5300

[State 820, 4]
type = SelfState;キャラのコントロールを相手に返します。
trigger1 = time > 2000
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;永遠の絶頂 相手側4
[Statedef 3353]
type    = S
movetype= H
physics = N
sprpriority = 5

[State 1061, 2]
type = posset
trigger1 = 1
y = 0

[State 810, HitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1061, 2]
type = Velset
trigger1 = 1
x = 0
y = 0

[State 230, 2]
type = playerpush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = anim = 12
statetype = S

[State 1060, 2]
type = changeanim2
trigger1 = time = 190
value = 3352

[State 820, 4]
type = SelfState;キャラのコントロールを相手に返します。
trigger1 = time > 2000
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;ガケA
[Statedef 3355]
type    = S
movetype= I
physics = N
sprpriority = 3
anim = 3355

[State 52, Effect]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1061, 2]
type = Velset
trigger1 = time = [10,42]
x = 0
y = -9

[State 1061, 2]
type = Velset
trigger1 = time = [43,220]
x = 0
y = 4

[State 0, state]
type = posset
trigger1 = !time
y = 40

[State 0, state]
type = null;posadd
trigger1 = !time
x = 120

[State 230, 2]
type = playerpush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 820, 4]
type = destroyself
trigger1 = time = 300
value = 0
;---------------------------------------------------------------------------
;ダミー足場A
[Statedef 3385]
type    = S
movetype= I
physics = N
sprpriority = 3
anim = 3356

[State 52, Effect]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1061, 2]
type = Velset
trigger1 = time = [10,42]
x = 0
y = -9

[State 1061, 2]
type = Velset
trigger1 = time = [43,220]
x = 0
y = 1.9

[State 0, state]
type = posset
trigger1 = !time
y = 40

[State 0, state]
type = null;posadd
trigger1 = !time
x = 120

[State 230, 2]
type = playerpush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 3002,1]
type = Palfx
trigger1 = 1
add = -60,-60,-60
;sinadd = 10, 10, 10
time = 1
supermove = 1
ignorehitpause = 1

[State 820, 4]
type = destroyself
trigger1 = time = 300
value = 0
;---------------------------------------------------------------------------
;ダミー足場B
[Statedef 3386]
type    = S
movetype= I
physics = N
sprpriority = 3
anim = 3356

[State 52, Effect]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1061, 2]
type = Velset
trigger1 = time = [10,42]
x = 0
y = -9

[State 1061, 2]
type = Velset
trigger1 = time = [43,220]
x = 0
y = 1.8

[State 0, state]
type = posset
trigger1 = !time
y = 40

[State 0, state]
type = null;posadd
trigger1 = !time
x = 120

[State 230, 2]
type = playerpush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 3002,1]
type = Palfx
trigger1 = 1
add = -60,-60,-60
;sinadd = 10, 10, 10
time = 1
supermove = 1
ignorehitpause = 1

[State 820, 4]
type = destroyself
trigger1 = time = 300
value = 0
;---------------------------------------------------------------------------
;ダミー足場C
[Statedef 3387]
type    = S
movetype= I
physics = N
sprpriority = 3
anim = 3356

[State 52, Effect]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1061, 2]
type = Velset
trigger1 = time = [10,42]
x = 0
y = -9

[State 1061, 2]
type = Velset
trigger1 = time = [43,220]
x = 0
y = 1.7

[State 0, state]
type = posset
trigger1 = !time
y = 40

[State 0, state]
type = null;posadd
trigger1 = !time
x = 120

[State 230, 2]
type = playerpush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 3002,1]
type = Palfx
trigger1 = 1
add = -50,-50,-50
;sinadd = 10, 10, 10
time = 1
supermove = 1
ignorehitpause = 1

[State 820, 4]
type = destroyself
trigger1 = time = 300
value = 0
;---------------------------------------------------------------------------
;ダミー足場D
[Statedef 3388]
type    = S
movetype= I
physics = N
sprpriority = 3
anim = 3356

[State 52, Effect]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1061, 2]
type = Velset
trigger1 = time = [10,42]
x = 0
y = -9

[State 1061, 2]
type = Velset
trigger1 = time = [43,220]
x = 0
y = 1.5

[State 0, state]
type = posset
trigger1 = !time
y = 40

[State 0, state]
type = null;posadd
trigger1 = !time
x = 120

[State 230, 2]
type = playerpush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 3002,1]
type = Palfx
trigger1 = 1
add = -50,-50,-50
;sinadd = 10, 10, 10
time = 1
supermove = 1
ignorehitpause = 1

[State 820, 4]
type = destroyself
trigger1 = time = 300
value = 0
;---------------------------------------------------------------------------
;足場
[Statedef 3356]
type    = S
movetype= I
physics = N
sprpriority = 4
anim = 3356

[State 52, Effect]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1061, 2]
type = Velset
trigger1 = !time
trigger2 = time = 10
;trigger3 = time = 140
;trigger4 = time > 180
x = 0
y = 0

[State 0, state]
type = posset
trigger1 = time = 0
y = 40

[State 0, state]
type = null;posset
trigger1 = time >= 140
x = enemynear,pos x

[State 1061, 2]
type = Velset
trigger1 = time = [0,10]
x = 0
y = -2

[State 1061, 2]
type = Velset
trigger1 = time = [10,42]
x = 0
y = -8

[State 1061, 2]
type = Velset
trigger1 = time = [43,170]
x = 0
y = 1.85

[State 1061, 2]
type = null;Velset
trigger1 = time > 170
x = 0
y = 0

[State 1061, 2]
type = null;Posset
trigger1 = time > 170
y = 0

[State 1061, 2]
type = null;Velset
trigger1 = time = [0,9]
x = 0
y = -4

[State 1061, 2]
type = null;Veladd
trigger1 = time = [10,60]
x = 0
y = -.1

[State 0, state]
type = null;posset
trigger1 = time = 140
y = 120

[State 0, state]
type = null;posset
trigger1 = time >= 140
x = 0

[State 0, state]
type = null;posadd
trigger1 = !time
x = 120

[State 230, 2]
type = playerpush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 3002,1]
type = Palfx
trigger1 = 1
add = -30,-30,-30
;sinadd = 10, 10, 10
time = 1
supermove = 1
ignorehitpause = 1

[State 820, 4]
type = destroyself
trigger1 = root,stateno != [3300,3307]
;trigger2 = time = 140 
;---------------------------------------------------------------------------
;GHA背景
[Statedef 3358]
type    = S
movetype= I
physics = N
sprpriority = 2
anim = 3358

[State 52, Effect]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1061, 2]
type = Velset
trigger1 = time = [60,70]
x = 0
y = -2

[State 1061, 2]
type = Velset
trigger1 = time = [70,102]
x = 0
y = -8

[State 1061, 2]
type = Velset
trigger1 = time = [103,250]
x = 0
y = 1.6

[State 1061, 2]
type = Velset
trigger1 = time = 251
x = 0
y = 0

[State 0, state]
type = posset
trigger1 = !time
x = 0

[State 0, state]
type = null;posset
trigger1 = time = 202
y = 800

[State 0, state]
type = null;posadd
trigger1 = !time
x = 120

[State 230, 2]
type = playerpush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 820, 4]
type = destroyself
trigger1 = root,stateno = 3307 && root,time = 200
trigger2 = root,stateno != [3300,3307]
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;永遠の絶頂スタンド
[Statedef 3340]
type = S
movetype = I
physics = N
ctrl = 0
anim = 3340
sprpriority = 0

[State 100, 2]
type = turn
trigger1 = time = 0
trigger1 = facing != root,facing

[State 0, anim]
type = changeanim
trigger1 = root,var(39)
trigger1 = root,movecontact
value = anim
elem = animelemno(0)

[State 0, var]
trigger1 != root,movecontact
type = parentvarset
trigger1 = 1
var(39) = 1

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 30,-5

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, 円]
type = explod
trigger1 = time = 210
anim = 866
id = 867
pos = 0,-80
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .508,.645
pausemovetime = 999999
supermovetime = 999999

[State 230, 2];スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno != 200
trigger2 = root,stateno = [200,220]
trigger3 = root,stateno = [400,420]
trigger4 = root,stateno = [1000,1050]
trigger5 = root,stateno = [1100,1150]
trigger6 = root,stateno = [1200,1250]
trigger7 = root,stateno = 3305
ignorehitpause = 1

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = time = 210
value = 1102
;---------------------------------------------------------------------------
;永遠の絶頂スタンド2
[Statedef 3341]
type = S
movetype = I
physics = N
ctrl = 0
anim = 3341
sprpriority = 2

[State 230, 2];スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno != 200
trigger2 = root,stateno = [200,220]
trigger3 = root,stateno = [400,420]
trigger4 = root,stateno = [1000,1050]
trigger5 = root,stateno = [1100,1150]
trigger6 = root,stateno = [1200,1250]
trigger7 = root,stateno = 3306
ignorehitpause = 1

[State 301,]
type = NotHitBy
trigger1 = 1   
value = SCA 
time = 1

[State 5210, 2] ;Turn if not facing opponent
type = velset
trigger1= time = [0,4]
x = -1.0

[State 5210, 2] ;Turn if not facing opponent
type = velset
trigger1= time = 4
x = 0

[State 5210, 2] ;Turn if not facing opponent
type = null;veladd
trigger1= time = [5,20]
x = .01

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 3002,1]
type = Palfx
trigger1 = time = [50,80]
add = (time-50)*-8,(time-50)*-8,(time-50)*-8
;sinadd = 10, 10, 10
time = 1
supermove = 1
ignorehitpause = 1

[State 230, 2]
type = null;changestate
trigger1 = time = 210
value = 1102
;---------------------------------------------------------------------------
;チョップスタンド
[Statedef 3342]
type = S
movetype = I
physics = N
ctrl = 0
anim = 3342
sprpriority = 4

[State 3002,1]
type = Palfx
trigger1 = time = [0,10]
add = -160+(time*16),-160+(time*16),-160+(time*16)
;sinadd = 10, 10, 10
time = 1
supermove = 1
ignorehitpause = 1

[State 100, 2]
type = turn
trigger1 = time = 0
trigger1 = facing != root,facing

[State 0, anim]
type = changeanim
trigger1 = root,var(39)
trigger1 = root,movecontact
value = anim
elem = animelemno(0)

[State 0, var]
trigger1 != root,movecontact
type = parentvarset
trigger1 = 1
var(39) = 1

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 30,0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, 円]
type = null;explod
trigger1 = time = 210
anim = 866
id = 867
pos = 0,-80
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .508,.645
pausemovetime = 999999
supermovetime = 999999

[State 230, 2];スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno != 200
trigger2 = root,stateno = [200,220]
trigger3 = root,stateno = [400,420]
trigger4 = root,stateno = [1000,1050]
trigger5 = root,stateno = [1100,1150]
trigger6 = root,stateno = [1200,1250]
trigger7 = root,stateno = 3305
ignorehitpause = 1

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[state 0, helper]
type = helper
trigger1 = animelem = 6
helpertype = normal
name = "hand"
stateno = 3345
id = 3345
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
pausemovetime = 50
supermovetime = 50
size.xscale = 0.833
size.yscale = 1

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = !animtime
value = 1102
;---------------------------------------------------------------------------
;手
[Statedef 3345]
type    = S
movetype= A
physics = N
anim = 3345
velset = 0,0
sprpriority = 6

[State 0, btr]
type = bindtoparent
trigger1 = 1
pos = 0,0

[State 230, 2]
type = destroyself
trigger1 = time = 60
trigger2 = numhelper(1001) = 0
;---------------------------------------------------------------------------
;ドA
[Statedef 3360]
type    = S
movetype= A
physics = N
anim = 3360
velset = 0,0
sprpriority = 4

[State 230, 2]
type = AngleDraw
trigger1 = time = [0,5]
scale = 0.2+(time*0.05),0.2+(time*0.05)
ignorehitpause = 1

[State 230, 2]
type = AngleDraw
trigger1 = time >= 6
scale = 0.5,0.5
ignorehitpause = 1

[State 1301, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = NoShadow ;影を消す

[State 0, scale]
type = Trans
triggerall = !root,WinKo
trigger1 = time = [20,30]
trans = addalpha
alpha = 256+(time-20)*-18,256

[State 230, 2]
type = destroyself
trigger1 = time = 30
;---------------------------------------------------------------------------
;ドB
[Statedef 3361]
type    = S
movetype= A
physics = N
anim = 3361
velset = 0,0
sprpriority = -4

[State 230, 2]
type = AngleDraw
trigger1 = time = [0,5]
scale = 0.2+(time*0.05),0.2+(time*0.05)
ignorehitpause = 1

[State 230, 2]
type = AngleDraw
trigger1 = time >= 11
scale = 0.5,0.5
ignorehitpause = 1

[State 1301, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = NoShadow ;影を消す

[State 230, 2]
type = destroyself
trigger1 = !animtime
;---------------------------------------------------------------------------
;ドC
[Statedef 3362]
type    = S
movetype= A
physics = N
anim = 3362
velset = 0,0
sprpriority = -4

[State 230, 2]
type = AngleDraw
trigger1 = time = [0,5]
scale = 0.2+(time*0.05),0.2+(time*0.05)
ignorehitpause = 1

[State 230, 2]
type = AngleDraw
trigger1 = time >= 11
scale = 0.5,0.5
ignorehitpause = 1

[State 1301, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = NoShadow ;影を消す

[State 230, 2]
type = destroyself
trigger1 = !animtime
;---------------------------------------------------------------------------
;ドD
[Statedef 3363]
type    = S
movetype= A
physics = N
anim = 3363
velset = 0,0
sprpriority = -4

[State 230, 2]
type = AngleDraw
trigger1 = time = [0,5]
scale = 0.2+(time*0.05),0.2+(time*0.05)
ignorehitpause = 1

[State 230, 2]
type = AngleDraw
trigger1 = time >= 11
scale = 0.5,0.5
ignorehitpause = 1

[State 1301, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = NoShadow ;影を消す

[State 230, 2]
type = destroyself
trigger1 = !animtime
;---------------------------------------------------------------------------
;ドE
[Statedef 3364]
type    = S
movetype= A
physics = N
anim = 3364
velset = 0,0
sprpriority = -4

[State 230, 2]
type = AngleDraw
trigger1 = time = [0,5]
scale = 0.2+(time*0.05),0.2+(time*0.05)
ignorehitpause = 1

[State 230, 2]
type = AngleDraw
trigger1 = time >= 11
scale = 0.5,0.5
ignorehitpause = 1

[State 1301, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = NoShadow ;影を消す

[State 230, 2]
type = destroyself
trigger1 = !animtime
;---------------------------------------------------------------------------
;ドF
[Statedef 3365]
type    = S
movetype= A
physics = N
anim = 3365
velset = 0,0
sprpriority = -4

[State 230, 2]
type = AngleDraw
trigger1 = time = [0,5]
scale = 0.2+(time*0.05),0.2+(time*0.05)
ignorehitpause = 1

[State 230, 2]
type = AngleDraw
trigger1 = time >= 11
scale = 0.5,0.5
ignorehitpause = 1

[State 1301, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = NoShadow ;影を消す

[State 230, 2]
type = destroyself
trigger1 = !animtime
;---------------------------------------------------------------------------
;カットイン
[Statedef 23100]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 3200
sprpriority = -3

[State 191, 2] 
type = AssertSpecial
trigger1 = 1
flag = invisible

[State 1000, 5]
type = explod
trigger1 = time % 1= 0
trigger1 = time < 30
trigger1 = parent,facing = 1
anim = 3200
id = 23107
pos = 0+var(14)*1,239+var(14)*3
postype = left
sprpriority = -3
removetime = 1
bindtime = -1
pausemovetime = 999999
removeongethit = 1
random = 30,30
ownpal = 1

[State 1000, 5]
type = explod
trigger1 = time % 1= 0
trigger1 = time >= 30
trigger1 = parent,facing = 1
anim = 3200
id = 23107
pos = 30,330
postype = left
sprpriority = -3
removetime = 1
bindtime = -1
pausemovetime = 999999
removeongethit = 1
random = 60,60
scale = 2.6*parent,const(size.xscale),2.6
ownpal = 1

[State 1000, 5]
type = explod
trigger1 = time % 1= 0
trigger1 = time < 30
trigger1 = parent,facing = -1
anim = 3200
id = 23107
pos = 0-var(14)*1,239+var(14)*3
postype = right
sprpriority = -3
removetime = 1
bindtime = -1
pausemovetime = 999999
removeongethit = 1
facing = -1
random = 30,30
ownpal = 1

[State 1000, 5]
type = explod
trigger1 = time % 1= 0
trigger1 = time >= 30
trigger1 = parent,facing = -1
anim = 3200
id = 23107
pos = -30,330
postype = right
sprpriority = -3
removetime = 1
bindtime = -1
pausemovetime = 999999
removeongethit = 1
facing = -1
random = 30,30
scale = 2.6*parent,const(size.xscale),2.6
ownpal = 1
getpower = 0

[State 1000, 3]
type = ModifyExplod
trigger1 = Time < 30
ID = 23107
scale = (0.4+Var(14)/15.0)*parent,const(size.xscale) , 0.4+Var(14)/15.0
pausemovetime = 999999

[State 1000, 2]
type = Varset
trigger1 = Time = 0
v = 14
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
v = 14
value = 1

[state 3000]
type = removeexplod
trigger1 = time >= 40
id = 23100

[state 3000]
type = destroyself
trigger1 = time >= 40
;-----------------------------------------------
;SC背景
[Statedef 23099]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 3101
sprpriority = -5

[State 191, 2] 
type = AssertSpecial
trigger1 = 1
flag = invisible

[State 1000, 2]
type = Varset
trigger1 = Time = 0
trigger2 = Time = 21
v = 14
value = 0

[State 1000, 2]
type = VarAdd
trigger1 = Time >= 0
trigger1 = Time <= 20
trigger2 = Time >= 21
trigger2 = Time <= 40
v = 14
value = 15

[State 1000, 3]
type = PalFx
trigger1 = Time = 0
time = 1
add = 255,255,255
mul = 255,255,255

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 3101
pos = 0,239
postype = left
sprpriority = -5
bindtime = -1
supermovetime = 9999999
pausemovetime = 9999999
removeongethit = 1
removetime = 41
ownpal = 0

[State 1000, 3]
type = PalFx
trigger1 = Time >= 0
trigger1 = Time <= 20
trigger2 = Time >= 21
trigger2 = Time <= 40
time = 1
add = 255-Var(14),255-Var(14),255-Var(14)

[state 3000]
type = destroyself
trigger1 = time >= 41
;===========================================================================
;カットイン
[Statedef 23101]
ctrl = 0
anim = 3500
physics = N
sprpriority = -8

[state a]
type = PosSet
trigger1 = 1
y = (pos y - screenpos y) + 160

[State 8000, AssertSpecial-1]
type = AssertSpecial
trigger1 = 1
flag = Noshadow

[State 8500, 1]
type = velset
trigger1 = time = 0
x = 12

[State 8500, 1]
type = velmul
trigger1 = time <= 30
x = .9

[State 8500, 1]
type = velset
trigger1 = time = 30
x = 3

[State 8500, 1]
type = null;posadd
trigger1 = time >= 30
x = -10

[State 1020, Blink Yellow]
type = PalFX
trigger1 = 1
time = 1
add = 255,255,255


[State 0, scale]
type = null;Trans
trigger1 = time < 30
trans = add1
alpha = 256,128

[State 0, scale]
type = angledraw
trigger1 = time >= 30
scale = 1+(time-30)*.06,1+(time-30)*.06

[State 0, scale]
type = Trans
trigger1 = time >= 30
trans = add1;addalpha
alpha = 256+(time-30)*-18,256

[State 0, end]
type = DestroySelf
trigger1 = time = 50
;===========================================================================
;カットインGHA
[Statedef 23103]
ctrl = 0
anim = 3503
physics = N
sprpriority = -8

[state a]
type = PosSet
trigger1 = 1
y = (pos y - screenpos y) + 130

[State 0, scale]
type = angledraw
trigger1 = 1;root,stateno = 13300 || root,stateno = 3300
scale = .8,.8

[State 8000, AssertSpecial-1]
type = null;changeanim
triggerall = !time
trigger1 = root,stateno = 13300 || root,stateno = 3300
value = 3503

[State 8000, AssertSpecial-1]
type = AssertSpecial
trigger1 = 1
flag = Noshadow

[State 8500, 1]
type = velset
trigger1 = time = 0
x = 12

[State 8500, 1]
type = velmul
trigger1 = time <= 30
x = .9

[State 8500, 1]
type = velset
trigger1 = time = 30
x = 3

[State 8500, 1]
type = null;posadd
trigger1 = time >= 30
x = -10

[State 1020, Blink Yellow]
type = PalFX
trigger1 = 1
time = 1
add = 255,255,255


[State 0, scale]
type = null;Trans
trigger1 = time < 30
trans = add1
alpha = 256,128

[State 0, scale]
type = angledraw
trigger1 = time >= 30
scale = 1+(time-30)*.06,1+(time-30)*.06

[State 0, scale]
type = Trans
trigger1 = time >= 30
trans = add1;addalpha
alpha = 256+(time-30)*-18,256

[State 0, end]
type = DestroySelf
trigger1 = time = 50
;===========================================================================
;ライン
[Statedef 23105]
ctrl = 0
anim = 3505
physics = N
sprpriority = 5

[state a]
type = PosSet
trigger1 = 1
y = (pos y - screenpos y) - 2

[State 8000, AssertSpecial-1]
type = changeanim
triggerall = !time
trigger1 = root,stateno = 13300 || root,stateno = 3300
value = 3507

[State 8000, AssertSpecial-1]
type = AssertSpecial
trigger1 = 1
flag = Noshadow

[State 8500, 1]
type = velset
trigger1 = 1
x = -15

[State 8500, 1]
type = null;velmul
trigger1 = time <= 30
x = .9

[State 0, end]
type = DestroySelf
trigger1 = time = 50
;===========================================================================
;ライン
[Statedef 23106]
ctrl = 0
anim = 3506
physics = N
sprpriority = 5

[state a]
type = PosSet
trigger1 = 1
y = (pos y - screenpos y) + 225

[State 8000, AssertSpecial-1]
type = changeanim
triggerall = !time
trigger1 = root,stateno = 13300 || root,stateno = 3300
value = 3508

[State 8000, AssertSpecial-1]
type = AssertSpecial
trigger1 = 1
flag = Noshadow

[State 8500, 1]
type = velset
trigger1 = 1
x = 15

[State 8500, 1]
type = null;velmul
trigger1 = time <= 30
x = .9

[State 0, end]
type = DestroySelf
trigger1 = time = 50
;:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
以下ON時用記述
;:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
;ON立ち弱
[Statedef 10200]
type = S
movetype = A
physics = S
anim = 10200
sprpriority = 0
ctrl = 0

[State 0, vel]
type = varset
trigger1 = !time
var(8) = 1

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger1 = prevstateno != [100,105]
x = 0

[State 0, pos]
type = playsnd
trigger1 = time = 1
;value = 200,0+(random%2)
value = 200,0
channnel = 0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = 0, 0

[State 0, hit]
type = hitdef
trigger1 = !time
attr = S, NA
damage = 15*fvar(1),0
priority = 3,Hit
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 8,8
getpower = ifelse(helper(8500),fvar(8)=0,50,50*1.1)
givepower = 20
sparkno = s810
sparkxy = -8,-100
guard.sparkno = s840
hitsound = s1,0
guardsound = s1,6
;getpower = 50
ground.type = High
ground.slidetime = 13
ground.hittime = 13
guard.slidetime = 11
guard.hittime = 11
ground.velocity = -2
guard.velocity = -2
air.type = High
air.velocity = -2,ifelse(var(40)<30,-3.5+(var(40)*.05),ifelse((var(40)*.8)<0,0,(var(40)*.8)))
ground.cornerpush.veloff = -5
air.cornerpush.veloff = -5
air.hittime = 15
fall = 0
fall.recover = 0
air.fall = 0
yaccel = .36
id = 200
guard.kill = 0
sprpriority = 0

[State 901, Ctrl]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;ON立ち中
[Statedef 10210]
type = S
movetype = A
physics = S
anim = 10210
sprpriority = 0
ctrl = 0

[State 0, EB解除]
type = parentvarset
triggerall = !time
trigger1 = (command = "y" || command = "z")
var(8) = 0

[State 210, 画像表示優先度]
type = SprPriority
trigger1 = AnimElem = 5
value = 0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 210, 0
channel = 0

[State 210, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = 0, 2

[State 0, vel]
type = null;velset
trigger1 = animelemtime(3) = 0
x = 3

[State 210, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = Medium
damage    = 25*fvar(1)
guardflag = MA
pausetime = 2,10
getpower = ifelse(helper(8500),fvar(8)=0,62,62*1.1)
givepower = 25
sparkno = s820
sparkxy = -20,-90
hitsound = s1, 1
guardsound = s1,5
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.slidetime = 12
ground.hittime  = 12
ground.velocity = -4
air.velocity = -2.5,ifelse(var(40)<30,-4+(var(40)*0.2),ifelse((var(40)*0.2)<0,0,(var(40)*0.2)))
fall = 0
fall.recover = 0
air.fall = 0

[State 901, Ctrl]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;ON立ち強
[Statedef 10220]
type = S
movetype = A
physics = S
anim = 10220
sprpriority = 0
ctrl = 0

[State 0, vel]
type = varset
trigger1 = 1
var(39) = 0

[State 0, EB解除]
type = parentvarset
triggerall = !time
trigger1 = (command = "y" || command = "z")
var(8) = 0

[State 0, vel]
type = velset
trigger1 = animelemtime(1) = 0
x = 4

[State 0, vel]
type = null;velset
trigger1 = !time
trigger1 = vel x != 0
trigger1 = prevstateno != [100,105]
x = 0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 220, 0
channel = 0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 5
trigger2 = animelem = 10
value = 0, 4

[State 210, ヒット定義]
type = HitDef
trigger1 = animelem = 5
attr = S, NA
animtype  = hard
damage    = 20*fvar(1)
guardflag = MA
pausetime = 11,11
getpower = ifelse(helper(8500),fvar(8)=0,30,30*1.1)
givepower = 12
sparkno = s830
sparkxy = -20,-80
hitsound = s1, 2
guardsound = s1,5
ground.type = High
ground.slidetime = 22
ground.hittime  = 22
guard.slidetime = 16
ground.hittime  = 16
ground.velocity = 0
air.velocity = -1,ifelse(var(40)<30,-4+(var(40)*0.2),ifelse((var(40)*0.2)<0,0,(var(40)*0.2)))
sprpriority = 0
fall = 0
fall.recover = 0
air.fall = 0

[State 210, ヒット定義]
type = HitDef
trigger1 = animelem = 10
attr = S, NA
animtype  = hard
damage    = 30*fvar(1)
guardflag = MA
getpower = ifelse(helper(8500),fvar(8)=0,40,40*1.1)
givepower = 15
pausetime = 14,14
sparkno = s830
sparkxy = -20,-90
hitsound = s1, 2
guardsound = s1,5
ground.type = High
ground.slidetime = 22
ground.hittime  = 22
guard.slidetime = 16
ground.hittime  = 16
ground.velocity = -4
air.velocity = -2.5,ifelse(var(40)<30,-4+(var(40)*0.2),ifelse((var(40)*0.2)<0,0,(var(40)*0.2)))
sprpriority = 0
fall = 0
fall.recover = 0
air.fall = 0

[state 0, helper]
type = explod
trigger1 = animelem = 5
helpertype = normal
name = "efect"
anim = 913
id = 913
pos = 70,-85
postype = p1
scale = .5,.55
sprpriority = 4

[state 0, helper]
type = explod
trigger1 = animelem = 10
helpertype = normal
name = "efect"
anim = 913
id = 913
pos = 60,-95
postype = p1
scale = .5,.55
sprpriority = 4

[state 0, helper]
type = null;helper
trigger1 = animelem = 5
helpertype = normal
name = "efect"
stateno = 913
id = 913
pos = 70,-90
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = .5
size.yscale = .55

[state 0, helper]
type = null;helper
trigger1 = animelem = 10
helpertype = normal
name = "efect"
stateno = 913
id = 913
pos = 60,-100
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = .5
size.yscale = .55

[State 901, Ctrl]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;D立ち強
[Statedef 230]
type = S
movetype = I
physics = S
anim = 230
sprpriority = 2
ctrl = 0

[State 0, vel]
type = velset
trigger1 = animelemtime(2) = 0
x = 3

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 620, 1
channel = 0

[State 1000, 7]
type = Helper
triggerall = var(49) = 0
trigger1 = Time = 0
trigger1 = numhelper(1001) = 0
helpertype = normal
name = "killer queen"
stateno = 231
id = 1001
pos = 20, 0
postype = p1
ownpal = 1
facing = 1
size.xscale = .833
size.yscale = 1.00

[State 901, Ctrl]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;D立ち強KQ
[Statedef 231]
type = S
movetype = A
physics = S
anim = 231
sprpriority = 0
ctrl = 0

[State 0, vel]
type = velset
trigger1 = animelemtime(2) = 0
x = 8

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 4

[State 210, ヒット定義]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
sprpriority = 3
animtype  = hard
damage    = 80*root,fvar(1)
guardflag = MA
pausetime = 16,16
getpower = ifelse(helper(8500),fvar(8)=0,70,70*1.1)
givepower = 30
sparkno = s830
sparkxy = -20,-80
hitsound = s1, 2
guardsound = s1,5
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.slidetime = 12
ground.hittime  = 12
ground.velocity = -8,-2
air.velocity = -8,ifelse(root,var(40)<30,-4+(root,var(40)*0.2),ifelse((root,var(40)*0.2)<0,0,(root,var(40)*0.2)))
sprpriority = -1
fall = 1
fall.recover = 0

[State -2,***]
type = sprpriority
trigger1 = 1
value = 0
ignorehitpause = 1

[State 1000, 5]
type = explod
trigger1 = animelem = 2
anim = 20017
id = 1002
pos = 0,0
postype = p1
sprpriority = 0
bindtime = -1
scale = const(size.xscale),const(size.yscale)

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 230, 2]
type = playerpush
trigger1 = 1
value = 1
ignorehitpause = 1

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = time = 0
trigger1 = facing != parent,facing

[State 301,]
type = NotHitBy
trigger1 = 1   
value = ,AT    
time = 1

[State 230, 2];プッツン時スタンド消去
type = destroyself
trigger1 = root,stateno = 700
ignorehitpause = 1

[State 230, 2]
type = changestate
trigger1 = parent,movetype = H
value = 1020

[State 0, Override]
type = HitOverride
trigger1 = 1
attr = SCA,AP,AT,AA
stateno = 9500
time = 0
ignorehitpause = 1

[State 901, Ctrl]
type = ChangeState
trigger1 = animtime = 0
value = 232
;---------------------------------------------------------------------------
; 終了（D立ち強）(スタンド)
[Statedef 232]
type    = S
movetype= I
physics = S
juggle  = 0;4
poweradd= 0
ctrl = 0
velset = 0,0
anim = 232
sprpriority = 0

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 230, 2]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = invisible

[State 1000, 5]
type = explod
trigger1 = time = 0
anim = 232
id = 1002
pos = 0,0
postype = p1
sprpriority = 0
bindtime = -1
removeongethit = 1
scale = const(size.xscale),const(size.yscale)
pausemovetime = parent,var(14) * 9999999999999

[State 1000, 3]
type = ModifyExplod
trigger1 = time >= 2
ID = 1002
scale = 1-time/11.5 , 1+time/11.5
pausemovetime = parent,var(14) * 9999999999999

[State 191, 3]
type = PlaySnd
trigger1 = animtime = 0
value = 100,1

[State 0, 円]
type = explod
trigger1 = !time
anim = 866
id = 867
pos = 0,-80
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .508,.645
pausemovetime = 999999
supermovetime = 999999

[State 230, 2]
type = destroyself
trigger1 = animtime = 0
;---------------------------------------------------------------------------
;OND立ち強
[Statedef 10230]
type = S
movetype = A
physics = S
anim = 10230
sprpriority = 0
ctrl = 0

[State 0, vel]
type = velset
trigger1 = animelemtime(2) = 0
x = 10

[State 0, vel]
type = null;velset
trigger1 = !time
trigger1 = vel x != 0
trigger1 = prevstateno != [100,105]
x = 0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 620, 1
channel = 0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 4

[State 210, ヒット定義]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
animtype  = hard
damage    = 95*fvar(1)
guardflag = MA
pausetime = 16,16
getpower = ifelse(helper(8500),fvar(8)=0,70,70*1.1)
givepower = 30
sparkno = s830
sparkxy = -20,-80
hitsound = s1, 2
guardsound = s1,5
ground.type = High
ground.slidetime = 22
ground.hittime  = 22
guard.slidetime = 16
ground.hittime  = 16
ground.velocity = -8,-2
air.velocity = -8,ifelse(var(40)<30,-4+(var(40)*0.2),ifelse((var(40)*0.2)<0,0,(var(40)*0.2)))
sprpriority = 0
fall = 1
fall.recover = 0

[State 1000, 5]
type = explod
trigger1 = animelem = 2
anim = 20017
id = 1002
pos = 0,0
postype = p1
sprpriority = 0
bindtime = -1
scale = const(size.xscale),const(size.yscale)

[State 230, 2]
type = statetypeset
trigger1 = time >= 14
movetype = I

[State 901, Ctrl]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Son立ち強エフェクト
[Statedef 913]
type = S
movetype = I
physics = N
ctrl = 0
anim = 913
sprpriority = 5

[State 0, anim]
type = changeanim
trigger1 = root,var(39) = 1
;trigger1 = root,movecontact
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
;trigger1 != root,movecontact
trigger1 = 1
var(39) = 1

[State 0, scale]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256,256

[State 0, end]
type = destroyself
trigger1 = animtime = 0
;---------------------------------------------------------------------------
;Sonしゃがみ弱
[Statedef 10400]
type    = C
movetype= A
physics = C
ctrl = 0
anim = 10400
sprpriority = 0
facep2 = 1

[State 400, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 400, 0
channel = 0

[State 200, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = C, NA
hitflag = MAF
guardflag = L
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = 15*fvar(1)
pausetime = 8,7
getpower = ifelse(helper(8500),fvar(8)=0,50,50*1.1)
givepower = 20
guard.pausetime = 8,7
sparkno = s810
guard.sparkno = S840
sparkxy = -10,-60
hitsound = S1,0
guardsound = S1,5
ground.type = Low
air.type = Low
ground.slidetime = ifelse((11-floor(var(28)*.125))<3,3,(11-floor(var(28)*.125)))
ground.hittime = ifelse((11-floor(var(28)*.125))<3,3,(11-floor(var(28)*.125)))
air.hittime = ifelse((11-floor(var(28)*.125))<3,3,(11-floor(var(28)*.125)))
guard.ctrltime = 11
ground.velocity = -2.5
guard.velocity = -2.5
air.velocity = -3
ground.cornerpush.veloff = -5
air.cornerpush.veloff = 0
persistent = 0
fall = 0
fall.recover = 0
air.fall = 0
yaccel = .44

[State 400, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11 ;しゃがむステートへ（コモンステート）
Ctrl = 1
;---------------------------------------------------------------------------
;Sonしゃがみ中
[Statedef 10410]
type    = C
movetype= A
physics = C
ctrl = 0
anim = 10410
sprpriority = 0
facep2 = 1

[State 400, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 410, 0
channel = 0

[State 210, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = Medium
damage    = 20*root,fvar(1)
guardflag = L
pausetime = 10,10
getpower = ifelse(helper(8500),fvar(8)=0,62,62*1.1)
givepower = 25
sparkno = s820
sparkxy = -10,-60
hitsound = s1, 1
guardsound = s1,5
ground.type = High
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -4
guard.velocity = -8
air.velocity = -4.5,-4
fall = 0
fall.recover = 0
air.fall = 0
sprpriority = 0

[State 400, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11 ;しゃがむステートへ（コモンステート）
Ctrl = 1
;---------------------------------------------------------------------------
;Sonしゃがみ強
[Statedef 10420]
type    = C
movetype= A
physics = C
ctrl = 0
anim = 10420
sprpriority = 0

[State 210, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype = hard
damage    = 40*fvar(1)
guardflag = L
pausetime = 15,15
getpower = ifelse(helper(8500),fvar(8)=0,70,70*1.1)
givepower = 30
sparkno = s830
sparkxy = -10,-40
hitsound = s1, 2
guardsound = s1,5
ground.type = Trip
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
guard.velocity = -2
ground.velocity = -2*const(size.xscale),-2
air.velocity = -2*const(size.xscale),-3
airguard.velocity = -6
fall = 1
air.fall = 1
fall.recovertime = 45
sprpriority = 0

[State 810, Throw Sound]
type = playsnd
trigger1 = animelem = 1
value = 420,0
channel = 0

[State 810, Throw Sound]
type = playsnd
trigger1 = animelem = 1
value = 0,4

[state 0, helper]
type = helper
trigger1 = animelem = 1
helpertype = normal
name = "stand"
stateno = 423
id = 241
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.xscale = 1
size.yscale = 1

[State 230, 3]
type = null;changestate
triggerall = command = "holdup"
trigger1 =Time >= 18
value = 40

[State 410, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------
;===========================================================================
;ガード受付
[Statedef 7777]
type     = A
movetype = I
physics  = N
ctrl     = 0
anim     = 133
sprpriority = 1

[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 10001 固定]
type = BindToParent
trigger1 = 1
time = 1
facing = 0
pos = 0,0+IfElse(parent,StateType=C,30,0)
;（しゃがみなら30、そうでなければ0）を足す。

[State 230, 2];スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno != 220
trigger2 = root,stateno = [200,220]
trigger3 = root,stateno = [400,420]
trigger4 = root,stateno = [1000,1050]
trigger5 = root,stateno = [1100,1150]
trigger6 = root,stateno = [1200,1250]
trigger7 = root,stateno = 900
trigger8 = root,stateno = 3000
trigger9 = root,stateno = 3300
ignorehitpause = 1

[State 215　ステート]
type = ChangeState
trigger1 = parent,Anim != [130,132]
value = 7779
;---------------------------------------------------------------------------
;ガード
[Statedef 7778]
type     = A
movetype = I
physics  = N
ctrl     = 0
anim     = 134
sprpriority = 1

[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 10001 固定]
type = BindToParent
trigger1 = 1
trigger1 = parent,Anim = 150
time = 1
facing = 0
pos = 0,0

[State 10001 固定]
type = BindToParent
trigger1 = 1
trigger1 = parent,Anim = 151
time = 1
facing = 0
pos = 0,30

[State 10001 固定]
type = BindToParent
trigger1 = 1
trigger1 = parent,Anim = 152
time = 1
facing = 0
pos = 15,0

[State 230, 2];スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno != 220
trigger2 = root,stateno = [200,220]
trigger3 = root,stateno = [400,420]
trigger4 = root,stateno = [1000,1050]
trigger5 = root,stateno = [1100,1150]
trigger6 = root,stateno = [1200,1250]
trigger7 = root,stateno = 900
trigger8 = root,stateno = 3000
trigger9 = root,stateno = 3300
ignorehitpause = 1

[State 215　ステート]
type = ChangeState
trigger1 = parent,Anim != [150,155];ガード硬直
value = 7779
;---------------------------------------------------------------------------
;ガードさよなら
[Statedef 7779]
type     = A
movetype = I
physics  = N
ctrl     = 0
anim     = 135
sprpriority = 3

[State 230, 2]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 192, 128

[State 230, 2];スタンド消去
type = destroyself
trigger1 = root,stateno = 700
trigger2 = root,stateno != 220
trigger2 = root,stateno = [200,220]
trigger3 = root,stateno = [400,420]
trigger4 = root,stateno = [1000,1050]
trigger5 = root,stateno = [1100,1150]
trigger6 = root,stateno = [1200,1250]
trigger7 = root,stateno = 900
trigger8 = root,stateno = 3000
trigger9 = root,stateno = 3300
ignorehitpause = 1

[State 215　ヘルパー消滅]
type = DestroySelf
trigger1 = AnimTime = 0
trigger2 = root,stateno = 950
ignorhitpause = 1
;---------------------------------------------------------------------------
; アドバンシング（立ち）
[Statedef 4100]
type    = U
movetype= H
physics = N
anim = 150
ctrl = 0
velset = 0,0
poweradd = -100

[State 1051, 2]
type = nothitby
trigger1 = time <= 1
value = SCA
time = 1

[State 1051, 2]
type = velset
trigger1 = 1
x = 0

[State 3010, 2]
type = helper
trigger1 = time = 0
name = "adv"
helpertype = normal
stateno = 4010
id = 4010
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.ground.back = 16
size.ground.front = 16
size.air.back = 16
size.air.front = 16
size.height = 500
persistent = 0
ignorehitpause = 1

[State 191, Wood 1]
type = Explod
trigger1 = time = 0
anim = 860
id = 860
postype = p1
pos = 17,-68
sprpriority = 3
bindtime = -1
ownpal = 1

[State 1051, 2]
type = changestate
trigger1 = time >= 1
value = 151
;===========================================================================
; アドバンシング（しゃがみ）
[Statedef 4105]
type    = C
movetype= H
physics = N
anim = 151
ctrl = 0
velset = 0,0
poweradd = -100

[State 1051, 2]
type = nothitby
trigger1 = time <= 1
value = SCA
time = 1

[State 1051, 2]
type = velset
trigger1 = 1
x = 0

[State 3010, 2]
type = helper
trigger1 = time = 0
name = "adv"
helpertype = normal
stateno = 4010
id = 4010
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.ground.back = 16
size.ground.front = 16
size.air.back = 16
size.air.front = 16
size.height = 500
persistent = 0
ignorehitpause = 1

[State 191, Wood 1]
type = Explod
trigger1 = time = 0
anim = 860
id = 860
postype = p1
pos = 17,-18
sprpriority = 3
bindtime = -1
ownpal = 1

[State 1051, 2]
type = changestate
trigger1 = time >= 1
value = 153
;---------------------------------------------------------------------------
;Sonアドバンシング（立ち）
[Statedef 14400]
type    = U
movetype= H
physics = N
anim = 150+var(49)
ctrl = 0
velset = 0,0
poweradd = -100

[State 1051, 2]
type = nothitby
trigger1 = time <= 1
value = SCA
time = 1

[State 1051, 2]
type = velset
trigger1 = 1
x = 0

[State 3010, 2]
type = helper
trigger1 = time = 0
name = "adv"
helpertype = normal
stateno = 4010
id = 4010
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.ground.back = 16
size.ground.front = 16
size.air.back = 16
size.air.front = 16
size.height = 500
persistent = 0
ignorehitpause = 1

[State 191, Wood 1]
type = Explod
trigger1 = time = 0
anim = 860
id = 860
postype = p1
pos = 17,-68
sprpriority = 3
bindtime = -1
ownpal = 1

[State 1051, 2]
type = changestate
trigger1 = time >= 1
value = 151
;===========================================================================
;Sonアドバンシング（しゃがみ）
[Statedef 14405]
type    = C
movetype= H
physics = N
anim = 150+var(49)
ctrl = 0
velset = 0,0
poweradd = -100

[State 1051, 2]
type = nothitby
trigger1 = time <= 1
value = SCA
time = 1

[State 1051, 2]
type = velset
trigger1 = 1
x = 0

[State 3010, 2]
type = helper
trigger1 = time = 0
name = "adv"
helpertype = normal
stateno = 4010
id = 4010
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
size.ground.back = 16
size.ground.front = 16
size.air.back = 16
size.air.front = 16
size.height = 500
persistent = 0
ignorehitpause = 1

[State 191, Wood 1]
type = Explod
trigger1 = time = 0
anim = 860
id = 860
postype = p1
pos = 17,-18
sprpriority = 3
bindtime = -1
ownpal = 1

[State 1051, 2]
type = changestate
trigger1 = time >= 1
value = 153
;---------------------------------------------------------------------------
; アドバンシングヘルパー
[Statedef 4010]
type    = A
movetype= I
physics = N
anim = 861
ctrl = 0
velset = 10,0
sprpriority = 4

[State 5071, 1]
type = parentvarset
trigger1 = time = 0
v = 24
value = 1

[State 5071, 1]
type = parentvarset
trigger1 = time = 2
v = 24
value = 0

[State 810, Throw Sound]
type = playsnd
trigger1 = animelem = 1
value = 4010,0

[State 810, Throw Sound]
type = playsnd
trigger1 = time = 0
value = 3,18

[State 5071, 1]
type = parentvarset
trigger1 = time = 0
v = 16
value = 0

[State 1051, 2]
type = playerpush
trigger1 = 1
value = 1

[State 1051, 2]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 191, Wood 1]
type = Explod
trigger1 = 0;time = 0
trigger1 = enemy,statetype != A
anim = 860
id = 870
postype = p2
pos = 15,0
sprpriority = 3
bindtime = -1
ownpal = 1
removeongethit = 1
facing = -1

[State 1051, 2]
type = destroyself
trigger1 = time = 16
trigger2 = parent,alive = 0
;---------------------------------------------------------------------------
; ガーキャン soff
[Statedef 1800]
type    = S
movetype= A
physics = S
poweradd= -1000
velset = 0,0
anim = 1800
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 1800, 0
channel = 0

[State 191, Wood 1]
type = nothitby
trigger1 = Time = 0
value = SCA
time = 20

[State 1020, Blink Yellow]
type = PalFX
trigger1 = Time = 0
time = 3
add = 255,255,255

[State 1000, 7]
type = Helper
trigger1 = Time = 0
helpertype = normal
name = "bom"
stateno = 1803
id = 1003
pos = 60, -70
postype = p1
ownpal = 1
facing = 1

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; ガーキャン son
[Statedef 11800]
type    = S
movetype= A
physics = S
poweradd= -1000
velset = 0,0
anim = 11800
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 1800, 0
channel = 0

[State 191, Wood 1]
type = nothitby
trigger1 = Time = 0
value = SCA
time = 20

[State 1020, Blink Yellow]
type = PalFX
trigger1 = Time = 0
time = 3
add = 255,255,255

[State 1000, 7]
type = Helper
trigger1 = Time = 0
helpertype = normal
name = "bom"
stateno = 1803
id = 1003
pos = 60, -70
postype = p1
ownpal = 1
facing = 1

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 爆発
[Statedef 1803]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0
anim = 911
sprpriority = 4
:facep2 = 1

[State 220, 1]
type = Hitdef
trigger1 = AnimElem = 5
attr = S, SA
hitflag = MAF
guardflag = M
animtype = heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = 50
pausetime = 0
guard.pausetime = 0
sparkno = -1
guard.sparkno = S840
sparkxy = -20, -63
hitsound = S1,2
guardsound = S1,3
ground.type = High
air.type = High
ground.slidetime = 17
ground.hittime = 17
air.hittime = 17
guard.ctrltime = 17
ground.velocity = -5,-4
guard.velocity = -8
air.velocity = -4,-3
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,0
persistent = 0
fall = 1
air.fall = 1
fall.recover = 0
yaccel = .35;44
guard.kill = 0
kill = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 100, 2

[State 1027, Sound]
type = PlaySnd
trigger1 = time = 0
value = 300,1

[State 230, 2]
type = destroyself
trigger1 = animtime = 0
;---------------------------------------------------------------------------
; 財布
[Statedef 1900]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0
anim = 36400
sprpriority = 0
facep2 = 1

[State 600, 2　ヒット定義]
type = HitDef
trigger1 = time = 0
attr = A, NA
damage    = 0
animtype  = hard
guardflag = MA
priority = 2, Hit
pausetime = 0,0
sparkno = s36400
guard.sparkno = s36400
sparkxy = -10,-77
hitsound = s1, 9999
guardsound = s1,9999
ground.type = High
ground.slidetime = 0
ground.hittime  = 11
ground.velocity = 0,0
air.velocity = 0,-6
p2facing = 1
getpower = 10 * (var(14) = 0),0
givepower = 0,0
ground.cornerpush.veloff = 0
air.hittime = 0
guard.dist = 0
palfx.sinadd = 90,90,90,4

[State 10001 固定]
type = BindToParent
trigger1 = 1
time = 1
facing = 0
pos = 0, 0

[State 230, 2]
type = changestate
trigger1 = root,stateno = 5110
trigger1 = root,Command = "c"
value = 1901
;---------------------------------------------------------------------------
; 財布2
[Statedef 1901]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0
anim = 9995
sprpriority = 0
facep2 = 1

[State 230, 2]
type = playsnd
trigger1 = anim = 900
lowpriority = 1
value = 300, 0
channel = 12

[State 230, 2]
type = changeanim
trigger1 = anim = 9995
trigger1 = P2BodyDist X < 0
value = 900

[State 600, 2　ヒット定義]
type = HitDef
trigger1 = time = 0
attr = A, NA
damage    = 20
animtype  = hard
guardflag = MA
priority = 2, Hit
pausetime = 0,9
sparkno = s36400
guard.sparkno = s36400
sparkxy = -10,0
hitsound = s1, 99999
guardsound = s1,5
ground.type = High
ground.slidetime = 11
ground.hittime  = 11
ground.velocity = 3,0
air.velocity = -4,-6
p2facing = 1
getpower = 10 * (var(14) = 0),0
givepower = 10,0
ground.cornerpush.veloff = 0
air.hittime = 15
guard.dist = 0
palfx.color = 150
palfx.time = 40
palfx.add = 128,24,0
palfx.mul = 90,64,64
palfx.sinadd = 90,90,90,4


[State 230, 2]
type = changestate
trigger1 = anim = 900
trigger1 = animtime = 0
value = 1900
;---------------------------------------------------------------------------
;スタンド発現（立ち）
[Statedef 16000]
type = S
physics = S
ctrl = 0
anim = 10001
velset = 0,0

[State 0, pos]
type = playsnd
trigger1 = !time
;value = 16000,0+(random%2)
value = 16000,0
channnel = 0

[State 10820,]
type = PlaySnd
trigger1 = !time
value = 6,5

[State 0, pos];12P特典
type = ctrlset
triggerall = palno = 12
trigger1 = !time
value = 1

[State 810,]
type = null;helper
trigger1 = time = 0  
helpertype = normal
name = "are"
pos = 0,0
postype = p1
stateno = 5656
ownpal = 1

[State 0]
type = varset
trigger1 = time = 0
var(2) = 1

[State 10820, 1]
type = varset
trigger1 = time = 0
var(49) = 10000

[State 10820, おまけ]
type = Explod
trigger1 = time = 0
facing = 1
postype = p1
pos = -10,0
anim = 9999
sprpriority = 2
ownpal = 1
scale = 0.833,1.03
removetime = 1

[State 0, 0]
type = PosAdd
trigger1 = time = 0
x = 10

[State 0, 円]
type = explod
trigger1 = !time
anim = 865
id = 867
pos = 0,-85
postype = p1
sprpriority = 4
ownpal = 1
shadow = 0,0,0
scale = .558,.715
pausemovetime = 999999
supermovetime = 999999

[State 10820, けむり]
type = Explod
trigger1 = AnimElem = 1
facing = 1                 ;キャラと同じ向きに表示（デフォ
postype = p1
pos = 0,0
anim = 873
sprpriority = 4
ownpal = 1

[State 10820,]
type = null;Ctrlset
trigger1 = time = 18
value = 1

[State 10820, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;===========================================================================
;クイックスタンドon
[Statedef 10901]
type = S
movetype = I
physics = N
velset = 0,0
anim = 10900
ctrl = 0
poweradd = -500

[State 0, pos]
type = playsnd
trigger1 = !time
;value = 16000,0+(random%2)
value = 16000,0
channnel = 0

[State 0, var]
type = playsnd
trigger1 = !time
value = 900,0+(random%2)

[State 10820,]
type = PlaySnd
trigger1 = !time
value = 6,5

[State 0, pos]
type = playerpush
trigger1 = time < 15
value = 0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 10820, おまけ]
type = Explod
trigger1 = time = 0
facing = 1
postype = p1
pos = -10,0
anim = 9999
sprpriority = 2
ownpal = 1
scale = 0.833,1.03
removetime = 1

[State 0, 0]
type = PosAdd
trigger1 = time = 0
x = 10

[State 0, 円]
type = explod
trigger1 = !time
anim = 865
id = 867
pos = 0,-85
postype = p1
sprpriority = 4
ownpal = 1
shadow = 0,0,0
scale = .558,.715
pausemovetime = 999999
supermovetime = 999999

[State 10820, けむり]
type = Explod
trigger1 = AnimElem = 1
facing = 1                 ;キャラと同じ向きに表示（デフォ
postype = p1
pos = 0,0
anim = 873
sprpriority = 4
ownpal = 1

[State 0, var]
type = varset
trigger1 = !time
var(49) = 10000

[State 0, end]
type = null;changestate
trigger1 = time >= 20
value = 20
ctrl = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1
;----------------------------------------------------------------
;スタンド解除（立ち）
[Statedef 830]
type = S
physics = S
anim = 10830
velset = 0,0
ctrl = 0

[State 0, pos]
type = playsnd
trigger1 = !time
;value = 16010,0+(random%2)
value = 16010,0
channnel = 0

[State 0, pos];12P特典
type = ctrlset
triggerall = palno = 12
trigger1 = !time
value = 1

[State 0, pos]
type = playsnd
trigger1 = time = 0
value = 6,6

[State 8500, 1]
type = varset
trigger1 = time = 0
var(49) = 0

[State 0, 0]
type = PosAdd
trigger1 = time = 0
x = -10

[State 0, 円]
type = explod
trigger1 = !time
anim = 866
id = 868
pos = 0,-85
postype = p1
sprpriority = 4
ownpal = 1
shadow = 0,0,0
scale = .558,.715
pausemovetime = 999999
supermovetime = 999999

[State 10820,]
type = Ctrlset
trigger1 = time = 13
value = 1

[State 101, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 10000]
type = U;前のステートの状態を引き継ぐ
physics = N
;anim = 1
velset = 0,0
sprpriority = 4

[State 230, 2]
type = assertspecial
trigger1 = root,stateno = 950
flag = invisible

[State 0, anim]
type = changeanim
trigger1 = root,stateno != 700
trigger1 = root,var(39)
value = anim
elem = animelemno(0)

[State 0, var]
type = parentvarset
trigger1 = 1
var(39) = 1

[State 10000]
type = NotHitBy ;無敵
trigger1 = 1    ;このｽﾃｰﾄ中ずっと
value = SCA

[State 301,]
type = PlayerPush;プレイヤーのぶつかり判定の有無を指定します
trigger1 = 1
value = 0

[State 10000]
type = BindToParent  ;読んで字の如く
trigger1 = 1         ;このｽﾃｰﾄ中ずっと
pos = -10,0

[State 10000]
type = Turn      ;親と違う向きなら振り返る。
trigger1 = facing != parent,facing

b;クイックスタンドon用
[state -2, helper]
type = helper
trigger1 = root,stateno = 10901
trigger1 = !numhelper(10905)
helpertype = normal
name = "quick"
stateno = 10905
id = 10905
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
pausemovetime = 9999999
supermovetime = 9999999
persistent = 0

[State 10000]
;プレイヤーのステートタイプ、行動状態、物理状態を変更します。
;技の途中で宙に浮いたりする場合に使用します。
type = StateTypeSet
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 10000]
type = StateTypeSet
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 10000]
type = StateTypeSet
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 10000,けす]
type = destroyself
trigger1 = parent,var(49) = 0
trigger2 = parent,movetype = H && parent,stateno != [5000,5210]
trigger2 = parent,movetype = H && parent,anim != [10000,15210]

[State 10000]
type = ChangeAnim
triggerall = anim != parent,anim-10000
trigger1 = parent,stateno = 0
trigger2 = parent,stateno = 5
trigger3 = parent,stateno = 6
trigger4 = parent,stateno = 10
trigger5 = parent,stateno = 11
trigger6 = parent,stateno = 12
trigger7 = parent,stateno = 20
trigger8 = parent,stateno = 21
trigger9 = parent,stateno = 41
trigger10 = parent,stateno = 47
trigger11 = parent,stateno = 50
trigger12 = parent,stateno = [41,46]
trigger13 = parent,stateno = 100
trigger14 = parent,stateno = 101
trigger15 = parent,stateno = 105
trigger16 = parent,stateno = [5000,5500]
trigger17 = parent,stateno = [120,155]
value = parent,anim-10000

[State 10000]
type = ChangeAnim
triggerall = anim != 52
trigger1 = parent,stateno = 52
value = 52

[State 10000];発現
type = ChangeAnim
triggerall = anim != 10002
trigger1 = parent,stateno = 16000
value = 10002

[State 10000];挑発
type = ChangeAnim
triggerall = anim != 18295
trigger1 = parent,stateno = 195
trigger1 = parent,var(10) = 0
value = 18295

[State 10000];挑発B
type = ChangeAnim
triggerall = anim != 18296
trigger1 = parent,stateno = 195
trigger1 = parent,var(10) = 1
value = 18296

[State 10000];立ち弱
type = ChangeAnim
triggerall = anim != 10201
trigger1 = parent,stateno = 10200
value = 10201

[State 10000];立ち中
type = ChangeAnim
triggerall = anim != 10211
trigger1 = parent,stateno = 10210
value = 10211

[State 10000];立ち強
type = ChangeAnim
triggerall = anim != 10221
trigger1 = parent,stateno = 10220
value = 10221

[State 10000];D立ち強
type = ChangeAnim
triggerall = anim != 10231
trigger1 = parent,stateno = 10230
value = 10231

[State 10000];屈み弱
type = ChangeAnim
triggerall = anim != 10401
trigger1 = parent,stateno = 10400
value = 10401

[State 10000];屈み中
type = ChangeAnim
triggerall = anim != 10411
trigger1 = parent,stateno = 10410
value = 10411

[State 10000];屈み強
type = ChangeAnim
triggerall = anim != 10421
trigger1 = parent,stateno = 10420
value = 10421

[State 10000];屈み強
type = ChangeAnim
triggerall = anim != 10460
trigger1 = parent,stateno = 10460
value = 10460

[State 10000];空中弱
type = ChangeAnim
triggerall = anim != 10601
trigger1 = parent,stateno = 10600
value = 10601

[State 10000];空中中
type = ChangeAnim
triggerall = anim != 10611
trigger1 = parent,stateno = 10610
value = 10611

[State 10000];空中強
type = ChangeAnim
triggerall = anim != 10621
trigger1 = parent,stateno = 10620
value = 10621

[State 10000];プッツン
type = ChangeAnim
triggerall = anim != 10701
trigger1 = parent,stateno = 700
value = 10701
ignorehitpause = 1

[State 10000];掴み
type = ChangeAnim
triggerall = anim != 10805
trigger1 = parent,stateno = 10800
trigger2 = parent,stateno = 10801
value = 10805

[State 10000];前投げ
type = ChangeAnim
triggerall = anim != 10806
trigger1 = parent,stateno = 10810
value = 10806

[State 10000];後ろ投げ
type = ChangeAnim
triggerall = anim != 10807
trigger1 = parent,stateno = 10811
value = 10807

[State 10000];投げ抜け
type = ChangeAnim
triggerall = anim != 10809
trigger1 = parent,stateno = 880
value = 10809

[State 10000];QスタンドON
type = ChangeAnim
triggerall = anim != 10901
trigger1 = parent,stateno = 10901
value = 10901

[State 10000]
type = ChangeAnim
triggerall = anim != 11001
trigger1 = parent,stateno = 11000
trigger2 = parent,stateno = 11010
trigger3 = parent,stateno = 11020
value = 11001

[State 10000]
type = ChangeAnim
triggerall = anim != 11031
trigger1 = parent,stateno = 11030
trigger2 = parent,stateno = 11040
value = 11031

[State 10000]
type = ChangeAnim
triggerall = anim != 11102
trigger1 = parent,stateno = 11100
trigger2 = parent,stateno = 11110
value = 11102

[State 10000]
type = ChangeAnim
triggerall = anim != 11121
trigger1 = parent,stateno = 11120
value = 11121

[State 10000]
type = ChangeAnim
triggerall = anim != 11103
trigger1 = parent,stateno = 11101
trigger2 = parent,stateno = 11111
trigger3 = parent,stateno = 11121
value = 11103

[State 10000]
type = ChangeAnim
triggerall = anim != 11401
trigger1 = parent,stateno = 11400
trigger2 = parent,stateno = 11410
trigger3 = parent,stateno = 11420
value = 11401

[State 10000]
type = ChangeAnim
triggerall = anim != 11601
trigger1 = parent,stateno = 11600
trigger2 = parent,stateno = 11610
trigger3 = parent,stateno = 11620
value = 11601

[State 10000]
type = ChangeAnim
triggerall = anim != 11801
trigger1 = parent,stateno = 11800
value = 11801

[State 10000];Sonsc第一の爆弾
type = ChangeAnim
triggerall = anim != 13001
trigger1 = parent,stateno = 13000
trigger2 = parent,stateno = 13010
value = 13001

[State 10000];Sonsc第一の爆弾
type = ChangeAnim
triggerall = anim != 13007
trigger1 = parent,stateno = 13005
value = 13007

[State 10000];Sonsc第一の爆弾
type = ChangeAnim
triggerall = anim != 13013
trigger1 = parent,stateno = 13012
value = 13013

[State 10000];Sonsc空気弾
type = ChangeAnim
triggerall = anim != 13102
trigger1 = parent,stateno = 13100
value = 13102

[State 10000];Sonsc空気弾
type = ChangeAnim
triggerall = anim != 13102
trigger1 = parent,stateno = 13100
value = 13102

[State 10000];Sonsc空気弾戻り
type = ChangeAnim
triggerall = anim != 13103
trigger1 = parent,stateno = 13101
value = 13103

[State 10000];Sonsc空気弾
type = ChangeAnim
triggerall = anim != 13201
trigger1 = parent,stateno = 13200
value = 13201

[State 10000];防御してくれている…///
type = ChangeAnim
triggerall = anim != 13305
trigger1 = parent,stateno = 13300
value = 13305

[State 10000];防御してくれている…///
type = ChangeAnim
triggerall = anim != 13306
trigger1 = parent,stateno = 13302
value = 13306

[State 10000];防御してくれている…///
type = ChangeAnim
triggerall = anim != 13307
trigger1 = parent,stateno = 13303
value = 13307

[State 10000];Sonsc空気弾操作ポーズ
type = ChangeAnim
triggerall = anim != 11106
trigger1 = parent,stateno = 11195
trigger2 = parent,stateno = 13195
value = 11106

[State 10000];Sonsc空気弾待機ポーズ
type = ChangeAnim
triggerall = anim != 11107
trigger1 = parent,stateno = 11190
trigger2 = parent,stateno = 13190
value = 11107

[State 10000];N
type = SprPriority
trigger1 = parent,stateno = 0
trigger2 = parent,stateno = [10,12]
trigger3 = parent,stateno = [20,21]
trigger4 = parent,stateno = [40,52]
trigger5 = parent,stateno = [100,101]
trigger6 = parent,stateno = [105,106]
trigger7 = parent,stateno = [5000,5500]
value = 2
ignorehitpause = 1

[State 10000];ガード
type = SprPriority
trigger1 = parent,stateno = [120,122]
value = 0
ignorehitpause = 1

[State 10000];ガード
type = SprPriority
trigger1 = parent,stateno = [130,132]
value = 0
ignorehitpause = 1

[State 10000];ガード
type = SprPriority
trigger1 = parent,stateno = [140,142]
value = 0
ignorehitpause = 1

[State 10000];ガード
type = SprPriority
trigger1 = parent,stateno = [150,152]
value = 0
ignorehitpause = 1

[State 10000];プッツン
type = SprPriority
trigger1 = parent,stateno = 700
value = 2
ignorehitpause = 1

[State 10000];立ち強
type = SprPriority
trigger1 = parent,stateno = 10220
trigger2 = parent,stateno = 10230
trigger3 = parent,stateno = 10410
trigger4 = parent,stateno = 10420
value = 2
ignorehitpause = 1

[State 10000];空中強
type = SprPriority
trigger1 = parent,stateno = 10620
value = 2
ignorehitpause = 1

[State 10000];点火
type = SprPriority
trigger1 = parent,stateno = 11030
value = 2
ignorehitpause = 1

;---------------------------------------------------------------------------
;クイックスタンドon時発光
[Statedef 10905]
type    = S
movetype= I
physics = N
anim = parent,anim
sprpriority = 6

[State 0, explod]
type = nothitby
trigger1 = 1
value = SCA

[State 0, explod]
type = turn
trigger1 = facing != root,facing

[State 0, explod]
type = playerpush
trigger1 = 1
value = 1

[State 0, explod]
type = bindtoparent
trigger1 = 1
pos = 0,0

[State 0, explod]
type = changeanim
trigger1 = anim != parent,anim
trigger2 = anim = parent,anim
trigger2 = animelemno(0) != parent,animelemno(0)
value = parent,anim
elem = parent,animelemno(0)
value = parent,anim

[State -2]
type = PalFX
trigger1 = !time
time = 100
add = 120,120,120
sinadd = 40,40,40,80
IgnoreHitPause = 1

[State -2]
type = destroyself
trigger1 = time = 65
trigger2 = root,var(49) = 0 
;-------------------------------------------------
;アイコン
[Statedef 6000]
type = S
sprpriority = 8
anim = 36400

[State 8000, 0];グレー
type = Explod
triggerall = teamside = 1
triggerall = roundstate = 2
trigger1 = numexplod(6001) = 0
trigger1 = !root,var(26)
anim = ifelse(facing=1,6001,6006)
id = 6001
pos = 25,222;50,40
bindtime = 999999999999999
pausemovetime = 999999999999999
sprpriority = 8
postype = Back
ownpal = 1
scale = .5, .5
removetime = -1

[State 8000, 0];グレー2p用
type = Explod
triggerall = teamside = 2
triggerall = roundstate = 2
trigger1 = numexplod(6001) = 0
trigger1 = !root,var(26)
anim = ifelse(facing=1,6001,6006)
id = 6001
pos = 30,222;50,40
bindtime = 999999999999999
pausemovetime = 999999999999999
sprpriority = 8
postype = Back
ownpal = 1
scale = .5, .5
removetime = -1

[State 8000, 0];カラー
type = Explod
triggerall = teamside = 1
triggerall = roundstate = 2
trigger1 = numexplod(6000) = 0
trigger1 = root,var(26)
anim = ifelse(facing=1,6000,6005)
id = 6000
pos = 25,222;50,40
bindtime = 999999999999999
pausemovetime = 999999999999999
sprpriority = 9
postype = Back
ownpal = 1
scale = .5, .5
removetime = -1

[State 8000, 0];カラー2p用
type = Explod
triggerall = teamside = 2
triggerall = roundstate = 2
trigger1 = numexplod(6000) = 0
trigger1 = root,var(26)
anim = ifelse(facing=1,6005,6000)
id = 6000
pos = 30,222;50,40
bindtime = 999999999999999
pausemovetime = 999999999999999
sprpriority = 9
postype = Back
ownpal = 1
scale = .5,.5
removetime = -1

;ランプ切り替え(BOM)
[State 6000, 0]
type = RemoveExplod
trigger1 = root,var(26)
trigger2 = roundstate = 3
ID = 6001

;ランプ切り替え(BOM)
[State 6000, 0]
type = RemoveExplod
trigger1 = !root,var(26)
trigger2 = roundstate = 3
ID = 6000
;---------------------------------------------------------------------------
;SM成功
[Statedef 950]
type     = S
movetype = I
physics  = S
anim     = 950
velset   = 0,0
ctrl     = 0
sprpriority = 5

[State 900, 音を鳴らす]
type = Changeanim
trigger1 = !time
value = 950+random%2
ignorhitpause = 1

[State 0, pos]
type = Offset
trigger1 = var(49) = 10000
trigger1 = 1
x = -10

[State 0, pos]
type = null;Offset
trigger1 = var(49) = 10000
trigger1 = !animtime
x = 10

[State 0, 円]
type = explod
trigger1 = var(49) = 10000
trigger1 = numexplod(868) = 0
trigger1 = !time
anim = 866
id = 868
pos = 0,-85
postype = p1
sprpriority = 4
ownpal = 1
shadow = 0,0,0
scale = .558,.715
pausemovetime = 999999
supermovetime = 999999
persistent = 0

[State 0, 円]
type = explod
trigger1 = var(49) = 10000
trigger1 = numexplod(867) = 0
trigger1 = !animtime
anim = 865
id = 867
pos = 0,-85
postype = p1
sprpriority = 4
ownpal = 1
shadow = 0,0,0
scale = .558,.715
pausemovetime = 999999
supermovetime = 999999
persistent = 0

[State 900, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = s6, 13
channel = -1

[State 900, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = s950, random%5
channel = 0

[State 900]
type = SuperPause
trigger1 = time = 0
time = 25
anim = -1
sound = -1
pos = 0,-50
movetime = 25
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 1

[State -2]
type = Varadd
trigger1 = !var(26)
trigger1 = time = 1
v = 7
value = ifelse(var(31),-2000,-4000);-4000
ignorehitpause = 1
persistent = 0

[State -2]
type = Varadd
trigger1 = var(26)
trigger1 = time = 1
v = 7
value = 0
ignorehitpause = 1
persistent = 0

[State 900]
type = NotHitBy
trigger1 = 1
value = SCA
time = 6+(19*var(31))

[State 900]
type = VarSet
trigger1 = 1
v = 14
value = 6+(19*var(31))

[State 20000]
type = null;Helper
trigger1 = time = 0
helpertype = normal
name = "moji"
ID = 20025
pos = 45, -85
postype = p1
facing = facing
stateno = 20025
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale = 1
size.yscale = 1
ignorehitpause = 1

[State 900]
type = VarSet
trigger1 = time = 0
fv = 7
value = 1
[State 900]
type = VarAdd
trigger1 = time = [1,10]
fv = 7
value = 0.02
[State 900]
type = VarAdd
trigger1 = time = [11,20]
fv = 7
value = -0.02

[State 180]
type = PosSet
trigger1 = 1
y = floor((const(size.mid.pos.y))+60*fvar(7))

[State 900]
type = AngleDraw
trigger1 = 1
scale = fvar(7),fvar(7)
value = 0


[State 180]
type = PosSet
trigger1 = time > 20
y = 0

[State 900, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;SM受け止め1
[Statedef 960]
type     = A
movetype = I
physics  = N
juggle   = 1
ctrl     = 0
anim     = 960
poweradd = 0
sprpriority = 6

[State 950]
type = NotHitBy
trigger1 = 1
value = ,AT

[State 950]
type = ReversalDef
trigger1 = root,var(14) <= 0
reversal.attr = SCA,AA
attr = S,HT
p1stateno = 961

[State 950]
type = HitOverride
trigger1 = root,var(14) <= 0
attr = SCA,AP,AA,AT
slot = 1
stateno = 961
time = 1
forceair = 0

[State 950]
type = NotHitBy
trigger1 = root,var(14) > 0
value = SCA

[State 950]
type = BindToRoot
trigger1 = 1
time = 1
facing = 1

[State 950]
type = DestroySelf
trigger1 = root,ctrl = 0
trigger1 = root,stateno != [100,101]
trigger2 = root,var(26) = 0
trigger2 = (root,var(13) >= 10)||(root,var(13) = 0)
trigger3 = root,statetype = A
trigger4 = root,var(26) = 0
trigger4 = time >= 10;root,var(28) = 0
trigger5 = root,var(14) > 0
trigger6 = root,var(26)
trigger6 = root,stateno != 0
trigger6 = root,stateno != 20
trigger6 = root,stateno != 100
trigger6 = root,stateno != 101
trigger6 = root,stateno != 103
trigger6 = root,stateno != 105
trigger6 = root,stateno != 3000
trigger6 = root,stateno != [120,159]
trigger7 = root,stateno = 3090
ignorhitpause = 1
;---------------------------------------------------------------------------
;SM受け止め2
[Statedef 961]
type     = A
movetype = I
physics  = N
juggle   = 1
ctrl     = 0
anim     = 36400
poweradd = 0
sprpriority = 6

[State 950]
type = DestroySelf
trigger1 = time >= 2
;---------------------------------------------------------------------------
;ガークラ喰らい
[Statedef 5910]
type     = S
movetype = H
physics  = S
anim     = 5910
velset   = -3,0
ctrl     = 0

[State 230, 2]
type = statetypeset
trigger1 = time = 0
trigger1 = pos y < 0
statetype = A
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = time = 0
v = 7
value = 5500
ignorehitpause = 1

[State 5910]
type = Explod
trigger1 = time = 0
anim = 15900
ID = 15900
pos = 0, -50
postype = p1
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 0.5, 0.5
sprpriority = 5

[State 5910]
type = Pause
trigger1 = time = 0
time = 25
movetime = 0

[State 5910]
type = ChangeAnim
trigger1 = time = 50
value = 5911

[State 5910]
type = PlaySnd
trigger1 = time = 0
value = s5, 2
channel = 0

[State 5910]
type = PlaySnd
trigger1 = time = 0
value = s15900, 0
channel = -1

[State 5910, ステート変更]
type = ChangeState
trigger1 = Statetype = A
trigger1 = AnimTime = 0 && anim = 5911
value = 50
ctrl = 1

[State 5910, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0 && anim = 5911
value = 0
ctrl = 1
;--------------------------------------------------------------------------
;ゲージ類表示
[Statedef 7050]
Type = A
Movetype = I
Physics = N
VelSet = 0,0
anim = 9999
sprpriority = 8

[State 20000]
type = Varset
trigger1 = 1
fv = 5
value = (root,var(7))

[State 20000]
type = Varset
trigger1 = 1
fv = 6
value = (root,var(17))

[State 20000]
type = RemoveExplod
trigger1 = MatchOver = 1
trigger2 = root,Stateno = [3306,3307]
triggerall = numexplod(7050) > 0
ID = 7050

[State 20000]
type = RemoveExplod
trigger1 = MatchOver = 1
trigger2 = root,Stateno = [3306,3307]
triggerall = numexplod(7051) > 0
ID = 7051

[State 20000]
type = RemoveExplod
trigger1 = MatchOver = 1
trigger2 = root,Stateno = [3306,3307]
triggerall = numexplod(7061) > 0
ID = 7061

[State 20000]
type = Explod
trigger1 = teamside = 1
trigger1 = MatchOver != 1
trigger1 = root,Stateno != [3306,3307]
anim = 7051
ID = 7051
pos = (65-(root,var(3))), (60+(root,var(4)))
postype = left
facing = 1
vfacing = 1
bindtime = -1
removetime = 2
scale = (0.000025*fvar(5)), 0.25
sprpriority = 8
removeongethit = 1
supermovetime = 999999999999999999
pausemovetime = 999999999999999999
ignorehitpause = 1
ownpal = 1

[State 20000]
type = Explod
triggerall = numexplod(7050) = 0
trigger1 = teamside = 1
trigger1 = MatchOver != 1
trigger1 = root,Stateno != [3306,3307]
anim = 7050
ID =7050
pos = (65-(root,var(3))), (60+(root,var(4)))
postype = left
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
scale = 0.25, 0.25
sprpriority = 7
removeongethit = 1
supermovetime = 999999999999999999
pausemovetime = 999999999999999999
ownpal = 1

[State 20000]
type = Explod
triggerall = numexplod(7050) = 0
trigger1 = teamside = 2
trigger1 = MatchOver != 1
trigger1 = root,Stateno != [3306,3307]
anim = 7050
ID = 7050
pos = (-65+(root,var(3))), (60+(root,var(4)))
postype = right
facing = -1
vfacing = 1
bindtime = -1
removetime = -1
scale = 0.25, 0.25
sprpriority = 7
removeongethit = 1
supermovetime = 999999999999999999
pausemovetime = 999999999999999999
ignorehitpause = 1
ownpal = 1

[State 20000]
type = Explod
trigger1 = teamside = 2
trigger1 = MatchOver != 1
trigger1 = root,Stateno != [3306,3307]
anim = 7051
ID = 7051
pos = (-65+(root,var(3))), (60+(root,var(4)))
postype = right
facing = -1
vfacing = 1
bindtime = -1
removetime = 2
scale = (0.000025*fvar(5)), 0.25
sprpriority = 8
removeongethit = 1
supermovetime = 999999999999999999
pausemovetime = 999999999999999999
ignorehitpause = 1
ownpal = 1

[State 20000];EPゲージ
type = Explod
trigger1 = teamside = 1
trigger1 = MatchOver != 1
trigger1 = root,Stateno != [3306,3307]
anim = 7061
ID = 7061
pos = (65-(root,var(3))), (70+(root,var(4)))
postype = left
facing = 1
vfacing = 1
bindtime = -1
removetime = 2
scale = (0.000025*fvar(6)), 0.25
sprpriority = 8
removeongethit = 1
supermovetime = 999999999999999999
pausemovetime = 999999999999999999
ignorehitpause = 1
ownpal = 1

[State 20000];EPゲージ
type = Explod
trigger1 = teamside = 2
trigger1 = MatchOver != 1
trigger1 = root,Stateno != [3306,3307]
anim = 7061
ID = 7061
pos = (-65+(root,var(3))), (70+(root,var(4)))
postype = right
facing = -1
vfacing = 1
bindtime = -1
removetime = 2
scale = (0.000025*fvar(6)), 0.25
sprpriority = 8
removeongethit = 1
supermovetime = 999999999999999999
pausemovetime = 999999999999999999
ignorehitpause = 1
ownpal = 1

[State -1, NotHitBy]
Type = NotHitBy
Trigger1 = 1
Value = SAC
Time = 1

[State -1]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 10000, Assert]
type = null;AssertSpecial
trigger1 = root,stateno = [3306,3307]
flag = invisible
ignorehitpause = 1

[State -1]
type = DestroySelf
trigger1 = numexplod = 0
trigger1 = MatchOver = 1
;-------------------------------------------------
;ゴゴゴモード※常駐
[Statedef 8500]
type = S
sprpriority = 0
anim = 36400

[State 0, var]
type = parentvarset
trigger1 = 1
var(41) = 1

[State 0, anim]
type = changeanim
triggerall = root,var(49) = !10000
triggerall = root,var(41)
trigger1 = anim != root,anim
trigger2 = anim = root,anim
trigger2 = animelemno(0) != parent,animelemno(0)
value = root,anim
elem = root,animelemno(0)

[State 0, anim]
type = changeanim
triggerall = root,var(49) = 10000
triggerall = root,var(41)
trigger1 = anim != helper(1),anim
trigger2 = anim = helper(1),anim
trigger2 = animelemno(0) != parent,animelemno(0)
value = helper(1),anim
elem = helper(1),animelemno(0)

[State 10001 固定]
type = BindToParent
triggerall = root,var(49) = !10000
trigger1 = 1
time = 1
pos = 0,1

[State 10001 固定]
type = BindToParent
triggerall = root,var(49) = 10000
trigger1 = 1
time = 1
pos = -10,1

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 10000]
type = NotHitBy
trigger1 = 1
value = SCA

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 230, 2]
type = assertspecial
trigger1 = root,life >= 300
trigger2 = root,stateno != [120,155]
trigger2 = root,stateno != [5000,5900]
trigger2 = root,movetype = H
trigger3 = root,stateno = [3300,3307]
trigger4 = root,stateno = 3400
flag = invisible

[State 1020, Blink Yellow]
type = PalFX
trigger1 = 1
time = 1
add = 255,0,0
mul = 256,256,256
sinadd = 50,0,0,100
color = 256

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 128,256

[State -2, ゴゴゴ補正]
type=varset
trigger1 = root,life < 300
fvar(8) = 1.2

;ゴゴゴ目線
[State -2]
type = helper
triggerall = root,alive
triggerall = root,life < 300
trigger1 = root,var(42) = 0
trigger1 = roundstate = 2 
trigger1 = numhelper(8510) = 0
stateno = 8510
id = 8510
pos = -50,-20
pausemovetime = 999999
supermovetime = 999999
sprpriority = 1
postype = back
ownpal = 1
size.xscale = .6
size.yscale = .6
persistent = 0

[State 0, var]
type = parentvarset
triggerall = root,alive
triggerall = root,life < 300
trigger1 = root,var(44) = 0
trigger1 = roundstate = 2 
trigger1 = numhelper(8510) = 0
var(42) = 1
ignorhitpause = 1

[State 20026, 0]
type = DestroySelf
trigger1 = roundstate != 2
trigger2 = !root,alive
;trigger3 = (root,stateno != [5000,5199]) && root,movetype = H && root,time
;-------------------------------------------------
;ゴゴゴ目線
[Statedef 8510]
type = S
sprpriority = 8
anim = 36400

[State 0, explod]
type = explod
trigger1 = teamside = 1
trigger1 = time = 1
anim = 8510
id = 8510
pos = -50,170
postype = left
bindtime = -1
scale = .6,.6
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(8510)
trigger1 = time <= 20
pos = ceil(-160+(time*10)),170
postype = left
id = 8510

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(8510)
trigger1 = time = 22
pos = 65,170
postype = left
id = 8510

[State 0, explod]
type = explod
trigger1 = teamside = 2
trigger1 = time = 1
anim = 8515
id = 8515
pos = -50,170
postype = right
bindtime = -1
scale = .6,.6
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(8515)
trigger1 = time <= 20
pos = ceil(160-(time*10)),170
postype = right
id = 8515

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(8515)
trigger1 = time = 22
pos = -65,170
postype = right
id = 8515

[State 0, pos]
type = playsnd
trigger1 = time = 1
value = 8500,10

[State 0, pos]
type = playsnd
trigger1 = time = 1
value = 8500,random%2

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 20026, 0]
type = DestroySelf
trigger1 = time = 100
;---------------------------------------------------------------------------
;ステートを奪われた相手
[Statedef 10425]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5070, 3]
type = nothitby
trigger1 = 1
value = SCA

[State 5070, 1]
type = ChangeAnim 
trigger1 = 1
value = 5070

[State 5070, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 10426

[State 5070, 3]
type = ForceFeedback
trigger1 = time = 0
time = 12
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HIT_TRIP2 (fall through air)
[Statedef 10426]
type    = A
movetype= H
physics = N

[State 5070, 3]
type = nothitby
trigger1 = 1
value = SCA

[State 5071, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5071, 2] ;Acceleration
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5071, 3] ;Hit ground
type = changeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 15
value = 10427
;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 10427]
type    = L
movetype= H
physics = N
velset = 0,0

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, 8]
type = VelSet
trigger1 = !time
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5110, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = selfState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 11] ;If just died
type = selfState
triggerall = alive
trigger1 = Time >= 60
trigger1 = Anim = [5110,5119]
value = 5081

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5110, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine
;---------------------------------------------------------------------------
; カンフーマンのこのコンスタンツファイルをそのまま使う場合は、
; ここからステートを追加すると整理しやすいでしょう。
;
; ・・・ってエレクバイト先生が言ってるけど、正直使いにくいかも（ﾏﾃｺﾗ
; 冗談です(´・ω:;.:...
;---------------------------------------------------------------------------
;===========================================================================
; 常時監視ステート（－２）
;===========================================================================
;---------------------------------------------------------------------------
; 通常の食らい状態（Statedef 5000～5199間）でも、
; 相手に（「P2StateNo」や「TargetState」等で）制御を奪われても、
; 常に登録したステートコントローラが有効になります。
; サブシステム等を制御する時に重宝するでしょう。
;---------------------------------------------------------------------------
;ガードのときｽﾀﾝﾄﾞの手を表示する
[Statedef -2]

[State -2]
type = helper
trigger1 = Anim = [130,132];ガード受付。
trigger1 = numhelper(1001) = 0
trigger1 = numhelper(7777) = 0
;ｽﾀﾝﾄﾞﾓｰﾄﾞの時は10130のｱﾆﾒなので。
helpertype = normal
postype = p1
pos = 0,0+IfElse(StateType=C,30,0)
;（しゃがみなら30、そうでなければ0）を足す。
sprpriority = 2
ownpal = 1
stateno = 7777
id = 7777
size.xscale = 1
size.yscale = 1

[State -2]
type = helper
trigger1 = numhelper(1001) = 0
trigger1 = numhelper(7778) = 0
trigger1 = Anim = [150,155];ガード硬直
helpertype = normal
postype = p1
pos = 0,0+IfElse(StateType=C,30,0)
sprpriority = 2
ownpal = 1
stateno = 7778
id = 7778
size.xscale = 1
size.yscale = 1
;-----------------------------------
[State 1000, 7];トリッシュ
type = null;Helper
trigger1 = !numhelper(190190)
trigger1 = time = 0
helpertype = normal
name = "trish"
stateno = 190190
id = 190190
pos = 80, 0
postype = p1
ownpal = 1
facing = 1
size.xscale = 0.84
size.yscale = 0.92
;-----------------------------------
[State 1000, 7];SOFFスタンド制御
type = null;changestate
trigger1 = ishelper(1001)
trigger1 = root,stateno = 210
value = 211
ignorhitpause = 1
;-----------------------------------
[State 200, ボスモード2処理]
type = varset
trigger1 = var(26) = 0
trigger1 = var(31) = 2
var(26) = 1
;-----------------------------------
[State 200, 先行入力リセット]
type = varset
trigger1 = stateno != 40
trigger1 = !ctrl
var(21) = 0

[State 200, 輪切り判定リセット]
type = varset
trigger1 = stateno != 3210
var(24) = 0
;-----------------------------------
;時飛ばし時無敵
[State 5070, 3]
type = nothitby
trigger1 = numhelper(1205)
value = SCA

;相手にステートを返す
[State 810, ステート変更]
type = Targetstate
trigger1 = numhelper(1205) = 0
;trigger1 = numtarget(1230)
;trigger1 = movetype = A
value = 1231
ID = 1230
;-----------------------------------
;相手ダウン回数計測
[State -2]
type = null;VarSet
triggerall = var(29) = 0
trigger1 = numtarget = 1
trigger2 = helper(1001),numtarget = 1
v = 29
value = 1
ignorehitpause = 1

[State -2]
type =Varset
trigger1 = stateno = [1100,1120]
trigger1 = movehit
trigger2 = stateno = 410
trigger2 = movehit
trigger3 = stateno = 810 || stateno = 811
trigger4 = stateno = 1401
trigger5 = stateno = 1702
v = 29
value = 1
ignorehitpause = 1

[State -2]
type = VarSet
triggerall = var(29) = 1
trigger1 = !numtarget
trigger1 = helper(1001),numtarget = 0
trigger2 = stateno = 700
v = 29
value = 0
ignorehitpause = 1

[State -2]
type = VarSet
triggerall = var(28) = 0
trigger1 = numhelper(1045) = 1
v = 28
value = 1
ignorehitpause = 1

[State -2]
type = VarSet
triggerall = var(28) = 1
trigger1 = numhelper(1045) = 0
v = 28
value = 0
ignorehitpause = 1
;-----------------------------------
[State -2];再びタメ判定リセット
type = varset
triggerall = var(27) = 1
trigger1 = stateno != [1000,1099]
trigger1 = stateno != [1500,1599]
v = 27
value = 0
ignorehitpause = 1
;-----------------------------------
[State 8500, 1];目潰し使用判定リセット
type = varset
;trigger1 = stateno = 0 || stateno = 11 || movetype = H
trigger1 = !numtarget
var(25) = 0
;-----------------------------------
;ゲージ管理
[State -2]
type = VarSet
trigger1 = stateno = 5900
trigger2 = stateno = [190,194]
trigger3 = stateno = [25192,25199]
trigger4 = roundstate = 1
v = 7
value = 10000
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(7) < 0
v = 7
value = 0
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(7) > 10000
v = 7
value = 10000
ignorehitpause = 1

[State -2]
type = Varadd
trigger1 = roundstate = 2
v = 16
value = 1
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = stateno = 150 ||  stateno = 152 ||  stateno = 154
trigger2 = stateno = 950
v = 16
value = 0
ignorehitpause = 1

[State -2]
type = Varadd
trigger1 = var(7) < 10000
trigger1 = var(16) > 200
v = 7
value = 10
ignorehitpause = 1

[State -2]
type = Varadd
trigger1 = !time
trigger1 = prevstateno = 150 ||  prevstateno = 152 ||  prevstateno = 154
trigger1 = stateno = 150 ||  stateno = 152 ||  stateno = 154
v = 7
value = -50
ignorehitpause = 1

[State -2]
type = Varadd
trigger1 = !time
trigger1 = prevstateno = 151 ||  prevstateno = 153 ||  prevstateno = 155
trigger1 = stateno = 150 ||  stateno = 152 ||  stateno = 154
v = 7
value = -150
ignorehitpause = 1

[State -2]
type = Varadd
trigger1 = prevstateno != 150 &&  prevstateno != 152 &&  prevstateno != 154
trigger1 = prevstateno != 151 &&  prevstateno != 153 &&  prevstateno != 155
trigger1 = !time
trigger1 = stateno = 150 ||  stateno = 152 ||  stateno = 154
v = 7
value = -300
ignorehitpause = 1
;-----------------------------------
;EPゲージ管理
[State -2];EPゲージリセット
type = VarSet
triggerall = var(26)
trigger1 = stateno = 3000
trigger1 = time < 50
v = 17
value = 10000
ignorehitpause = 1

[State -2];EPゲージ0に
type = VarSet
triggerall = !var(26)
trigger1 = stateno != 3000
trigger2 = stateno = 3000 && time > 50
v = 17
value = 0
ignorehitpause = 1

[State -2];EPゲージ減少
type = Varadd
triggerall = var(26)
triggerall = stateno != [3305,3307]
triggerall = stateno != [3210,3220]
triggerall = stateno != 3400
trigger1 = stateno != 700
trigger1 = stateno != 950
trigger1 = var(17) > 0
v = 17
value = ifelse(var(31),-36,-72);-18
;ignorehitpause = 1

[State -2];EPゲージ0に
type = Varset
triggerall = var(26)
trigger1 = var(17) < 0
v = 17
value = 0
ignorehitpause = 1
;-----------------------------------
;ゲージヘルパー
[state -2, ゲージヘルパー]
type = helper
trigger1 = !numhelper(7050)
trigger1 = !ishelper
helpertype = normal
name = "gauge"
stateno = 7050
ID = 7050
postype = p1
pos = 0,9999
keyctrl = 0
pausemovetime = 2147483647
supermovetime = 2147483647
;-----------------------------------
[State -2];エピタフ終了時処理
type = ChangeState
triggerall = statetype != A
triggerall = movetype != H
triggerall = var(26) = 2
trigger1 = ctrl
trigger2 = stateno = [200,220]
trigger3 = stateno = [400,420]
trigger4 = stateno = [1000,1055]
trigger5 = stateno = [1100,1150]
trigger6 = stateno = 1400 || stateno = 1460
trigger6 = !movehit
trigger7 = stateno = 1700 || stateno = 1750
trigger7 = !movehit
trigger8 = stateno = 1200
trigger9 = stateno = 1400 || stateno = 1460
value = 3090
ctrl = 0
ignorhitpause = 1
;-----------------------------------
[State -2];SM処理
type = ChangeState
trigger1 = numhelper(960) > 0
trigger1 = helper(960),stateno = 961
trigger1 = stateno != 960
value = 950
ctrl = 0

[State -2]
type = VarAdd
trigger1 = var(13) > 0
v = 13
value = 1

[State -2]
type = VarSet
triggerall = var(13) <= 0
triggerall = ifelse(var(26)=0,var(7) > 4000,var(7) > 0)
;triggerall = var(7) > 4000
trigger1 = var(59) = 0
trigger1 = command = "holdback"
v = 13
value = 1

;無敵変数減少
[State -2]
type = VarAdd
trigger1 = var(14) > 0
v = 14
value = -1

[State -2]
type = VarSet
trigger1 = var(13) >= 25
trigger1 = var(59) = 0
trigger1 = command != "holdback"
trigger2 = var(59) = 0
trigger2 = command = "holdfwd"
trigger2 = command != "holdback"
trigger3 = stateno = 900 && time = 1
trigger4 = var(13) < 0
trigger5 = stateno = [5000,5100];movetype = H && (stateno != [120,155])
v = 13
value = 0

[State -2]
type = Helper
triggerall = stateno != 3090
trigger1 = numhelper(960) = 0
trigger1 = var(13) = [1,9]
trigger1 = var(14) <= 0
trigger2 = numhelper(960) = 0
trigger2 = var(26)
helpertype = normal
name = "SM"
ID = 960
pos = 0, 0
postype = p1
facing = 1
stateno = 960
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
;-----------------------------------
[State -2];ガークラ
type = ChangeState
trigger1 = var(7) <= 0
trigger1 = alive
trigger1 = stateno = [120,155]
value = 5910
ctrl = 0
;-----------------------------------
;ゴゴゴモード
[State -2]
type = helper
triggerall = roundstate = 2
trigger1 = movetype != H
trigger1 = !Numhelper(8500)
stateno = 8500
id = 8500
pos = 0,0
pausemovetime = 999999
supermovetime = 999999
sprpriority = -1
postype = p1
ownpal = 1
size.xscale = 0.95
size.yscale = 1.02
;-----------------------------------
[State 12200, StopSound];挑発ボイス停止
type = StopSnd
trigger1 = stateno = [120,159]
channel = 0
;-----------------------------------
[State -2, エフェクトを消す];足場B
type = null;RemoveExplod
trigger1 = stateno != [3300,3307]
ID = 3356
;-----------------------------------
[State -2];早人
type = null;helper
triggerall = var(34)
trigger1 = numhelper(8810) = 0
helpertype = normal
postype = p1
pos = -30,0
sprpriority = -1
ownpal = 1
stateno = 8810
id = 8810
size.xscale = 1
size.yscale = 1
size.shadowoffset = -7
;-----------------------------------
;アイコン 表示
[State -2]
type = helper
triggerall = roundstate = 2 
trigger1 = !var(37)
trigger1 = !Numhelper(6000)
trigger1 = 1
stateno = 6000
id = 6000
pos = 50,15;50,40
bindtime = 999999999999999
pausemovetime = 999999999999999
sprpriority = -3
postype = Back
ownpal = 1
size.xscale = 1
size.yscale = 1
;---------------------------------------------------------------------------
[State 810, HitBy]
type = HitBy
trigger1 = numhelper(11602)
value = SCA, NT,ST,HT
time = 1
;---------------------------------------------------------------------------
;EB解除
[State -2]
type = varset
trigger1 = ctrl
var(8) = 0
;---------------------------------------------------------------------------
[State -2];スタンド出現時にガード不可にする
type = AssertSpecial
trigger1 = NumHelper(1001) = 1 
flag = nostandguard
flag2 = nocrouchguard
flag3 = noairguard
ignorehitpause = 1
;---------------------------------------------------------------------------
;ｽﾀﾝﾄﾞ被ダメでｽﾀﾝﾄﾞ消滅のとき、本体もダメージ受ける
[State -2]
type = null;ChangeState
trigger1 = var(11) != 0
trigger1 = stateno != [16502,16504]
value = ifelse(StateType=S,16502,(ifelse(StateType=C,16503,16504)))
ctrl = 0
;---------------------------------------------------------------------------
;コンボ補正
[State -2, 補正リセット]
type=varset
;trigger1=!var(54)
trigger1=!numtarget
var(40)=0

[State -2, ヒット数加算]
type=varadd
triggerall=numtarget
triggerall=enemynear,movetype=h
triggerall=enemynear,gethitvar(hitcount)>var(40)
triggerall=stateno != 11000 && stateno != 11010 && stateno != 11020
;triggerall=stateno != 10220
trigger1=movehit
trigger2=projhittime(0)=0
;ヘルパー用
trigger3=numhelper(1001)
trigger3=helper(1001),movehit=1+(movetype!=a)
var(40)=1

[State -2, ヒット数加算] 
type = varadd
trigger1 = stateno = 1401
trigger1 = time = 99
trigger1 = numtarget
v = 40
value = 0

[State -2, ヒット数加算] 
type = varadd
trigger1 = stateno = [810,811]
trigger1 = time = 0
trigger1 = numtarget
v = 40
value = 5

[State -2, ヒット数加算] 
type = null;varadd
trigger1 = stateno = 10220
trigger1 = time <= 16
trigger1 = movehit = 1
v = 40
value = 1


;補正値
[State -2, 補正レベル1]
type=varset
trigger1= var(40) = 0
fvar(1) = 1

[State -2, 補正レベル2]
type=varset
trigger1= var(40) >= 3
fvar(1) = 0.8

[State -2, 補正レベル3]
type=varset
trigger1= var(40) >= 6
fvar(1) = 0.65

[State -2, 補正レベル4]
type=varset
trigger1= var(40) >= 9
fvar(1) = 0.53

[State -2, 補正レベル5]
type=varset
trigger1= var(40) >= 12
fvar(1) = 0.46

[State -2, 補正レベル6]
type=varset
trigger1= var(40) >= 15
fvar(1) = 0.38

[State -2, 補正レベル7]
type=varset
trigger1= var(40) >= 18
fvar(1) = 0.34

[State -2, 補正レベル8]
type=varset
trigger1= var(40) >= 23
fvar(1) = 0.28

[State -2, 補正レベル9]
type=varset
trigger1= var(40) >= 26
fvar(1) = 0.20

[State -2, 補正レベル9]
type=varset
trigger1= var(40) >= 30
fvar(1) = 0.10

[State -2, 補正適用]
type=attackmulset
trigger1=!var(31)
value=ifelse(life <= 300,ifelse(p2movetype=A,1.1*2,1.1),ifelse(p2movetype=A,2,1))

[State -2, 補正適用]
type=attackmulset
trigger1=var(31)
value=ifelse(life <= 300,ifelse(p2movetype=A,1.8*2,1.8),ifelse(p2movetype=A,3,1.5))
;-----------------------------------
[State -2];財布
type = null;helper
trigger1 = stateno = 0
trigger1 = numhelper(1900) = 0
helpertype = normal
postype = p1
sprpriority = 2
ownpal = 1
stateno = 1900
id = 1900
size.xscale = 1
size.yscale = 1
;---------------------------------------------------------------------------
;ポーズ認識用
[state -2, var]
type = varset
trigger1 = 1
var(39) = 0
;---------------------------------------------------------------------------
;必殺技キャンセル時の効果音
[State -2]
type = PlaySnd
triggerall = time = 1
triggerall = prevstateno = [200,620]
trigger1 = stateno = [450,454]
trigger2 = stateno = [1000,1020]
trigger3 = stateno = [1100,1120]
trigger4 = stateno = [1200,1220]
trigger5 = stateno = [1300,1320]
trigger6 = stateno = [1400,1420]
value = 6, 10

;必殺技キャンセル時のエフェクト(キラキラ)
[State 10820, おまけ]
type = Explod
triggerall = time = 1
triggerall = numexplod(890) = 0
triggerall = prevstateno = [200,620]
trigger1 = stateno = [450,454]
trigger2 = stateno = [1000,1020]
trigger3 = stateno = [1100,1120]
trigger4 = stateno = [1200,1220]
trigger5 = stateno = [1300,1320]
trigger6 = stateno = [1400,1420]
facing = 1                 
postype = p1
pos = 0,-60
anim = 890
id = 890
sprpriority = 5
ownpal = 1
scale = 1,1
;removetime = 1

;必殺技キャンセル時のエフェクト(キラキラB)
[State 10820, おまけ]
type = Explod
triggerall = time = 5
triggerall = numexplod(891) = 0
triggerall = prevstateno = [200,620]
trigger1 = stateno = [450,454]
trigger2 = stateno = [1000,1020]
trigger3 = stateno = [1100,1120]
trigger4 = stateno = [1200,1220]
trigger5 = stateno = [1300,1320]
trigger6 = stateno = [1400,1420]
facing = 1                 
postype = p1
pos = 0,-80
anim = 890
id = 891
sprpriority = 5
ownpal = 1
scale = .5,.5
;removetime = 1

;必殺技キャンセル時の効果音(Son)
[State -2]
type = PlaySnd
triggerall = time = 1
triggerall = prevstateno = [10200,10620]
trigger1 = stateno = [11000,11020]
trigger2 = stateno = 11030
trigger3 = stateno = [11100,11120]
trigger4 = stateno = [11400,11420]
value = 6, 10

;必殺技キャンセル時のエフェクト(キラキラ)(Son)
[State 10820, おまけ]
type = Explod
triggerall = time = 1
triggerall = numexplod(890) = 0
triggerall = prevstateno = [10200,10620]
trigger1 = stateno = [11000,11020]
trigger2 = stateno = 11030
trigger3 = stateno = [11100,11120]
trigger4 = stateno = [11400,11420]
facing = 1                 
postype = p1
pos = 0,-60
anim = 890
id = 890
sprpriority = 6
ownpal = 1
scale = 1,1
;removetime = 1

;必殺技キャンセル時のエフェクト(キラキラB)(Son)
[State 10820, おまけ]
type = Explod
triggerall = time = 5
triggerall = numexplod(891) = 0
triggerall = prevstateno = [10200,10620]
trigger1 = stateno = [11000,11020]
trigger2 = stateno = 11030
trigger3 = stateno = [11100,11120]
trigger4 = stateno = [11400,11420]
facing = 1                 
postype = p1
pos = 0,-80
anim = 890
id = 891
sprpriority = 6
ownpal = 1
scale = .5,.5
;removetime = 1
;---------------------------------------------------------------------------
[State -2];本体ダミー
type = Helper
trigger1 = Var(49) = 10000  ;ｽﾀﾝﾄﾞonかつ
trigger1 = NumHelper(1) = 0 ;このﾍﾙﾊﾟｰが出てない時
helpertype = normal
stateno = 10000
id = 1
pos = 0,0
postype = p1
ownpal = 0
keyctrl = 0
pausemovetime = 999999;Pause無視時間 (int)
supermovetime = 999999
;-----------------------------------
[State -2];スタンドを本体に戻す
type = varset
var(49) = 0
trigger1 = var(49) = 10000
trigger1 = alive = 0
trigger1 = animTime = 0

trigger2 = var(49) = 10000 && movetype = H
trigger2 = stateno != 0
trigger2 = stateno != [10,12]
trigger2 = stateno != [20,21]
trigger2 = stateno != 40
trigger2 = stateno != 120
trigger2 = stateno != [130,132]
trigger2 = stateno != 140
trigger2 = stateno != [150,155]
trigger2 = stateno != [5000,5001]
trigger2 = stateno != [5010,5011]
trigger2 = stateno != 5020
trigger2 = stateno != 5030
trigger2 = stateno != 5035
trigger2 = stateno != 5040
trigger2 = stateno != 5050
trigger2 = stateno != [5070,5071]
trigger2 = stateno != [5080,5081]
trigger2 = stateno != [5100,5101]
trigger2 = stateno != 5110
trigger2 = stateno != 5120
trigger2 = stateno != 5150
trigger2 = stateno != [5200,5201]
trigger2 = stateno != 5210
trigger2 = stateno != [15000,15001]
trigger2 = stateno != [15010,15011]
trigger2 = stateno != 15020
trigger2 = stateno != 15030
trigger2 = stateno != 15035
trigger2 = stateno != 15040
trigger2 = stateno != 15050
trigger2 = stateno != [15070,15071]
trigger2 = stateno != [15080,15081]
trigger2 = stateno != [15100,15101]
trigger2 = stateno != 15110
trigger2 = stateno != 15120
trigger2 = stateno != 15150
trigger2 = stateno != [15200,15201]
trigger2 = stateno != 15210
trigger2 = stateno != [14000,14005]
trigger2 = movetype = H && anim != [15000,15210]
trigger2 = stateno != [14400,14405]
trigger3 = var(49) = 10000
trigger3 = anim = 5110 && movetype = H
;-----------------------------------
[State -2, デバッグ(変数確認)]
Type = DisplayToClipBoard
Trigger1 = 1
Text = "var(28)=%d,var(29)=%d,power=%d"
Params = var(28),var(29),power
IgnoreHitPause = 1

;[State -2, クリップボード（追加専用）]
;type = AppendToClipboard
;trigger1 = 1
;text = "Position X=%d,Y=%d, Velocity X=%f,Y=%f, Hit=%d \n"
;params = floor(Pos X),floor(Pos Y),(Vel X),(Vel Y),(MoveHit)
;===========================================================================
; 準常時監視ステート（－３）
;===========================================================================
;---------------------------------------------------------------------------
; こちらは通常の食らい状態以外の「P2StateNo」や「TargetState」等で制御された、
; 作成者が任意に指定した相手側の食らいステートに限り、
; 登録したステートコントローラが有効にはなりません。
; －１や－２と上手く使い分けて行きましょう。
;---------------------------------------------------------------------------
[Statedef -3]
;---------------------------------------------------------------------------

[State -3, 1];基礎コンボ用リセット
type = varset
triggerall = var(59)
Triggerall = var(58)>0
trigger1 = movetype = H
trigger2 = stateno = 1120 && animtime = 0
trigger3 = stateno = 1150 && animtime = 0
trigger4 = p2dist X > 180
trigger5 = stateno = 3090
var(58) = 0

[State -3, 3];切り返し入門コンボ用
type = varset
triggerall = var(59)
triggerall = var(58) = 0
triggerall = var(28) = 1
Triggerall = StateNo = 1055
trigger1 = p2bodydist X < 150
var(58) = 10

[State -3, 3];血コンボ用のゲージが足りない場合
type = varset
triggerall = var(59)
triggerall = var(58) = 0 
triggerall = var(25) = 0
Triggerall = StateNo = 220
triggerall = power < 700
triggerall = movehit
trigger1 = p2movetype = H
trigger1 = random = [721,999]
var(58) = 1

[State -3, 3];血コンボ用
type = varset
triggerall = var(59)
triggerall = var(58) = 0 
triggerall = var(25) = 0
Triggerall = StateNo = 220
triggerall = power >= 700
triggerall = movehit
trigger1 = p2movetype = H
trigger1 = random = [721,999]
var(58) = 7

[State -3, 3];基礎コンボ用
type = varset
triggerall = var(59)
triggerall = var(58) = 0
triggerall = var(28) = 0
Triggerall = StateNo = 220
triggerall = movehit
triggerall = p2bodydist X < 150
trigger1 = p2life < 360
trigger2 = random = [0,330]
var(58) = 1

[State -3, 3];基礎コンボ用
type = varset
triggerall = var(59)
triggerall = var(58) = 0 
triggerall = var(28) = 0
Triggerall = StateNo = 220
triggerall = movehit
trigger1 = random = [331,550]
var(58) = 2
[State -3, 3];2から派生
type = varset
triggerall = var(59)
trigger1 = frontedgedist < 88
Trigger1 = var(58) = 2
Trigger1 = StateNo = 420 
Trigger1 = MoveHit
trigger1 = p2movetype = H
trigger1 = random = [0,650]
var(58) = 6
[State -3, 3];2から派生
type = varset
triggerall = var(59)
Trigger1 = var(58) = 2
Trigger1 = StateNo = 420 
Trigger1 = MoveHit
trigger1 = p2movetype = H
var(58) = 3

[State -3, 3];血コンボ用2
type = varset
triggerall = var(59)
trigger1= var(58) = 7
Trigger1 = StateNo = 210
Trigger1 = MoveHit
trigger1 = p2movetype = H
var(58) = 8

[State -3, 3];基礎コンボ用
type = varset
triggerall = var(59)
triggerall = var(58) = 0 
triggerall = var(28) = 0
Triggerall = StateNo = 220
triggerall = movehit
trigger1 = p2movetype = H
trigger1 = random = [551,720]
var(58) = 5

[State -3, 1];特殊リセット
type = varset
triggerall = var(59)
triggerall = p2bodydist x > 150
Trigger1 = var(58) = 5
var(58) = 0

[State -3, 3];血コンボ用3
type = varset
triggerall = var(59)
Trigger1 = StateNo = 200
Trigger1 = MoveHit
trigger1= var(58) = 8
var(58) = 9

;スタンド被ダメ時
[state -3, end]
type = changestate
triggerall = stateno != [15000,15999]
triggerall = !IsHelper
trigger1 = numhelper(1001)
trigger1 = helper(1001),stateno = 9500
trigger1 = !helper(1001),time
trigger1 = statetype = S
value = 15000
ctrl = 0
[state -3, end]
type = changestate
triggerall = stateno != [15000,15999]
triggerall = !IsHelper
trigger1 = numhelper(1001)
trigger1 = helper(1001),stateno = 9500
trigger1 = !helper(1001),time
trigger1 = statetype = C
value = 15010
ctrl = 0
[state -3, end]
type = changestate
triggerall = stateno != [15000,15999]
triggerall = !IsHelper
trigger1 = numhelper(1001)
trigger1 = helper(1001),stateno = 9500
trigger1 = !helper(1001),time
trigger1 = statetype = A
value = 15020
ctrl = 0
;-----------------------------------
;ここは「ジャンプ」か「バックステップ」をした後に
;着地する音を鳴らす設定をしています。

[State -3, 音を鳴らす]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52  ;着地ステート
trigger2 = stateno = 106 ;バックステップ後の着地ステート
value = 40, 0

;飛び道具検知用ヘルパー
[State -3,]
type=helper
trigger1=!NumHelper(40005)
trigger1=roundstate=2
trigger1=alive
helpertype=normal
name="AI"
stateno=40005
ID=40005
pos=9999,9999
keyctrl=0
pausemovetime=0
supermovetime=0
persistent = 0

[State -3, 関係無いステートに行かないように]
type=changestate
trigger1= ishelper(40005)
trigger1= stateno!=40005
value=40005

;-------------------------------------------------------------------------
[Statedef 40005];飛び道具検出用ヘルパー
type = A
ctrl = 0
anim = 29999
movetype = I
physics = N
sprpriority = 1

;保険等---------------------
[State 40005]
type = SelfState
trigger1 = !IsHelper
Value = 0

[State 40005]
type = assertspecial
trigger1 = 1
flag = invisible

[State 40005]
type = NotHitBy
value = SCA
trigger1 = 1
;----------------------------

[State 40005];スイッチリセット
type = parentvarset
trigger1 = 1
var(57)=0

[State 40005, 検出P];相手projが存在するときスイッチON
type = parentvarset
triggerall = NumEnemy
trigger1 = Enemy(0),numproj > 0
trigger2 = Enemy(numenemy=2),numproj > 0
var(57)=1

[State 40005, 検出H];相手ヘルパーが攻撃判定を持つときスイッチON
type = parentvarset
triggerall = NumEnemy
trigger1 = playerIDexist(ID-1)=1 ;このヘルパーの１つ前のプレイヤーIDが存在するとき。
trigger1 = (playerID(ID-1),hitdefattr = SCA,AA,AT,AP || playerID(ID-1),movetype = A) && playerID(ID-1),teamside != root,teamside && playerID(ID-1),ishelper
trigger2 = playerIDexist(ID-2)=1 ;このヘルパーの２つ前のプレイヤーIDが存在するとき。以下同様
trigger2 = (playerID(ID-2),hitdefattr = SCA,AA,AT,AP || playerID(ID-2),movetype = A) && playerID(ID-2),teamside != root,teamside && playerID(ID-2),ishelper
trigger3 = playerIDexist(ID-3)=1
trigger3 = (playerID(ID-3),hitdefattr = SCA,AA,AT,AP || playerID(ID-3),movetype = A) && playerID(ID-3),teamside != root,teamside && playerID(ID-3),ishelper
trigger4 = playerIDexist(ID-4)=1
trigger4 = (playerID(ID-4),hitdefattr = SCA,AA,AT,AP || playerID(ID-4),movetype = A) && playerID(ID-4),teamside != root,teamside && playerID(ID-4),ishelper
trigger5 = playerIDexist(ID-5)=1
trigger5 = (playerID(ID-5),hitdefattr = SCA,AA,AT,AP || playerID(ID-5),movetype = A) && playerID(ID-5),teamside != root,teamside && playerID(ID-5),ishelper
trigger6 = playerIDexist(ID-6)=1
trigger6 = (playerID(ID-6),hitdefattr = SCA,AA,AT,AP || playerID(ID-6),movetype = A) && playerID(ID-6),teamside != root,teamside && playerID(ID-6),ishelper
trigger7 = playerIDexist(ID-7)=1
trigger7 = (playerID(ID-7),hitdefattr = SCA,AA,AT,AP || playerID(ID-7),movetype = A) && playerID(ID-7),teamside != root,teamside && playerID(ID-7),ishelper
trigger8 = playerIDexist(ID-8)=1
trigger8 = (playerID(ID-8),hitdefattr = SCA,AA,AT,AP || playerID(ID-8),movetype = A) && playerID(ID-8),teamside != root,teamside && playerID(ID-8),ishelper
trigger9 = playerIDexist(ID-9)=1
trigger9 = (playerID(ID-9),hitdefattr = SCA,AA,AT,AP || playerID(ID-9),movetype = A) && playerID(ID-9),teamside != root,teamside && playerID(ID-9),ishelper
trigger10= playerIDexist(ID-10)=1
trigger10= (playerID(ID-10),hitdefattr = SCA,AA,AT,AP || playerID(ID-10),movetype = A) && playerID(ID-10),teamside != root,teamside && playerID(ID-10),ishelper
trigger11= playerIDexist(ID-11)=1
trigger11= (playerID(ID-11),hitdefattr = SCA,AA,AT,AP || playerID(ID-11),movetype = A) && playerID(ID-11),teamside != root,teamside && playerID(ID-11),ishelper
trigger12= playerIDexist(ID-12)=1
trigger12= (playerID(ID-12),hitdefattr = SCA,AA,AT,AP || playerID(ID-12),movetype = A) && playerID(ID-12),teamside != root,teamside && playerID(ID-12),ishelper
trigger13= playerIDexist(ID-13)=1
trigger13= (playerID(ID-13),hitdefattr = SCA,AA,AT,AP || playerID(ID-13),movetype = A) && playerID(ID-13),teamside != root,teamside && playerID(ID-13),ishelper
trigger14= playerIDexist(ID-14)=1
trigger14= (playerID(ID-14),hitdefattr = SCA,AA,AT,AP || playerID(ID-14),movetype = A) && playerID(ID-14),teamside != root,teamside && playerID(ID-14),ishelper
trigger15= playerIDexist(ID-15)=1
trigger15= (playerID(ID-15),hitdefattr = SCA,AA,AT,AP || playerID(ID-15),movetype = A) && playerID(ID-15),teamside != root,teamside && playerID(ID-15),ishelper
trigger16= playerIDexist(ID-16)=1
trigger16= (playerID(ID-16),hitdefattr = SCA,AA,AT,AP || playerID(ID-16),movetype = A) && playerID(ID-16),teamside != root,teamside && playerID(ID-16),ishelper
trigger17= playerIDexist(ID-17)=1
trigger17= (playerID(ID-17),hitdefattr = SCA,AA,AT,AP || playerID(ID-17),movetype = A) && playerID(ID-17),teamside != root,teamside && playerID(ID-17),ishelper
trigger18= playerIDexist(ID-18)=1
trigger18= (playerID(ID-18),hitdefattr = SCA,AA,AT,AP || playerID(ID-18),movetype = A) && playerID(ID-18),teamside != root,teamside && playerID(ID-18),ishelper
trigger19= playerIDexist(ID-19)=1
trigger19= (playerID(ID-19),hitdefattr = SCA,AA,AT,AP || playerID(ID-19),movetype = A) && playerID(ID-19),teamside != root,teamside && playerID(ID-19),ishelper
trigger20= playerIDexist(ID-20)=1
trigger20= (playerID(ID-20),hitdefattr = SCA,AA,AT,AP || playerID(ID-20),movetype = A) && playerID(ID-20),teamside != root,teamside && playerID(ID-20),ishelper
var(57)=ceil(playerID(ID-1),p2bodydist x)

[State 40005];検出にかからなかったら消滅
type = destroyself
trigger1 = root,var(57)=0


;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;QUEENの『good old fashioned lover boy』好き。小気味良い曲。
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; ■最後に『コモンステート』について■
; コモンステートとは、全キャラ共通の基本動作のステートです。
; 通常は特に変更しない限り、M.U.G.E.N本体のdataフォルダにある
;「common1.cns（コモンステートファイル）」を使います。
;
; しかし、もしもあなたのキャラのステートファイルでcommon1.cnsと同じ番号の
; 基本動作のステートを作った場合は処理が上書きされ、
; common1.cns側の同じ番号のステートは無効になります。
;
; common1.cnsのプログラム優先度は最低に属しているので、
; ステートの作成には番号に注意しないといけません。
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
